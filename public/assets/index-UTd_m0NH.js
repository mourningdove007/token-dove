(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();const ks=!1;var Ia=Array.isArray,Bu=Array.prototype.indexOf,_i=Array.from,Au=Object.defineProperty,Br=Object.getOwnPropertyDescriptor,ku=Object.getOwnPropertyDescriptors,Iu=Object.prototype,Ru=Array.prototype,Ra=Object.getPrototypeOf,Bo=Object.isExtensible;function Mu(n){return n()}function Is(n){for(var t=0;t<n.length;t++)n[t]()}function Ma(){var n,t,e=new Promise((r,s)=>{n=r,t=s});return{promise:e,resolve:n,reject:t}}const de=2,Rs=4,Cr=8,Ta=1<<24,an=16,cn=32,Dn=64,$s=128,Ne=512,ve=1024,_e=2048,un=4096,Re=8192,xn=16384,Hs=32768,sr=65536,Ao=1<<17,Ca=1<<18,gr=1<<19,La=1<<20,vn=1<<25,On=32768,Ms=1<<21,Vs=1<<22,En=1<<23,Ar=Symbol("$state"),Qn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Tu(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Cu(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Lu(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Uu(n){throw new Error("https://svelte.dev/e/effect_orphan")}function Fu(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ou(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Nu(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function qu(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Pu(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Du=1,zu=2,Ku=16,$u=1,Hu=2,fe=Symbol();function Vu(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ua(n){return n===this.v}function ju(n,t){return n!=n?t==t:n!==t||n!==null&&typeof n=="object"||typeof n=="function"}function Fa(n){return!ju(n,this.v)}let xi=!1,Wu=!1;function Gu(){xi=!0}let ae=null;function or(n){ae=n}function Oa(n,t=!1,e){ae={p:ae,i:!1,c:null,e:null,s:n,x:null,l:xi&&!t?{s:null,u:null,$:[]}:null}}function Na(n){var t=ae,e=t.e;if(e!==null){t.e=null;for(var r of e)nc(r)}return t.i=!0,ae=t.p,{}}function Lr(){return!xi||ae!==null&&ae.l===null}let kn=[];function qa(){var n=kn;kn=[],Is(n)}function Ei(n){if(kn.length===0&&!kr){var t=kn;queueMicrotask(()=>{t===kn&&qa()})}kn.push(n)}function Zu(){for(;kn.length>0;)qa()}function Pa(n){var t=_t;if(t===null)return yt.f|=En,n;if((t.f&Hs)===0){if((t.f&$s)===0)throw n;t.b.error(n)}else ar(n,t)}function ar(n,t){for(;t!==null;){if((t.f&$s)!==0)try{t.b.error(n);return}catch(e){n=e}t=t.parent}throw n}const Yu=-7169;function ce(n,t){n.f=n.f&Yu|t}function js(n){(n.f&Ne)!==0||n.deps===null?ce(n,ve):ce(n,un)}function Da(n){if(n!==null)for(const t of n)(t.f&de)===0||(t.f&On)===0||(t.f^=On,Da(t.deps))}function za(n,t,e){(n.f&_e)!==0?t.add(n):(n.f&un)!==0&&e.add(n),Da(n.deps),ce(n,ve)}const Vr=new Set;let xt=null,ni=null,Pe=null,Ce=[],Si=null,Ts=!1,kr=!1;class je{committed=!1;current=new Map;previous=new Map;#e=new Set;#o=new Set;#t=0;#i=0;#s=null;#r=new Set;#n=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#i>0}process(t){Ce=[],ni=null,this.apply();var e=[],r=[];for(const s of t)this.#a(s,e,r);this.is_fork||this.#u(),this.is_deferred()?(this.#c(r),this.#c(e)):(ni=this,xt=null,ko(r),ko(e),ni=null,this.#s?.resolve()),Pe=null}#a(t,e,r){t.f^=ve;for(var s=t.first,i=null;s!==null;){var o=s.f,c=(o&(cn|Dn))!==0,f=c&&(o&ve)!==0,g=f||(o&Re)!==0||this.skipped_effects.has(s);if(!g&&s.fn!==null){c?s.f^=ve:i!==null&&(o&(Rs|Cr|Ta))!==0?i.b.defer_effect(s):(o&Rs)!==0?e.push(s):Fr(s)&&((o&an)!==0&&this.#r.add(s),Rr(s));var E=s.first;if(E!==null){s=E;continue}}var A=s.parent;for(s=s.next;s===null&&A!==null;)A===i&&(i=null),s=A.next,A=A.parent}}#c(t){for(var e=0;e<t.length;e+=1)za(t[e],this.#r,this.#n)}capture(t,e){e!==fe&&!this.previous.has(t)&&this.previous.set(t,e),(t.f&En)===0&&(this.current.set(t,t.v),Pe?.set(t,t.v))}activate(){xt=this,this.apply()}deactivate(){xt===this&&(xt=null,Pe=null)}flush(){if(this.activate(),Ce.length>0){if(Ka(),xt!==null&&xt!==this)return}else this.#t===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#o)t(this);this.#o.clear()}#u(){if(this.#i===0){for(const t of this.#e)t();this.#e.clear()}this.#t===0&&this.#f()}#f(){if(Vr.size>1){this.previous.clear();var t=Pe,e=!0;for(const s of Vr){if(s===this){e=!1;continue}const i=[];for(const[c,f]of this.current){if(s.current.has(c))if(e&&f!==s.current.get(c))s.current.set(c,f);else continue;i.push(c)}if(i.length===0)continue;const o=[...s.current.keys()].filter(c=>!this.current.has(c));if(o.length>0){var r=Ce;Ce=[];const c=new Set,f=new Map;for(const g of i)$a(g,o,c,f);if(Ce.length>0){xt=s,s.apply();for(const g of Ce)s.#a(g,[],[]);s.deactivate()}Ce=r}}xt=null,Pe=t}this.committed=!0,Vr.delete(this)}increment(t){this.#t+=1,t&&(this.#i+=1)}decrement(t){this.#t-=1,t&&(this.#i-=1),this.revive()}revive(){for(const t of this.#r)this.#n.delete(t),ce(t,_e),on(t);for(const t of this.#n)ce(t,un),on(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#o.add(t)}settled(){return(this.#s??=Ma()).promise}static ensure(){if(xt===null){const t=xt=new je;Vr.add(xt),kr||je.enqueue(()=>{xt===t&&t.flush()})}return xt}static enqueue(t){Ei(t)}apply(){}}function Xu(n){var t=kr;kr=!0;try{for(var e;;){if(Zu(),Ce.length===0&&(xt?.flush(),Ce.length===0))return Si=null,e;Ka()}}finally{kr=t}}function Ka(){var n=Ln;Ts=!0;var t=null;try{var e=0;for(ai(!0);Ce.length>0;){var r=je.ensure();if(e++>1e3){var s,i;Ju()}r.process(Ce),Sn.clear()}}finally{Ts=!1,ai(n),Si=null}}function Ju(){try{Fu()}catch(n){ar(n,Si)}}let Qe=null;function ko(n){var t=n.length;if(t!==0){for(var e=0;e<t;){var r=n[e++];if((r.f&(xn|Re))===0&&Fr(r)&&(Qe=new Set,Rr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?oc(r):r.fn=null),Qe?.size>0)){Sn.clear();for(const s of Qe){if((s.f&(xn|Re))!==0)continue;const i=[s];let o=s.parent;for(;o!==null;)Qe.has(o)&&(Qe.delete(o),i.push(o)),o=o.parent;for(let c=i.length-1;c>=0;c--){const f=i[c];(f.f&(xn|Re))===0&&Rr(f)}}Qe.clear()}}Qe=null}}function $a(n,t,e,r){if(!e.has(n)&&(e.add(n),n.reactions!==null))for(const s of n.reactions){const i=s.f;(i&de)!==0?$a(s,t,e,r):(i&(Vs|an))!==0&&(i&_e)===0&&Ha(s,t,r)&&(ce(s,_e),on(s))}}function Ha(n,t,e){const r=e.get(n);if(r!==void 0)return r;if(n.deps!==null)for(const s of n.deps){if(t.includes(s))return!0;if((s.f&de)!==0&&Ha(s,t,e))return e.set(s,!0),!0}return e.set(n,!1),!1}function on(n){for(var t=Si=n;t.parent!==null;){t=t.parent;var e=t.f;if(Ts&&t===_t&&(e&an)!==0&&(e&Ca)===0)return;if((e&(Dn|cn))!==0){if((e&ve)===0)return;t.f^=ve}}Ce.push(t)}function Qu(n){let t=0,e=Nn(0),r;return()=>{Zs()&&(Mt(e),rc(()=>(t===0&&(r=Js(()=>n(()=>Ir(e)))),t+=1,()=>{Ei(()=>{t-=1,t===0&&(r?.(),r=void 0,Ir(e))})})))}}var tf=sr|gr|$s;function ef(n,t,e){new nf(n,t,e)}class nf{parent;is_pending=!1;#e;#o=null;#t;#i;#s;#r=null;#n=null;#a=null;#c=null;#u=null;#f=0;#l=0;#d=!1;#p=new Set;#g=new Set;#h=null;#v=Qu(()=>(this.#h=Nn(this.#f),()=>{this.#h=null}));constructor(t,e,r){this.#e=t,this.#t=e,this.#i=r,this.parent=_t.b,this.is_pending=!!this.#t.pending,this.#s=Ys(()=>{_t.b=this;{var s=this.#w();try{this.#r=Le(()=>r(s))}catch(i){this.error(i)}this.#l>0?this.#y():this.is_pending=!1}return()=>{this.#u?.remove()}},tf)}#_(){try{this.#r=Le(()=>this.#i(this.#e))}catch(t){this.error(t)}}#x(){const t=this.#t.pending;t&&(this.#n=Le(()=>t(this.#e)),je.enqueue(()=>{var e=this.#w();this.#r=this.#m(()=>(je.ensure(),Le(()=>this.#i(e)))),this.#l>0?this.#y():(Cn(this.#n,()=>{this.#n=null}),this.is_pending=!1)}))}#w(){var t=this.#e;return this.is_pending&&(this.#u=ur(),this.#e.before(this.#u),t=this.#u),t}defer_effect(t){za(t,this.#p,this.#g)}is_rendered(){return!this.is_pending&&(!this.parent||this.parent.is_rendered())}has_pending_snippet(){return!!this.#t.pending}#m(t){var e=_t,r=yt,s=ae;We(this.#s),Se(this.#s),or(this.#s.ctx);try{return t()}catch(i){return Pa(i),null}finally{We(e),Se(r),or(s)}}#y(){const t=this.#t.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),uc(this.#r,this.#c)),this.#n===null&&(this.#n=Le(()=>t(this.#e)))}#b(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#b(t);return}if(this.#l+=t,this.#l===0){this.is_pending=!1;for(const e of this.#p)ce(e,_e),on(e);for(const e of this.#g)ce(e,un),on(e);this.#p.clear(),this.#g.clear(),this.#n&&Cn(this.#n,()=>{this.#n=null}),this.#c&&(this.#e.before(this.#c),this.#c=null)}}update_pending_count(t){this.#b(t),this.#f+=t,this.#h&&cr(this.#h,this.#f)}get_effect_pending(){return this.#v(),Mt(this.#h)}error(t){var e=this.#t.onerror;let r=this.#t.failed;if(this.#d||!e&&!r)throw t;this.#r&&(Ae(this.#r),this.#r=null),this.#n&&(Ae(this.#n),this.#n=null),this.#a&&(Ae(this.#a),this.#a=null);var s=!1,i=!1;const o=()=>{if(s){Vu();return}s=!0,i&&Pu(),je.ensure(),this.#f=0,this.#a!==null&&Cn(this.#a,()=>{this.#a=null}),this.is_pending=this.has_pending_snippet(),this.#r=this.#m(()=>(this.#d=!1,Le(()=>this.#i(this.#e)))),this.#l>0?this.#y():this.is_pending=!1};var c=yt;try{Se(null),i=!0,e?.(t,o),i=!1}catch(f){ar(f,this.#s&&this.#s.parent)}finally{Se(c)}r&&Ei(()=>{this.#a=this.#m(()=>{je.ensure(),this.#d=!0;try{return Le(()=>{r(this.#e,()=>t,()=>o)})}catch(f){return ar(f,this.#s.parent),null}finally{this.#d=!1}})})}}function rf(n,t,e,r){const s=Lr()?Ws:Va;if(e.length===0&&n.length===0){r(t.map(s));return}var i=xt,o=_t,c=sf();function f(){Promise.all(e.map(g=>of(g))).then(g=>{c();try{r([...t.map(s),...g])}catch(E){(o.f&xn)===0&&ar(E,o)}i?.deactivate(),si()}).catch(g=>{ar(g,o)})}n.length>0?Promise.all(n).then(()=>{c();try{return f()}finally{i?.deactivate(),si()}}):f()}function sf(){var n=_t,t=yt,e=ae,r=xt;return function(i=!0){We(n),Se(t),or(e),i&&r?.activate()}}function si(){We(null),Se(null),or(null)}function Ws(n){var t=de|_e,e=yt!==null&&(yt.f&de)!==0?yt:null;return _t!==null&&(_t.f|=gr),{ctx:ae,deps:null,effects:null,equals:Ua,f:t,fn:n,reactions:null,rv:0,v:fe,wv:0,parent:e??_t,ac:null}}function of(n,t,e){let r=_t;r===null&&Tu();var s=r.b,i=void 0,o=Nn(fe),c=!yt,f=new Map;return yf(()=>{var g=Ma();i=g.promise;try{Promise.resolve(n()).then(g.resolve,g.reject).then(()=>{E===xt&&E.committed&&E.deactivate(),si()})}catch(v){g.reject(v),si()}var E=xt;if(c){var A=s.is_rendered();s.update_pending_count(1),E.increment(A),f.get(E)?.reject(Qn),f.delete(E),f.set(E,g)}const B=(v,S=void 0)=>{if(E.activate(),S)S!==Qn&&(o.f|=En,cr(o,S));else{(o.f&En)!==0&&(o.f^=En),cr(o,v);for(const[M,L]of f){if(f.delete(M),M===E)break;L.reject(Qn)}}c&&(s.update_pending_count(-1),E.decrement(A))};g.promise.then(B,v=>B(null,v||"unknown"))}),ec(()=>{for(const g of f.values())g.reject(Qn)}),new Promise(g=>{function E(A){function B(){A===i?g(o):E(i)}A.then(B,B)}E(i)})}function Va(n){const t=Ws(n);return t.equals=Fa,t}function ja(n){var t=n.effects;if(t!==null){n.effects=null;for(var e=0;e<t.length;e+=1)Ae(t[e])}}function af(n){for(var t=n.parent;t!==null;){if((t.f&de)===0)return(t.f&xn)===0?t:null;t=t.parent}return null}function Gs(n){var t,e=_t;We(af(n));try{n.f&=~On,ja(n),t=dc(n)}finally{We(e)}return t}function Wa(n){var t=Gs(n);if(!n.equals(t)&&(n.wv=lc(),(!xt?.is_fork||n.deps===null)&&(n.v=t,n.deps===null))){ce(n,ve);return}qn||(Pe!==null?(Zs()||xt?.is_fork)&&Pe.set(n,t):js(n))}let Cs=new Set;const Sn=new Map;let Ga=!1;function Nn(n,t){var e={f:0,v:n,reactions:null,equals:Ua,rv:0,wv:0};return e}function ln(n,t){const e=Nn(n);return vf(e),e}function vr(n,t=!1,e=!0){const r=Nn(n);return t||(r.equals=Fa),xi&&e&&ae!==null&&ae.l!==null&&(ae.l.s??=[]).push(r),r}function be(n,t,e=!1){yt!==null&&(!De||(yt.f&Ao)!==0)&&Lr()&&(yt.f&(de|an|Vs|Ao))!==0&&!sn?.includes(n)&&qu();let r=e?_r(t):t;return cr(n,r)}function cr(n,t){if(!n.equals(t)){var e=n.v;qn?Sn.set(n,t):Sn.set(n,e),n.v=t;var r=je.ensure();if(r.capture(n,e),(n.f&de)!==0){const s=n;(n.f&_e)!==0&&Gs(s),js(s)}n.wv=lc(),Za(n,_e),Lr()&&_t!==null&&(_t.f&ve)!==0&&(_t.f&(cn|Dn))===0&&(Te===null?_f([n]):Te.push(n)),!r.is_fork&&Cs.size>0&&!Ga&&cf()}return t}function cf(){Ga=!1;var n=Ln;ai(!0);const t=Array.from(Cs);try{for(const e of t)(e.f&ve)!==0&&ce(e,un),Fr(e)&&Rr(e)}finally{ai(n)}Cs.clear()}function Ir(n){be(n,n.v+1)}function Za(n,t){var e=n.reactions;if(e!==null)for(var r=Lr(),s=e.length,i=0;i<s;i++){var o=e[i],c=o.f;if(!(!r&&o===_t)){var f=(c&_e)===0;if(f&&ce(o,t),(c&de)!==0){var g=o;Pe?.delete(g),(c&On)===0&&(c&Ne&&(o.f|=On),Za(g,un))}else f&&((c&an)!==0&&Qe!==null&&Qe.add(o),on(o))}}}function _r(n){if(typeof n!="object"||n===null||Ar in n)return n;const t=Ra(n);if(t!==Iu&&t!==Ru)return n;var e=new Map,r=Ia(n),s=ln(0),i=Un,o=c=>{if(Un===i)return c();var f=yt,g=Un;Se(null),Lo(i);var E=c();return Se(f),Lo(g),E};return r&&e.set("length",ln(n.length)),new Proxy(n,{defineProperty(c,f,g){(!("value"in g)||g.configurable===!1||g.enumerable===!1||g.writable===!1)&&Ou();var E=e.get(f);return E===void 0?E=o(()=>{var A=ln(g.value);return e.set(f,A),A}):be(E,g.value,!0),!0},deleteProperty(c,f){var g=e.get(f);if(g===void 0){if(f in c){const E=o(()=>ln(fe));e.set(f,E),Ir(s)}}else be(g,fe),Ir(s);return!0},get(c,f,g){if(f===Ar)return n;var E=e.get(f),A=f in c;if(E===void 0&&(!A||Br(c,f)?.writable)&&(E=o(()=>{var v=_r(A?c[f]:fe),S=ln(v);return S}),e.set(f,E)),E!==void 0){var B=Mt(E);return B===fe?void 0:B}return Reflect.get(c,f,g)},getOwnPropertyDescriptor(c,f){var g=Reflect.getOwnPropertyDescriptor(c,f);if(g&&"value"in g){var E=e.get(f);E&&(g.value=Mt(E))}else if(g===void 0){var A=e.get(f),B=A?.v;if(A!==void 0&&B!==fe)return{enumerable:!0,configurable:!0,value:B,writable:!0}}return g},has(c,f){if(f===Ar)return!0;var g=e.get(f),E=g!==void 0&&g.v!==fe||Reflect.has(c,f);if(g!==void 0||_t!==null&&(!E||Br(c,f)?.writable)){g===void 0&&(g=o(()=>{var B=E?_r(c[f]):fe,v=ln(B);return v}),e.set(f,g));var A=Mt(g);if(A===fe)return!1}return E},set(c,f,g,E){var A=e.get(f),B=f in c;if(r&&f==="length")for(var v=g;v<A.v;v+=1){var S=e.get(v+"");S!==void 0?be(S,fe):v in c&&(S=o(()=>ln(fe)),e.set(v+"",S))}if(A===void 0)(!B||Br(c,f)?.writable)&&(A=o(()=>ln(void 0)),be(A,_r(g)),e.set(f,A));else{B=A.v!==fe;var M=o(()=>_r(g));be(A,M)}var L=Reflect.getOwnPropertyDescriptor(c,f);if(L?.set&&L.set.call(E,g),!B){if(r&&typeof f=="string"){var F=e.get("length"),H=Number(f);Number.isInteger(H)&&H>=F.v&&be(F,H+1)}Ir(s)}return!0},ownKeys(c){Mt(s);var f=Reflect.ownKeys(c).filter(A=>{var B=e.get(A);return B===void 0||B.v!==fe});for(var[g,E]of e)E.v!==fe&&!(g in c)&&f.push(g);return f},setPrototypeOf(){Nu()}})}var Io,Ya,Xa,Ja;function uf(){if(Io===void 0){Io=window,Ya=/Firefox/.test(navigator.userAgent);var n=Element.prototype,t=Node.prototype,e=Text.prototype;Xa=Br(t,"firstChild").get,Ja=Br(t,"nextSibling").get,Bo(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Bo(e)&&(e.__t=void 0)}}function ur(n=""){return document.createTextNode(n)}function oi(n){return Xa.call(n)}function Ur(n){return Ja.call(n)}function Ye(n,t){return oi(n)}function ff(n,t=!1){{var e=oi(n);return e instanceof Comment&&e.data===""?Ur(e):e}}function $e(n,t=1,e=!1){let r=n;for(;t--;)r=Ur(r);return r}function lf(n){n.textContent=""}function Qa(){return!1}let Ro=!1;function hf(){Ro||(Ro=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const t of n.target.elements)t.__on_r?.()})},{capture:!0}))}function Bi(n){var t=yt,e=_t;Se(null),We(null);try{return n()}finally{Se(t),We(e)}}function df(n,t,e,r=e){n.addEventListener(t,()=>Bi(e));const s=n.__on_r;s?n.__on_r=()=>{s(),r(!0)}:n.__on_r=()=>r(!0),hf()}function tc(n){_t===null&&(yt===null&&Uu(),Lu()),qn&&Cu()}function pf(n,t){var e=t.last;e===null?t.last=t.first=n:(e.next=n,n.prev=e,t.last=n)}function fn(n,t,e){var r=_t;r!==null&&(r.f&Re)!==0&&(n|=Re);var s={ctx:ae,deps:null,nodes:null,f:n|_e|Ne,first:null,fn:t,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(e)try{Rr(s),s.f|=Hs}catch(c){throw Ae(s),c}else t!==null&&on(s);var i=s;if(e&&i.deps===null&&i.teardown===null&&i.nodes===null&&i.first===i.last&&(i.f&gr)===0&&(i=i.first,(n&an)!==0&&(n&sr)!==0&&i!==null&&(i.f|=sr)),i!==null&&(i.parent=r,r!==null&&pf(i,r),yt!==null&&(yt.f&de)!==0&&(n&Dn)===0)){var o=yt;(o.effects??=[]).push(i)}return s}function Zs(){return yt!==null&&!De}function ec(n){const t=fn(Cr,null,!1);return ce(t,ve),t.teardown=n,t}function Mo(n){tc();var t=_t.f,e=!yt&&(t&cn)!==0&&(t&Hs)===0;if(e){var r=ae;(r.e??=[]).push(n)}else return nc(n)}function nc(n){return fn(Rs|La,n,!1)}function gf(n){return tc(),fn(Cr|La,n,!0)}function mf(n){je.ensure();const t=fn(Dn|gr,n,!0);return(e={})=>new Promise(r=>{e.outro?Cn(t,()=>{Ae(t),r(void 0)}):(Ae(t),r(void 0))})}function yf(n){return fn(Vs|gr,n,!0)}function rc(n,t=0){return fn(Cr|t,n,!0)}function To(n,t=[],e=[],r=[]){rf(r,t,e,s=>{fn(Cr,()=>n(...s.map(Mt)),!0)})}function Ys(n,t=0){var e=fn(an|t,n,!0);return e}function Le(n){return fn(cn|gr,n,!0)}function ic(n){var t=n.teardown;if(t!==null){const e=qn,r=yt;Co(!0),Se(null);try{t.call(null)}finally{Co(e),Se(r)}}}function sc(n,t=!1){var e=n.first;for(n.first=n.last=null;e!==null;){const s=e.ac;s!==null&&Bi(()=>{s.abort(Qn)});var r=e.next;(e.f&Dn)!==0?e.parent=null:Ae(e,t),e=r}}function wf(n){for(var t=n.first;t!==null;){var e=t.next;(t.f&cn)===0&&Ae(t),t=e}}function Ae(n,t=!0){var e=!1;(t||(n.f&Ca)!==0)&&n.nodes!==null&&n.nodes.end!==null&&(bf(n.nodes.start,n.nodes.end),e=!0),sc(n,t&&!e),ci(n,0),ce(n,xn);var r=n.nodes&&n.nodes.t;if(r!==null)for(const i of r)i.stop();ic(n);var s=n.parent;s!==null&&s.first!==null&&oc(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes=n.ac=null}function bf(n,t){for(;n!==null;){var e=n===t?null:Ur(n);n.remove(),n=e}}function oc(n){var t=n.parent,e=n.prev,r=n.next;e!==null&&(e.next=r),r!==null&&(r.prev=e),t!==null&&(t.first===n&&(t.first=r),t.last===n&&(t.last=e))}function Cn(n,t,e=!0){var r=[];ac(n,r,!0);var s=()=>{e&&Ae(n),t&&t()},i=r.length;if(i>0){var o=()=>--i||s();for(var c of r)c.out(o)}else s()}function ac(n,t,e){if((n.f&Re)===0){n.f^=Re;var r=n.nodes&&n.nodes.t;if(r!==null)for(const c of r)(c.is_global||e)&&t.push(c);for(var s=n.first;s!==null;){var i=s.next,o=(s.f&sr)!==0||(s.f&cn)!==0&&(n.f&an)!==0;ac(s,t,o?e:!1),s=i}}}function Xs(n){cc(n,!0)}function cc(n,t){if((n.f&Re)!==0){n.f^=Re,(n.f&ve)===0&&(ce(n,_e),on(n));for(var e=n.first;e!==null;){var r=e.next,s=(e.f&sr)!==0||(e.f&cn)!==0;cc(e,s?t:!1),e=r}var i=n.nodes&&n.nodes.t;if(i!==null)for(const o of i)(o.is_global||t)&&o.in()}}function uc(n,t){if(n.nodes)for(var e=n.nodes.start,r=n.nodes.end;e!==null;){var s=e===r?null:Ur(e);t.append(e),e=s}}let Ln=!1;function ai(n){Ln=n}let qn=!1;function Co(n){qn=n}let yt=null,De=!1;function Se(n){yt=n}let _t=null;function We(n){_t=n}let sn=null;function vf(n){yt!==null&&(sn===null?sn=[n]:sn.push(n))}let Ee=null,Ie=0,Te=null;function _f(n){Te=n}let fc=1,In=0,Un=In;function Lo(n){Un=n}function lc(){return++fc}function Fr(n){var t=n.f;if((t&_e)!==0)return!0;if(t&de&&(n.f&=~On),(t&un)!==0){for(var e=n.deps,r=e.length,s=0;s<r;s++){var i=e[s];if(Fr(i)&&Wa(i),i.wv>n.wv)return!0}(t&Ne)!==0&&Pe===null&&ce(n,ve)}return!1}function hc(n,t,e=!0){var r=n.reactions;if(r!==null&&!sn?.includes(n))for(var s=0;s<r.length;s++){var i=r[s];(i.f&de)!==0?hc(i,t,!1):t===i&&(e?ce(i,_e):(i.f&ve)!==0&&ce(i,un),on(i))}}function dc(n){var t=Ee,e=Ie,r=Te,s=yt,i=sn,o=ae,c=De,f=Un,g=n.f;Ee=null,Ie=0,Te=null,yt=(g&(cn|Dn))===0?n:null,sn=null,or(n.ctx),De=!1,Un=++In,n.ac!==null&&(Bi(()=>{n.ac.abort(Qn)}),n.ac=null);try{n.f|=Ms;var E=n.fn,A=E(),B=n.deps;if(Ee!==null){var v;if(ci(n,Ie),B!==null&&Ie>0)for(B.length=Ie+Ee.length,v=0;v<Ee.length;v++)B[Ie+v]=Ee[v];else n.deps=B=Ee;if(Zs()&&(n.f&Ne)!==0)for(v=Ie;v<B.length;v++)(B[v].reactions??=[]).push(n)}else B!==null&&Ie<B.length&&(ci(n,Ie),B.length=Ie);if(Lr()&&Te!==null&&!De&&B!==null&&(n.f&(de|un|_e))===0)for(v=0;v<Te.length;v++)hc(Te[v],n);if(s!==null&&s!==n){if(In++,s.deps!==null)for(let S=0;S<e;S+=1)s.deps[S].rv=In;if(t!==null)for(const S of t)S.rv=In;Te!==null&&(r===null?r=Te:r.push(...Te))}return(n.f&En)!==0&&(n.f^=En),A}catch(S){return Pa(S)}finally{n.f^=Ms,Ee=t,Ie=e,Te=r,yt=s,sn=i,or(o),De=c,Un=f}}function xf(n,t){let e=t.reactions;if(e!==null){var r=Bu.call(e,n);if(r!==-1){var s=e.length-1;s===0?e=t.reactions=null:(e[r]=e[s],e.pop())}}if(e===null&&(t.f&de)!==0&&(Ee===null||!Ee.includes(t))){var i=t;(i.f&Ne)!==0&&(i.f^=Ne,i.f&=~On),js(i),ja(i),ci(i,0)}}function ci(n,t){var e=n.deps;if(e!==null)for(var r=t;r<e.length;r++)xf(n,e[r])}function Rr(n){var t=n.f;if((t&xn)===0){ce(n,ve);var e=_t,r=Ln;_t=n,Ln=!0;try{(t&(an|Ta))!==0?wf(n):sc(n),ic(n);var s=dc(n);n.teardown=typeof s=="function"?s:null,n.wv=fc;var i;ks&&Wu&&(n.f&_e)!==0&&n.deps}finally{Ln=r,_t=e}}}async function Ef(){await Promise.resolve(),Xu()}function Mt(n){var t=n.f,e=(t&de)!==0;if(yt!==null&&!De){var r=_t!==null&&(_t.f&xn)!==0;if(!r&&!sn?.includes(n)){var s=yt.deps;if((yt.f&Ms)!==0)n.rv<In&&(n.rv=In,Ee===null&&s!==null&&s[Ie]===n?Ie++:Ee===null?Ee=[n]:Ee.push(n));else{(yt.deps??=[]).push(n);var i=n.reactions;i===null?n.reactions=[yt]:i.includes(yt)||i.push(yt)}}}if(qn&&Sn.has(n))return Sn.get(n);if(e){var o=n;if(qn){var c=o.v;return((o.f&ve)===0&&o.reactions!==null||gc(o))&&(c=Gs(o)),Sn.set(o,c),c}var f=(o.f&Ne)===0&&!De&&yt!==null&&(Ln||(yt.f&Ne)!==0),g=o.deps===null;Fr(o)&&(f&&(o.f|=Ne),Wa(o)),f&&!g&&pc(o)}if(Pe?.has(n))return Pe.get(n);if((n.f&En)!==0)throw n.v;return n.v}function pc(n){if(n.deps!==null){n.f|=Ne;for(const t of n.deps)(t.reactions??=[]).push(n),(t.f&de)!==0&&(t.f&Ne)===0&&pc(t)}}function gc(n){if(n.v===fe)return!0;if(n.deps===null)return!1;for(const t of n.deps)if(Sn.has(t)||(t.f&de)!==0&&gc(t))return!0;return!1}function Js(n){var t=De;try{return De=!0,n()}finally{De=t}}function Sf(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(Ar in n)Ls(n);else if(!Array.isArray(n))for(let t in n){const e=n[t];typeof e=="object"&&e&&Ar in e&&Ls(e)}}}function Ls(n,t=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!t.has(n)){t.add(n),n instanceof Date&&n.getTime();for(let r in n)try{Ls(n[r],t)}catch{}const e=Ra(n);if(e!==Object.prototype&&e!==Array.prototype&&e!==Map.prototype&&e!==Set.prototype&&e!==Date.prototype){const r=ku(e);for(let s in r){const i=r[s].get;if(i)try{i.call(n)}catch{}}}}}const Bf=["touchstart","touchmove"];function Af(n){return Bf.includes(n)}const kf=new Set,Uo=new Set;function If(n,t,e,r={}){function s(i){if(r.capture||xr.call(t,i),!i.cancelBubble)return Bi(()=>e?.call(this,i))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?Ei(()=>{t.addEventListener(n,s,r)}):t.addEventListener(n,s,r),s}function Rf(n,t,e,r,s){var i={capture:r,passive:s},o=If(n,t,e,i);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&ec(()=>{t.removeEventListener(n,o,i)})}let Fo=null;function xr(n){var t=this,e=t.ownerDocument,r=n.type,s=n.composedPath?.()||[],i=s[0]||n.target;Fo=n;var o=0,c=Fo===n&&n.__root;if(c){var f=s.indexOf(c);if(f!==-1&&(t===document||t===window)){n.__root=t;return}var g=s.indexOf(t);if(g===-1)return;f<=g&&(o=f)}if(i=s[o]||n.target,i!==t){Au(n,"currentTarget",{configurable:!0,get(){return i||e}});var E=yt,A=_t;Se(null),We(null);try{for(var B,v=[];i!==null;){var S=i.assignedSlot||i.parentNode||i.host||null;try{var M=i["__"+r];M!=null&&(!i.disabled||n.target===i)&&M.call(i,n)}catch(L){B?v.push(L):B=L}if(n.cancelBubble||S===t||S===null)break;i=S}if(B){for(let L of v)queueMicrotask(()=>{throw L});throw B}}finally{n.__root=t,delete n.currentTarget,Se(E),We(A)}}}function Mf(n){var t=document.createElement("template");return t.innerHTML=n.replaceAll("<!>","<!---->"),t.content}function Oo(n,t){var e=_t;e.nodes===null&&(e.nodes={start:n,end:t,a:null,t:null})}function Ai(n,t){var e=(t&$u)!==0,r=(t&Hu)!==0,s,i=!n.startsWith("<!>");return()=>{s===void 0&&(s=Mf(i?n:"<!>"+n),e||(s=oi(s)));var o=r||Ya?document.importNode(s,!0):s.cloneNode(!0);if(e){var c=oi(o),f=o.lastChild;Oo(c,f)}else Oo(o,o);return o}}function jr(n,t){n!==null&&n.before(t)}function jn(n,t){var e=t==null?"":typeof t=="object"?t+"":t;e!==(n.__t??=n.nodeValue)&&(n.__t=e,n.nodeValue=e+"")}function Tf(n,t){return Cf(n,t)}const Wn=new Map;function Cf(n,{target:t,anchor:e,props:r={},events:s,context:i,intro:o=!0}){uf();var c=new Set,f=A=>{for(var B=0;B<A.length;B++){var v=A[B];if(!c.has(v)){c.add(v);var S=Af(v);t.addEventListener(v,xr,{passive:S});var M=Wn.get(v);M===void 0?(document.addEventListener(v,xr,{passive:S}),Wn.set(v,1)):Wn.set(v,M+1)}}};f(_i(kf)),Uo.add(f);var g=void 0,E=mf(()=>{var A=e??t.appendChild(ur());return ef(A,{pending:()=>{}},B=>{if(i){Oa({});var v=ae;v.c=i}s&&(r.$$events=s),g=n(B,r)||{},i&&Na()}),()=>{for(var B of c){t.removeEventListener(B,xr);var v=Wn.get(B);--v===0?(document.removeEventListener(B,xr),Wn.delete(B)):Wn.set(B,v)}Uo.delete(f),A!==e&&A.parentNode?.removeChild(A)}});return Lf.set(g,E),g}let Lf=new WeakMap;class Uf{anchor;#e=new Map;#o=new Map;#t=new Map;#i=new Set;#s=!0;constructor(t,e=!0){this.anchor=t,this.#s=e}#r=()=>{var t=xt;if(this.#e.has(t)){var e=this.#e.get(t),r=this.#o.get(e);if(r)Xs(r),this.#i.delete(e);else{var s=this.#t.get(e);s&&(this.#o.set(e,s.effect),this.#t.delete(e),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[i,o]of this.#e){if(this.#e.delete(i),i===t)break;const c=this.#t.get(o);c&&(Ae(c.effect),this.#t.delete(o))}for(const[i,o]of this.#o){if(i===e||this.#i.has(i))continue;const c=()=>{if(Array.from(this.#e.values()).includes(i)){var g=document.createDocumentFragment();uc(o,g),g.append(ur()),this.#t.set(i,{effect:o,fragment:g})}else Ae(o);this.#i.delete(i),this.#o.delete(i)};this.#s||!r?(this.#i.add(i),Cn(o,c,!1)):c()}}};#n=t=>{this.#e.delete(t);const e=Array.from(this.#e.values());for(const[r,s]of this.#t)e.includes(r)||(Ae(s.effect),this.#t.delete(r))};ensure(t,e){var r=xt,s=Qa();if(e&&!this.#o.has(t)&&!this.#t.has(t))if(s){var i=document.createDocumentFragment(),o=ur();i.append(o),this.#t.set(t,{effect:Le(()=>e(o)),fragment:i})}else this.#o.set(t,Le(()=>e(this.anchor)));if(this.#e.set(r,t),s){for(const[c,f]of this.#o)c===t?r.skipped_effects.delete(f):r.skipped_effects.add(f);for(const[c,f]of this.#t)c===t?r.skipped_effects.delete(f.effect):r.skipped_effects.add(f.effect);r.oncommit(this.#r),r.ondiscard(this.#n)}else this.#r()}}function No(n,t,e=!1){var r=new Uf(n),s=e?sr:0;function i(o,c){r.ensure(o,c)}Ys(()=>{var o=!1;t((c,f=!0)=>{o=!0,i(f,c)}),o||i(!1,null)},s)}function Ff(n,t,e){for(var r=[],s=t.length,i,o=t.length,c=0;c<s;c++){let A=t[c];Cn(A,()=>{if(i){if(i.pending.delete(A),i.done.add(A),i.pending.size===0){var B=n.outrogroups;Us(_i(i.done)),B.delete(i),B.size===0&&(n.outrogroups=null)}}else o-=1},!1)}if(o===0){var f=r.length===0&&e!==null;if(f){var g=e,E=g.parentNode;lf(E),E.append(g),n.items.clear()}Us(t,!f)}else i={pending:new Set(t),done:new Set},(n.outrogroups??=new Set).add(i)}function Us(n,t=!0){for(var e=0;e<n.length;e++)Ae(n[e],t)}var qo;function Of(n,t,e,r,s,i=null){var o=n,c=new Map,f=null,g=Va(()=>{var M=e();return Ia(M)?M:M==null?[]:_i(M)}),E,A=!0;function B(){S.fallback=f,Nf(S,E,o,t,r),f!==null&&(E.length===0?(f.f&vn)===0?Xs(f):(f.f^=vn,Er(f,null,o)):Cn(f,()=>{f=null}))}var v=Ys(()=>{E=Mt(g);for(var M=E.length,L=new Set,F=xt,H=Qa(),D=0;D<M;D+=1){var X=E[D],Z=r(X,D),Q=A?null:c.get(Z);Q?(Q.v&&cr(Q.v,X),Q.i&&cr(Q.i,D),H&&F.skipped_effects.delete(Q.e)):(Q=qf(c,A?o:qo??=ur(),X,Z,D,s,t,e),A||(Q.e.f|=vn),c.set(Z,Q)),L.add(Z)}if(M===0&&i&&!f&&(A?f=Le(()=>i(o)):(f=Le(()=>i(qo??=ur())),f.f|=vn)),!A)if(H){for(const[at,it]of c)L.has(at)||F.skipped_effects.add(it.e);F.oncommit(B),F.ondiscard(()=>{})}else B();Mt(g)}),S={effect:v,items:c,outrogroups:null,fallback:f};A=!1}function Nf(n,t,e,r,s){var i=t.length,o=n.items,c=n.effect.first,f,g=null,E=[],A=[],B,v,S,M;for(M=0;M<i;M+=1){if(B=t[M],v=s(B,M),S=o.get(v).e,n.outrogroups!==null)for(const it of n.outrogroups)it.pending.delete(S),it.done.delete(S);if((S.f&vn)!==0)if(S.f^=vn,S===c)Er(S,null,e);else{var L=g?g.next:c;S===n.effect.last&&(n.effect.last=S.prev),S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),hn(n,g,S),hn(n,S,L),Er(S,L,e),g=S,E=[],A=[],c=g.next;continue}if((S.f&Re)!==0&&Xs(S),S!==c){if(f!==void 0&&f.has(S)){if(E.length<A.length){var F=A[0],H;g=F.prev;var D=E[0],X=E[E.length-1];for(H=0;H<E.length;H+=1)Er(E[H],F,e);for(H=0;H<A.length;H+=1)f.delete(A[H]);hn(n,D.prev,X.next),hn(n,g,D),hn(n,X,F),c=F,g=X,M-=1,E=[],A=[]}else f.delete(S),Er(S,c,e),hn(n,S.prev,S.next),hn(n,S,g===null?n.effect.first:g.next),hn(n,g,S),g=S;continue}for(E=[],A=[];c!==null&&c!==S;)(f??=new Set).add(c),A.push(c),c=c.next;if(c===null)continue}(S.f&vn)===0&&E.push(S),g=S,c=S.next}if(n.outrogroups!==null){for(const it of n.outrogroups)it.pending.size===0&&(Us(_i(it.done)),n.outrogroups?.delete(it));n.outrogroups.size===0&&(n.outrogroups=null)}if(c!==null||f!==void 0){var Z=[];if(f!==void 0)for(S of f)(S.f&Re)===0&&Z.push(S);for(;c!==null;)(c.f&Re)===0&&c!==n.fallback&&Z.push(c),c=c.next;var Q=Z.length;if(Q>0){var at=null;Ff(n,Z,at)}}}function qf(n,t,e,r,s,i,o,c){var f=(o&Du)!==0?(o&Ku)===0?vr(e,!1,!1):Nn(e):null,g=(o&zu)!==0?Nn(s):null;return{v:f,i:g,e:Le(()=>(i(t,f??e,g??s,c),()=>{n.delete(r)}))}}function Er(n,t,e){if(n.nodes)for(var r=n.nodes.start,s=n.nodes.end,i=t&&(t.f&vn)===0?t.nodes.start:e;r!==null;){var o=Ur(r);if(i.before(r),r===s)return;r=o}}function hn(n,t,e){t===null?n.effect.first=e:t.next=e,e===null?n.effect.last=t:e.prev=t}function Pf(n,t,e=t){var r=new WeakSet;df(n,"input",async s=>{var i=s?n.defaultValue:n.value;if(i=es(n)?ns(i):i,e(i),xt!==null&&r.add(xt),await Ef(),i!==(i=t())){var o=n.selectionStart,c=n.selectionEnd,f=n.value.length;if(n.value=i??"",c!==null){var g=n.value.length;o===c&&c===f&&g>f?(n.selectionStart=g,n.selectionEnd=g):(n.selectionStart=o,n.selectionEnd=Math.min(c,g))}}}),Js(t)==null&&n.value&&(e(es(n)?ns(n.value):n.value),xt!==null&&r.add(xt)),rc(()=>{var s=t();if(n===document.activeElement){var i=ni??xt;if(r.has(i))return}es(n)&&s===ns(n.value)||n.type==="date"&&!s&&!n.value||s!==n.value&&(n.value=s??"")})}function es(n){var t=n.type;return t==="number"||t==="range"}function ns(n){return n===""?null:+n}function Df(n=!1){const t=ae,e=t.l.u;if(!e)return;let r=()=>Sf(t.s);if(n){let s=0,i={};const o=Ws(()=>{let c=!1;const f=t.s;for(const g in f)f[g]!==i[g]&&(i[g]=f[g],c=!0);return c&&s++,s});r=()=>Mt(o)}e.b.length&&gf(()=>{Po(t,r),Is(e.b)}),Mo(()=>{const s=Js(()=>e.m.map(Mu));return()=>{for(const i of s)typeof i=="function"&&i()}}),e.a.length&&Mo(()=>{Po(t,r),Is(e.a)})}function Po(n,t){if(n.l.s)for(const e of n.l.s)Mt(e);t()}const zf="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(zf);Gu();function ki(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Qs(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var e=function r(){var s=!1;try{s=this instanceof r}catch{}return s?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),e}var rs={},wr={},Do;function Kf(){if(Do)return wr;Do=1,wr.byteLength=c,wr.toByteArray=g,wr.fromByteArray=B;for(var n=[],t=[],e=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=r.length;s<i;++s)n[s]=r[s],t[r.charCodeAt(s)]=s;t[45]=62,t[95]=63;function o(v){var S=v.length;if(S%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=v.indexOf("=");M===-1&&(M=S);var L=M===S?0:4-M%4;return[M,L]}function c(v){var S=o(v),M=S[0],L=S[1];return(M+L)*3/4-L}function f(v,S,M){return(S+M)*3/4-M}function g(v){var S,M=o(v),L=M[0],F=M[1],H=new e(f(v,L,F)),D=0,X=F>0?L-4:L,Z;for(Z=0;Z<X;Z+=4)S=t[v.charCodeAt(Z)]<<18|t[v.charCodeAt(Z+1)]<<12|t[v.charCodeAt(Z+2)]<<6|t[v.charCodeAt(Z+3)],H[D++]=S>>16&255,H[D++]=S>>8&255,H[D++]=S&255;return F===2&&(S=t[v.charCodeAt(Z)]<<2|t[v.charCodeAt(Z+1)]>>4,H[D++]=S&255),F===1&&(S=t[v.charCodeAt(Z)]<<10|t[v.charCodeAt(Z+1)]<<4|t[v.charCodeAt(Z+2)]>>2,H[D++]=S>>8&255,H[D++]=S&255),H}function E(v){return n[v>>18&63]+n[v>>12&63]+n[v>>6&63]+n[v&63]}function A(v,S,M){for(var L,F=[],H=S;H<M;H+=3)L=(v[H]<<16&16711680)+(v[H+1]<<8&65280)+(v[H+2]&255),F.push(E(L));return F.join("")}function B(v){for(var S,M=v.length,L=M%3,F=[],H=16383,D=0,X=M-L;D<X;D+=H)F.push(A(v,D,D+H>X?X:D+H));return L===1?(S=v[M-1],F.push(n[S>>2]+n[S<<4&63]+"==")):L===2&&(S=(v[M-2]<<8)+v[M-1],F.push(n[S>>10]+n[S>>4&63]+n[S<<2&63]+"=")),F.join("")}return wr}var Wr={};var zo;function $f(){return zo||(zo=1,Wr.read=function(n,t,e,r,s){var i,o,c=s*8-r-1,f=(1<<c)-1,g=f>>1,E=-7,A=e?s-1:0,B=e?-1:1,v=n[t+A];for(A+=B,i=v&(1<<-E)-1,v>>=-E,E+=c;E>0;i=i*256+n[t+A],A+=B,E-=8);for(o=i&(1<<-E)-1,i>>=-E,E+=r;E>0;o=o*256+n[t+A],A+=B,E-=8);if(i===0)i=1-g;else{if(i===f)return o?NaN:(v?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-g}return(v?-1:1)*o*Math.pow(2,i-r)},Wr.write=function(n,t,e,r,s,i){var o,c,f,g=i*8-s-1,E=(1<<g)-1,A=E>>1,B=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,v=r?0:i-1,S=r?1:-1,M=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=E):(o=Math.floor(Math.log(t)/Math.LN2),t*(f=Math.pow(2,-o))<1&&(o--,f*=2),o+A>=1?t+=B/f:t+=B*Math.pow(2,1-A),t*f>=2&&(o++,f/=2),o+A>=E?(c=0,o=E):o+A>=1?(c=(t*f-1)*Math.pow(2,s),o=o+A):(c=t*Math.pow(2,A-1)*Math.pow(2,s),o=0));s>=8;n[e+v]=c&255,v+=S,c/=256,s-=8);for(o=o<<s|c,g+=s;g>0;n[e+v]=o&255,v+=S,o/=256,g-=8);n[e+v-S]|=M*128}),Wr}var Ko;function to(){return Ko||(Ko=1,(function(n){const t=Kf(),e=$f(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=H,n.INSPECT_MAX_BYTES=50;const s=2147483647;n.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const w=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(w,h),w.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function o(w){if(w>s)throw new RangeError('The value "'+w+'" is invalid for option "size"');const h=new Uint8Array(w);return Object.setPrototypeOf(h,c.prototype),h}function c(w,h,p){if(typeof w=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(w)}return f(w,h,p)}c.poolSize=8192;function f(w,h,p){if(typeof w=="string")return B(w,h);if(ArrayBuffer.isView(w))return S(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(ke(w,ArrayBuffer)||w&&ke(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ke(w,SharedArrayBuffer)||w&&ke(w.buffer,SharedArrayBuffer)))return M(w,h,p);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=w.valueOf&&w.valueOf();if(k!=null&&k!==w)return c.from(k,h,p);const q=L(w);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return c.from(w[Symbol.toPrimitive]("string"),h,p);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}c.from=function(w,h,p){return f(w,h,p)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function g(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function E(w,h,p){return g(w),w<=0?o(w):h!==void 0?typeof p=="string"?o(w).fill(h,p):o(w).fill(h):o(w)}c.alloc=function(w,h,p){return E(w,h,p)};function A(w){return g(w),o(w<0?0:F(w)|0)}c.allocUnsafe=function(w){return A(w)},c.allocUnsafeSlow=function(w){return A(w)};function B(w,h){if((typeof h!="string"||h==="")&&(h="utf8"),!c.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const p=D(w,h)|0;let k=o(p);const q=k.write(w,h);return q!==p&&(k=k.slice(0,q)),k}function v(w){const h=w.length<0?0:F(w.length)|0,p=o(h);for(let k=0;k<h;k+=1)p[k]=w[k]&255;return p}function S(w){if(ke(w,Uint8Array)){const h=new Uint8Array(w);return M(h.buffer,h.byteOffset,h.byteLength)}return v(w)}function M(w,h,p){if(h<0||w.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<h+(p||0))throw new RangeError('"length" is outside of buffer bounds');let k;return h===void 0&&p===void 0?k=new Uint8Array(w):p===void 0?k=new Uint8Array(w,h):k=new Uint8Array(w,h,p),Object.setPrototypeOf(k,c.prototype),k}function L(w){if(c.isBuffer(w)){const h=F(w.length)|0,p=o(h);return p.length===0||w.copy(p,0,0,h),p}if(w.length!==void 0)return typeof w.length!="number"||Rt(w.length)?o(0):v(w);if(w.type==="Buffer"&&Array.isArray(w.data))return v(w.data)}function F(w){if(w>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return w|0}function H(w){return+w!=w&&(w=0),c.alloc(+w)}c.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==c.prototype},c.compare=function(h,p){if(ke(h,Uint8Array)&&(h=c.from(h,h.offset,h.byteLength)),ke(p,Uint8Array)&&(p=c.from(p,p.offset,p.byteLength)),!c.isBuffer(h)||!c.isBuffer(p))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===p)return 0;let k=h.length,q=p.length;for(let z=0,W=Math.min(k,q);z<W;++z)if(h[z]!==p[z]){k=h[z],q=p[z];break}return k<q?-1:q<k?1:0},c.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(h,p){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return c.alloc(0);let k;if(p===void 0)for(p=0,k=0;k<h.length;++k)p+=h[k].length;const q=c.allocUnsafe(p);let z=0;for(k=0;k<h.length;++k){let W=h[k];if(ke(W,Uint8Array))z+W.length>q.length?(c.isBuffer(W)||(W=c.from(W)),W.copy(q,z)):Uint8Array.prototype.set.call(q,W,z);else if(c.isBuffer(W))W.copy(q,z);else throw new TypeError('"list" argument must be an Array of Buffers');z+=W.length}return q};function D(w,h){if(c.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||ke(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const p=w.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&p===0)return 0;let q=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return p;case"utf8":case"utf-8":return It(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return p*2;case"hex":return p>>>1;case"base64":return Tt(w).length;default:if(q)return k?-1:It(w).length;h=(""+h).toLowerCase(),q=!0}}c.byteLength=D;function X(w,h,p){let k=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((p===void 0||p>this.length)&&(p=this.length),p<=0)||(p>>>=0,h>>>=0,p<=h))return"";for(w||(w="utf8");;)switch(w){case"hex":return T(this,h,p);case"utf8":case"utf-8":return a(this,h,p);case"ascii":return x(this,h,p);case"latin1":case"binary":return I(this,h,p);case"base64":return y(this,h,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,h,p);default:if(k)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),k=!0}}c.prototype._isBuffer=!0;function Z(w,h,p){const k=w[h];w[h]=w[p],w[p]=k}c.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let p=0;p<h;p+=2)Z(this,p,p+1);return this},c.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let p=0;p<h;p+=4)Z(this,p,p+3),Z(this,p+1,p+2);return this},c.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let p=0;p<h;p+=8)Z(this,p,p+7),Z(this,p+1,p+6),Z(this,p+2,p+5),Z(this,p+3,p+4);return this},c.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?a(this,0,h):X.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(h){if(!c.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:c.compare(this,h)===0},c.prototype.inspect=function(){let h="";const p=n.INSPECT_MAX_BYTES;return h=this.toString("hex",0,p).replace(/(.{2})/g,"$1 ").trim(),this.length>p&&(h+=" ... "),"<Buffer "+h+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(h,p,k,q,z){if(ke(h,Uint8Array)&&(h=c.from(h,h.offset,h.byteLength)),!c.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(p===void 0&&(p=0),k===void 0&&(k=h?h.length:0),q===void 0&&(q=0),z===void 0&&(z=this.length),p<0||k>h.length||q<0||z>this.length)throw new RangeError("out of range index");if(q>=z&&p>=k)return 0;if(q>=z)return-1;if(p>=k)return 1;if(p>>>=0,k>>>=0,q>>>=0,z>>>=0,this===h)return 0;let W=z-q,dt=k-p;const ht=Math.min(W,dt),lt=this.slice(q,z),kt=h.slice(p,k);for(let ft=0;ft<ht;++ft)if(lt[ft]!==kt[ft]){W=lt[ft],dt=kt[ft];break}return W<dt?-1:dt<W?1:0};function Q(w,h,p,k,q){if(w.length===0)return-1;if(typeof p=="string"?(k=p,p=0):p>2147483647?p=2147483647:p<-2147483648&&(p=-2147483648),p=+p,Rt(p)&&(p=q?0:w.length-1),p<0&&(p=w.length+p),p>=w.length){if(q)return-1;p=w.length-1}else if(p<0)if(q)p=0;else return-1;if(typeof h=="string"&&(h=c.from(h,k)),c.isBuffer(h))return h.length===0?-1:at(w,h,p,k,q);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(w,h,p):Uint8Array.prototype.lastIndexOf.call(w,h,p):at(w,[h],p,k,q);throw new TypeError("val must be string, number or Buffer")}function at(w,h,p,k,q){let z=1,W=w.length,dt=h.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(w.length<2||h.length<2)return-1;z=2,W/=2,dt/=2,p/=2}function ht(kt,ft){return z===1?kt[ft]:kt.readUInt16BE(ft*z)}let lt;if(q){let kt=-1;for(lt=p;lt<W;lt++)if(ht(w,lt)===ht(h,kt===-1?0:lt-kt)){if(kt===-1&&(kt=lt),lt-kt+1===dt)return kt*z}else kt!==-1&&(lt-=lt-kt),kt=-1}else for(p+dt>W&&(p=W-dt),lt=p;lt>=0;lt--){let kt=!0;for(let ft=0;ft<dt;ft++)if(ht(w,lt+ft)!==ht(h,ft)){kt=!1;break}if(kt)return lt}return-1}c.prototype.includes=function(h,p,k){return this.indexOf(h,p,k)!==-1},c.prototype.indexOf=function(h,p,k){return Q(this,h,p,k,!0)},c.prototype.lastIndexOf=function(h,p,k){return Q(this,h,p,k,!1)};function it(w,h,p,k){p=Number(p)||0;const q=w.length-p;k?(k=Number(k),k>q&&(k=q)):k=q;const z=h.length;k>z/2&&(k=z/2);let W;for(W=0;W<k;++W){const dt=parseInt(h.substr(W*2,2),16);if(Rt(dt))return W;w[p+W]=dt}return W}function O(w,h,p,k){return At(It(h,w.length-p),w,p,k)}function N(w,h,p,k){return At(Ft(h),w,p,k)}function K(w,h,p,k){return At(Tt(h),w,p,k)}function V(w,h,p,k){return At(Hr(h,w.length-p),w,p,k)}c.prototype.write=function(h,p,k,q){if(p===void 0)q="utf8",k=this.length,p=0;else if(k===void 0&&typeof p=="string")q=p,k=this.length,p=0;else if(isFinite(p))p=p>>>0,isFinite(k)?(k=k>>>0,q===void 0&&(q="utf8")):(q=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const z=this.length-p;if((k===void 0||k>z)&&(k=z),h.length>0&&(k<0||p<0)||p>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let W=!1;for(;;)switch(q){case"hex":return it(this,h,p,k);case"utf8":case"utf-8":return O(this,h,p,k);case"ascii":case"latin1":case"binary":return N(this,h,p,k);case"base64":return K(this,h,p,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,h,p,k);default:if(W)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),W=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function y(w,h,p){return h===0&&p===w.length?t.fromByteArray(w):t.fromByteArray(w.slice(h,p))}function a(w,h,p){p=Math.min(w.length,p);const k=[];let q=h;for(;q<p;){const z=w[q];let W=null,dt=z>239?4:z>223?3:z>191?2:1;if(q+dt<=p){let ht,lt,kt,ft;switch(dt){case 1:z<128&&(W=z);break;case 2:ht=w[q+1],(ht&192)===128&&(ft=(z&31)<<6|ht&63,ft>127&&(W=ft));break;case 3:ht=w[q+1],lt=w[q+2],(ht&192)===128&&(lt&192)===128&&(ft=(z&15)<<12|(ht&63)<<6|lt&63,ft>2047&&(ft<55296||ft>57343)&&(W=ft));break;case 4:ht=w[q+1],lt=w[q+2],kt=w[q+3],(ht&192)===128&&(lt&192)===128&&(kt&192)===128&&(ft=(z&15)<<18|(ht&63)<<12|(lt&63)<<6|kt&63,ft>65535&&ft<1114112&&(W=ft))}}W===null?(W=65533,dt=1):W>65535&&(W-=65536,k.push(W>>>10&1023|55296),W=56320|W&1023),k.push(W),q+=dt}return m(k)}const d=4096;function m(w){const h=w.length;if(h<=d)return String.fromCharCode.apply(String,w);let p="",k=0;for(;k<h;)p+=String.fromCharCode.apply(String,w.slice(k,k+=d));return p}function x(w,h,p){let k="";p=Math.min(w.length,p);for(let q=h;q<p;++q)k+=String.fromCharCode(w[q]&127);return k}function I(w,h,p){let k="";p=Math.min(w.length,p);for(let q=h;q<p;++q)k+=String.fromCharCode(w[q]);return k}function T(w,h,p){const k=w.length;(!h||h<0)&&(h=0),(!p||p<0||p>k)&&(p=k);let q="";for(let z=h;z<p;++z)q+=Ot[w[z]];return q}function U(w,h,p){const k=w.slice(h,p);let q="";for(let z=0;z<k.length-1;z+=2)q+=String.fromCharCode(k[z]+k[z+1]*256);return q}c.prototype.slice=function(h,p){const k=this.length;h=~~h,p=p===void 0?k:~~p,h<0?(h+=k,h<0&&(h=0)):h>k&&(h=k),p<0?(p+=k,p<0&&(p=0)):p>k&&(p=k),p<h&&(p=h);const q=this.subarray(h,p);return Object.setPrototypeOf(q,c.prototype),q};function _(w,h,p){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+h>p)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(h,p,k){h=h>>>0,p=p>>>0,k||_(h,p,this.length);let q=this[h],z=1,W=0;for(;++W<p&&(z*=256);)q+=this[h+W]*z;return q},c.prototype.readUintBE=c.prototype.readUIntBE=function(h,p,k){h=h>>>0,p=p>>>0,k||_(h,p,this.length);let q=this[h+--p],z=1;for(;p>0&&(z*=256);)q+=this[h+--p]*z;return q},c.prototype.readUint8=c.prototype.readUInt8=function(h,p){return h=h>>>0,p||_(h,1,this.length),this[h]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(h,p){return h=h>>>0,p||_(h,2,this.length),this[h]|this[h+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(h,p){return h=h>>>0,p||_(h,2,this.length),this[h]<<8|this[h+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(h,p){return h=h>>>0,p||_(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(h,p){return h=h>>>0,p||_(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},c.prototype.readBigUInt64LE=qe(function(h){h=h>>>0,Me(h,"offset");const p=this[h],k=this[h+7];(p===void 0||k===void 0)&&St(h,this.length-8);const q=p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,z=this[++h]+this[++h]*2**8+this[++h]*2**16+k*2**24;return BigInt(q)+(BigInt(z)<<BigInt(32))}),c.prototype.readBigUInt64BE=qe(function(h){h=h>>>0,Me(h,"offset");const p=this[h],k=this[h+7];(p===void 0||k===void 0)&&St(h,this.length-8);const q=p*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],z=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+k;return(BigInt(q)<<BigInt(32))+BigInt(z)}),c.prototype.readIntLE=function(h,p,k){h=h>>>0,p=p>>>0,k||_(h,p,this.length);let q=this[h],z=1,W=0;for(;++W<p&&(z*=256);)q+=this[h+W]*z;return z*=128,q>=z&&(q-=Math.pow(2,8*p)),q},c.prototype.readIntBE=function(h,p,k){h=h>>>0,p=p>>>0,k||_(h,p,this.length);let q=p,z=1,W=this[h+--q];for(;q>0&&(z*=256);)W+=this[h+--q]*z;return z*=128,W>=z&&(W-=Math.pow(2,8*p)),W},c.prototype.readInt8=function(h,p){return h=h>>>0,p||_(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},c.prototype.readInt16LE=function(h,p){h=h>>>0,p||_(h,2,this.length);const k=this[h]|this[h+1]<<8;return k&32768?k|4294901760:k},c.prototype.readInt16BE=function(h,p){h=h>>>0,p||_(h,2,this.length);const k=this[h+1]|this[h]<<8;return k&32768?k|4294901760:k},c.prototype.readInt32LE=function(h,p){return h=h>>>0,p||_(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},c.prototype.readInt32BE=function(h,p){return h=h>>>0,p||_(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},c.prototype.readBigInt64LE=qe(function(h){h=h>>>0,Me(h,"offset");const p=this[h],k=this[h+7];(p===void 0||k===void 0)&&St(h,this.length-8);const q=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(k<<24);return(BigInt(q)<<BigInt(32))+BigInt(p+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),c.prototype.readBigInt64BE=qe(function(h){h=h>>>0,Me(h,"offset");const p=this[h],k=this[h+7];(p===void 0||k===void 0)&&St(h,this.length-8);const q=(p<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(q)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+k)}),c.prototype.readFloatLE=function(h,p){return h=h>>>0,p||_(h,4,this.length),e.read(this,h,!0,23,4)},c.prototype.readFloatBE=function(h,p){return h=h>>>0,p||_(h,4,this.length),e.read(this,h,!1,23,4)},c.prototype.readDoubleLE=function(h,p){return h=h>>>0,p||_(h,8,this.length),e.read(this,h,!0,52,8)},c.prototype.readDoubleBE=function(h,p){return h=h>>>0,p||_(h,8,this.length),e.read(this,h,!1,52,8)};function u(w,h,p,k,q,z){if(!c.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>q||h<z)throw new RangeError('"value" argument is out of bounds');if(p+k>w.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(h,p,k,q){if(h=+h,p=p>>>0,k=k>>>0,!q){const dt=Math.pow(2,8*k)-1;u(this,h,p,k,dt,0)}let z=1,W=0;for(this[p]=h&255;++W<k&&(z*=256);)this[p+W]=h/z&255;return p+k},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(h,p,k,q){if(h=+h,p=p>>>0,k=k>>>0,!q){const dt=Math.pow(2,8*k)-1;u(this,h,p,k,dt,0)}let z=k-1,W=1;for(this[p+z]=h&255;--z>=0&&(W*=256);)this[p+z]=h/W&255;return p+k},c.prototype.writeUint8=c.prototype.writeUInt8=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,1,255,0),this[p]=h&255,p+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,2,65535,0),this[p]=h&255,this[p+1]=h>>>8,p+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,2,65535,0),this[p]=h>>>8,this[p+1]=h&255,p+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,4,4294967295,0),this[p+3]=h>>>24,this[p+2]=h>>>16,this[p+1]=h>>>8,this[p]=h&255,p+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,4,4294967295,0),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4};function l(w,h,p,k,q){Et(h,k,q,w,p,7);let z=Number(h&BigInt(4294967295));w[p++]=z,z=z>>8,w[p++]=z,z=z>>8,w[p++]=z,z=z>>8,w[p++]=z;let W=Number(h>>BigInt(32)&BigInt(4294967295));return w[p++]=W,W=W>>8,w[p++]=W,W=W>>8,w[p++]=W,W=W>>8,w[p++]=W,p}function b(w,h,p,k,q){Et(h,k,q,w,p,7);let z=Number(h&BigInt(4294967295));w[p+7]=z,z=z>>8,w[p+6]=z,z=z>>8,w[p+5]=z,z=z>>8,w[p+4]=z;let W=Number(h>>BigInt(32)&BigInt(4294967295));return w[p+3]=W,W=W>>8,w[p+2]=W,W=W>>8,w[p+1]=W,W=W>>8,w[p]=W,p+8}c.prototype.writeBigUInt64LE=qe(function(h,p=0){return l(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=qe(function(h,p=0){return b(this,h,p,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(h,p,k,q){if(h=+h,p=p>>>0,!q){const ht=Math.pow(2,8*k-1);u(this,h,p,k,ht-1,-ht)}let z=0,W=1,dt=0;for(this[p]=h&255;++z<k&&(W*=256);)h<0&&dt===0&&this[p+z-1]!==0&&(dt=1),this[p+z]=(h/W>>0)-dt&255;return p+k},c.prototype.writeIntBE=function(h,p,k,q){if(h=+h,p=p>>>0,!q){const ht=Math.pow(2,8*k-1);u(this,h,p,k,ht-1,-ht)}let z=k-1,W=1,dt=0;for(this[p+z]=h&255;--z>=0&&(W*=256);)h<0&&dt===0&&this[p+z+1]!==0&&(dt=1),this[p+z]=(h/W>>0)-dt&255;return p+k},c.prototype.writeInt8=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,1,127,-128),h<0&&(h=255+h+1),this[p]=h&255,p+1},c.prototype.writeInt16LE=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,2,32767,-32768),this[p]=h&255,this[p+1]=h>>>8,p+2},c.prototype.writeInt16BE=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,2,32767,-32768),this[p]=h>>>8,this[p+1]=h&255,p+2},c.prototype.writeInt32LE=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,4,2147483647,-2147483648),this[p]=h&255,this[p+1]=h>>>8,this[p+2]=h>>>16,this[p+3]=h>>>24,p+4},c.prototype.writeInt32BE=function(h,p,k){return h=+h,p=p>>>0,k||u(this,h,p,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[p]=h>>>24,this[p+1]=h>>>16,this[p+2]=h>>>8,this[p+3]=h&255,p+4},c.prototype.writeBigInt64LE=qe(function(h,p=0){return l(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=qe(function(h,p=0){return b(this,h,p,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function R(w,h,p,k,q,z){if(p+k>w.length)throw new RangeError("Index out of range");if(p<0)throw new RangeError("Index out of range")}function P(w,h,p,k,q){return h=+h,p=p>>>0,q||R(w,h,p,4),e.write(w,h,p,k,23,4),p+4}c.prototype.writeFloatLE=function(h,p,k){return P(this,h,p,!0,k)},c.prototype.writeFloatBE=function(h,p,k){return P(this,h,p,!1,k)};function G(w,h,p,k,q){return h=+h,p=p>>>0,q||R(w,h,p,8),e.write(w,h,p,k,52,8),p+8}c.prototype.writeDoubleLE=function(h,p,k){return G(this,h,p,!0,k)},c.prototype.writeDoubleBE=function(h,p,k){return G(this,h,p,!1,k)},c.prototype.copy=function(h,p,k,q){if(!c.isBuffer(h))throw new TypeError("argument should be a Buffer");if(k||(k=0),!q&&q!==0&&(q=this.length),p>=h.length&&(p=h.length),p||(p=0),q>0&&q<k&&(q=k),q===k||h.length===0||this.length===0)return 0;if(p<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),h.length-p<q-k&&(q=h.length-p+k);const z=q-k;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(p,k,q):Uint8Array.prototype.set.call(h,this.subarray(k,q),p),z},c.prototype.fill=function(h,p,k,q){if(typeof h=="string"){if(typeof p=="string"?(q=p,p=0,k=this.length):typeof k=="string"&&(q=k,k=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!c.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(h.length===1){const W=h.charCodeAt(0);(q==="utf8"&&W<128||q==="latin1")&&(h=W)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(p<0||this.length<p||this.length<k)throw new RangeError("Out of range index");if(k<=p)return this;p=p>>>0,k=k===void 0?this.length:k>>>0,h||(h=0);let z;if(typeof h=="number")for(z=p;z<k;++z)this[z]=h;else{const W=c.isBuffer(h)?h:c.from(h,q),dt=W.length;if(dt===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(z=0;z<k-p;++z)this[z+p]=W[z%dt]}return this};const et={};function st(w,h,p){et[w]=class extends p{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}st("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),st("ERR_INVALID_ARG_TYPE",function(w,h){return`The "${w}" argument must be of type number. Received type ${typeof h}`},TypeError),st("ERR_OUT_OF_RANGE",function(w,h,p){let k=`The value of "${w}" is out of range.`,q=p;return Number.isInteger(p)&&Math.abs(p)>2**32?q=wt(String(p)):typeof p=="bigint"&&(q=String(p),(p>BigInt(2)**BigInt(32)||p<-(BigInt(2)**BigInt(32)))&&(q=wt(q)),q+="n"),k+=` It must be ${h}. Received ${q}`,k},RangeError);function wt(w){let h="",p=w.length;const k=w[0]==="-"?1:0;for(;p>=k+4;p-=3)h=`_${w.slice(p-3,p)}${h}`;return`${w.slice(0,p)}${h}`}function bt(w,h,p){Me(h,"offset"),(w[h]===void 0||w[h+p]===void 0)&&St(h,w.length-(p+1))}function Et(w,h,p,k,q,z){if(w>p||w<h){const W=typeof h=="bigint"?"n":"";let dt;throw h===0||h===BigInt(0)?dt=`>= 0${W} and < 2${W} ** ${(z+1)*8}${W}`:dt=`>= -(2${W} ** ${(z+1)*8-1}${W}) and < 2 ** ${(z+1)*8-1}${W}`,new et.ERR_OUT_OF_RANGE("value",dt,w)}bt(k,q,z)}function Me(w,h){if(typeof w!="number")throw new et.ERR_INVALID_ARG_TYPE(h,"number",w)}function St(w,h,p){throw Math.floor(w)!==w?(Me(w,p),new et.ERR_OUT_OF_RANGE("offset","an integer",w)):h<0?new et.ERR_BUFFER_OUT_OF_BOUNDS:new et.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,w)}const Ut=/[^+/0-9A-Za-z-_]/g;function $r(w){if(w=w.split("=")[0],w=w.trim().replace(Ut,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function It(w,h){h=h||1/0;let p;const k=w.length;let q=null;const z=[];for(let W=0;W<k;++W){if(p=w.charCodeAt(W),p>55295&&p<57344){if(!q){if(p>56319){(h-=3)>-1&&z.push(239,191,189);continue}else if(W+1===k){(h-=3)>-1&&z.push(239,191,189);continue}q=p;continue}if(p<56320){(h-=3)>-1&&z.push(239,191,189),q=p;continue}p=(q-55296<<10|p-56320)+65536}else q&&(h-=3)>-1&&z.push(239,191,189);if(q=null,p<128){if((h-=1)<0)break;z.push(p)}else if(p<2048){if((h-=2)<0)break;z.push(p>>6|192,p&63|128)}else if(p<65536){if((h-=3)<0)break;z.push(p>>12|224,p>>6&63|128,p&63|128)}else if(p<1114112){if((h-=4)<0)break;z.push(p>>18|240,p>>12&63|128,p>>6&63|128,p&63|128)}else throw new Error("Invalid code point")}return z}function Ft(w){const h=[];for(let p=0;p<w.length;++p)h.push(w.charCodeAt(p)&255);return h}function Hr(w,h){let p,k,q;const z=[];for(let W=0;W<w.length&&!((h-=2)<0);++W)p=w.charCodeAt(W),k=p>>8,q=p%256,z.push(q),z.push(k);return z}function Tt(w){return t.toByteArray($r(w))}function At(w,h,p,k){let q;for(q=0;q<k&&!(q+p>=h.length||q>=w.length);++q)h[q+p]=w[q];return q}function ke(w,h){return w instanceof h||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===h.name}function Rt(w){return w!==w}const Ot=(function(){const w="0123456789abcdef",h=new Array(256);for(let p=0;p<16;++p){const k=p*16;for(let q=0;q<16;++q)h[k+q]=w[p]+w[q]}return h})();function qe(w){return typeof BigInt>"u"?Nt:w}function Nt(){throw new Error("BigInt not supported")}})(rs)),rs}var gt=to();const Gn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function Or(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function Fs(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function zn(n,...t){if(!Or(n))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(n.length))throw new Error("Uint8Array expected of length "+t+", got length="+n.length)}function mc(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Fs(n.outputLen),Fs(n.blockLen)}function ui(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function Hf(n,t){zn(n);const e=t.outputLen;if(n.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function fr(...n){for(let t=0;t<n.length;t++)n[t].fill(0)}function is(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function He(n,t){return n<<32-t|n>>>t}const yc=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Vf=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function Fn(n){if(zn(n),yc)return n.toHex();let t="";for(let e=0;e<n.length;e++)t+=Vf[n[e]];return t}const Xe={_0:48,_9:57,A:65,F:70,a:97,f:102};function $o(n){if(n>=Xe._0&&n<=Xe._9)return n-Xe._0;if(n>=Xe.A&&n<=Xe.F)return n-(Xe.A-10);if(n>=Xe.a&&n<=Xe.f)return n-(Xe.a-10)}function fi(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(yc)return Uint8Array.fromHex(n);const t=n.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=$o(n.charCodeAt(i)),c=$o(n.charCodeAt(i+1));if(o===void 0||c===void 0){const f=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+f+'" at index '+i)}r[s]=o*16+c}return r}function jf(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function eo(n){return typeof n=="string"&&(n=jf(n)),zn(n),n}function Ve(...n){let t=0;for(let r=0;r<n.length;r++){const s=n[r];zn(s),t+=s.length}const e=new Uint8Array(t);for(let r=0,s=0;r<n.length;r++){const i=n[r];e.set(i,s),s+=i.length}return e}class wc{}function bc(n){const t=r=>n().update(eo(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function no(n=32){if(Gn&&typeof Gn.getRandomValues=="function")return Gn.getRandomValues(new Uint8Array(n));if(Gn&&typeof Gn.randomBytes=="function")return Uint8Array.from(Gn.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function Wf(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),c=Number(e&i),f=r?4:0,g=r?0:4;n.setUint32(t+f,o,r),n.setUint32(t+g,c,r)}function Gf(n,t,e){return n&t^~n&e}function Zf(n,t,e){return n&t^n&e^t&e}class vc extends wc{constructor(t,e,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=is(this.buffer)}update(t){ui(this),t=eo(t),zn(t);const{view:e,buffer:r,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const c=Math.min(s-this.pos,i-o);if(c===s){const f=is(t);for(;s<=i-o;o+=s)this.process(f,o);continue}r.set(t.subarray(o,o+c),this.pos),this.pos+=c,o+=c,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ui(this),Hf(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,fr(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(r,0),o=0);for(let A=o;A<s;A++)e[A]=0;Wf(r,s-8,BigInt(this.length*8),i),this.process(r,0);const c=is(t),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=f/4,E=this.get();if(g>E.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<g;A++)c.setUint32(4*A,E[A],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:s,finished:i,destroyed:o,pos:c}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=c,s%e&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const dn=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pe=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Gr=BigInt(2**32-1),Ho=BigInt(32);function Yf(n,t=!1){return t?{h:Number(n&Gr),l:Number(n>>Ho&Gr)}:{h:Number(n>>Ho&Gr)|0,l:Number(n&Gr)|0}}function Xf(n,t=!1){const e=n.length;let r=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:c}=Yf(n[i],t);[r[i],s[i]]=[o,c]}return[r,s]}const Vo=(n,t,e)=>n>>>e,jo=(n,t,e)=>n<<32-e|t>>>e,Zn=(n,t,e)=>n>>>e|t<<32-e,Yn=(n,t,e)=>n<<32-e|t>>>e,Zr=(n,t,e)=>n<<64-e|t>>>e-32,Yr=(n,t,e)=>n>>>e-32|t<<64-e;function Je(n,t,e,r){const s=(t>>>0)+(r>>>0);return{h:n+e+(s/2**32|0)|0,l:s|0}}const Jf=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),Qf=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,tl=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),el=(n,t,e,r,s)=>t+e+r+s+(n/2**32|0)|0,nl=(n,t,e,r,s)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(s>>>0),rl=(n,t,e,r,s,i)=>t+e+r+s+i+(n/2**32|0)|0,il=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),pn=new Uint32Array(64);class sl extends vc{constructor(t=32){super(64,t,8,!1),this.A=dn[0]|0,this.B=dn[1]|0,this.C=dn[2]|0,this.D=dn[3]|0,this.E=dn[4]|0,this.F=dn[5]|0,this.G=dn[6]|0,this.H=dn[7]|0}get(){const{A:t,B:e,C:r,D:s,E:i,F:o,G:c,H:f}=this;return[t,e,r,s,i,o,c,f]}set(t,e,r,s,i,o,c,f){this.A=t|0,this.B=e|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=c|0,this.H=f|0}process(t,e){for(let A=0;A<16;A++,e+=4)pn[A]=t.getUint32(e,!1);for(let A=16;A<64;A++){const B=pn[A-15],v=pn[A-2],S=He(B,7)^He(B,18)^B>>>3,M=He(v,17)^He(v,19)^v>>>10;pn[A]=M+pn[A-7]+S+pn[A-16]|0}let{A:r,B:s,C:i,D:o,E:c,F:f,G:g,H:E}=this;for(let A=0;A<64;A++){const B=He(c,6)^He(c,11)^He(c,25),v=E+B+Gf(c,f,g)+il[A]+pn[A]|0,M=(He(r,2)^He(r,13)^He(r,22))+Zf(r,s,i)|0;E=g,g=f,f=c,c=o+v|0,o=i,i=s,s=r,r=v+M|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,c=c+this.E|0,f=f+this.F|0,g=g+this.G|0,E=E+this.H|0,this.set(r,s,i,o,c,f,g,E)}roundClean(){fr(pn)}destroy(){this.set(0,0,0,0,0,0,0,0),fr(this.buffer)}}const _c=Xf(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),ol=_c[0],al=_c[1],gn=new Uint32Array(80),mn=new Uint32Array(80);class cl extends vc{constructor(t=64){super(128,t,16,!1),this.Ah=pe[0]|0,this.Al=pe[1]|0,this.Bh=pe[2]|0,this.Bl=pe[3]|0,this.Ch=pe[4]|0,this.Cl=pe[5]|0,this.Dh=pe[6]|0,this.Dl=pe[7]|0,this.Eh=pe[8]|0,this.El=pe[9]|0,this.Fh=pe[10]|0,this.Fl=pe[11]|0,this.Gh=pe[12]|0,this.Gl=pe[13]|0,this.Hh=pe[14]|0,this.Hl=pe[15]|0}get(){const{Ah:t,Al:e,Bh:r,Bl:s,Ch:i,Cl:o,Dh:c,Dl:f,Eh:g,El:E,Fh:A,Fl:B,Gh:v,Gl:S,Hh:M,Hl:L}=this;return[t,e,r,s,i,o,c,f,g,E,A,B,v,S,M,L]}set(t,e,r,s,i,o,c,f,g,E,A,B,v,S,M,L){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=c|0,this.Dl=f|0,this.Eh=g|0,this.El=E|0,this.Fh=A|0,this.Fl=B|0,this.Gh=v|0,this.Gl=S|0,this.Hh=M|0,this.Hl=L|0}process(t,e){for(let D=0;D<16;D++,e+=4)gn[D]=t.getUint32(e),mn[D]=t.getUint32(e+=4);for(let D=16;D<80;D++){const X=gn[D-15]|0,Z=mn[D-15]|0,Q=Zn(X,Z,1)^Zn(X,Z,8)^Vo(X,Z,7),at=Yn(X,Z,1)^Yn(X,Z,8)^jo(X,Z,7),it=gn[D-2]|0,O=mn[D-2]|0,N=Zn(it,O,19)^Zr(it,O,61)^Vo(it,O,6),K=Yn(it,O,19)^Yr(it,O,61)^jo(it,O,6),V=tl(at,K,mn[D-7],mn[D-16]),y=el(V,Q,N,gn[D-7],gn[D-16]);gn[D]=y|0,mn[D]=V|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:c,Cl:f,Dh:g,Dl:E,Eh:A,El:B,Fh:v,Fl:S,Gh:M,Gl:L,Hh:F,Hl:H}=this;for(let D=0;D<80;D++){const X=Zn(A,B,14)^Zn(A,B,18)^Zr(A,B,41),Z=Yn(A,B,14)^Yn(A,B,18)^Yr(A,B,41),Q=A&v^~A&M,at=B&S^~B&L,it=nl(H,Z,at,al[D],mn[D]),O=rl(it,F,X,Q,ol[D],gn[D]),N=it|0,K=Zn(r,s,28)^Zr(r,s,34)^Zr(r,s,39),V=Yn(r,s,28)^Yr(r,s,34)^Yr(r,s,39),y=r&i^r&c^i&c,a=s&o^s&f^o&f;F=M|0,H=L|0,M=v|0,L=S|0,v=A|0,S=B|0,{h:A,l:B}=Je(g|0,E|0,O|0,N|0),g=c|0,E=f|0,c=i|0,f=o|0,i=r|0,o=s|0;const d=Jf(N,V,a);r=Qf(d,O,K,y),s=d|0}({h:r,l:s}=Je(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=Je(this.Bh|0,this.Bl|0,i|0,o|0),{h:c,l:f}=Je(this.Ch|0,this.Cl|0,c|0,f|0),{h:g,l:E}=Je(this.Dh|0,this.Dl|0,g|0,E|0),{h:A,l:B}=Je(this.Eh|0,this.El|0,A|0,B|0),{h:v,l:S}=Je(this.Fh|0,this.Fl|0,v|0,S|0),{h:M,l:L}=Je(this.Gh|0,this.Gl|0,M|0,L|0),{h:F,l:H}=Je(this.Hh|0,this.Hl|0,F|0,H|0),this.set(r,s,i,o,c,f,g,E,A,B,v,S,M,L,F,H)}roundClean(){fr(gn,mn)}destroy(){fr(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const xc=bc(()=>new sl),ul=bc(()=>new cl);const ro=BigInt(0),Os=BigInt(1);function Pn(n,t=""){if(typeof n!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof n)}return n}function ze(n,t,e=""){const r=Or(n),s=n?.length,i=t!==void 0;if(!r||i&&s!==t){const o=e&&`"${e}" `,c=i?` of length ${t}`:"",f=r?`length=${s}`:`type=${typeof n}`;throw new Error(o+"expected Uint8Array"+c+", got "+f)}return n}function Xr(n){const t=n.toString(16);return t.length&1?"0"+t:t}function Ec(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?ro:BigInt("0x"+n)}function Ii(n){return Ec(Fn(n))}function Mr(n){return zn(n),Ec(Fn(Uint8Array.from(n).reverse()))}function io(n,t){return fi(n.toString(16).padStart(t*2,"0"))}function Sc(n,t){return io(n,t).reverse()}function Pt(n,t,e){let r;if(typeof t=="string")try{r=fi(t)}catch(i){throw new Error(n+" must be hex string or Uint8Array, cause: "+i)}else if(Or(t))r=Uint8Array.from(t);else throw new Error(n+" must be hex string or Uint8Array");const s=r.length;if(typeof e=="number"&&s!==e)throw new Error(n+" of length "+e+" expected, got "+s);return r}function Wo(n){return Uint8Array.from(n)}const ss=n=>typeof n=="bigint"&&ro<=n;function fl(n,t,e){return ss(n)&&ss(t)&&ss(e)&&t<=n&&n<e}function Ns(n,t,e,r){if(!fl(t,e,r))throw new Error("expected valid "+n+": "+e+" <= n < "+r+", got "+t)}function Bc(n){let t;for(t=0;n>ro;n>>=Os,t+=1);return t}const Nr=n=>(Os<<BigInt(n))-Os;function ll(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const r=v=>new Uint8Array(v),s=v=>Uint8Array.of(v);let i=r(n),o=r(n),c=0;const f=()=>{i.fill(1),o.fill(0),c=0},g=(...v)=>e(o,i,...v),E=(v=r(0))=>{o=g(s(0),v),i=g(),v.length!==0&&(o=g(s(1),v),i=g())},A=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let v=0;const S=[];for(;v<t;){i=g();const M=i.slice();S.push(M),v+=i.length}return Ve(...S)};return(v,S)=>{f(),E(v);let M;for(;!(M=S(A()));)E();return f(),M}}function qr(n,t,e={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function r(s,i,o){const c=n[s];if(o&&c===void 0)return;const f=typeof c;if(f!==i||c===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${f}`)}Object.entries(t).forEach(([s,i])=>r(s,i,!1)),Object.entries(e).forEach(([s,i])=>r(s,i,!0))}function li(n){const t=new WeakMap;return(e,...r)=>{const s=t.get(e);if(s!==void 0)return s;const i=n(e,...r);return t.set(e,i),i}}const Be=BigInt(0),he=BigInt(1),Rn=BigInt(2),Ac=BigInt(3),kc=BigInt(4),Ic=BigInt(5),hl=BigInt(7),Rc=BigInt(8),dl=BigInt(9),Mc=BigInt(16);function se(n,t){const e=n%t;return e>=Be?e:t+e}function qt(n,t,e){let r=n;for(;t-- >Be;)r*=r,r%=e;return r}function Go(n,t){if(n===Be)throw new Error("invert: expected non-zero number");if(t<=Be)throw new Error("invert: expected positive modulus, got "+t);let e=se(n,t),r=t,s=Be,i=he;for(;e!==Be;){const c=r/e,f=r%e,g=s-i*c;r=e,e=f,s=i,i=g}if(r!==he)throw new Error("invert: does not exist");return se(s,t)}function so(n,t,e){if(!n.eql(n.sqr(t),e))throw new Error("Cannot find square root")}function Tc(n,t){const e=(n.ORDER+he)/kc,r=n.pow(t,e);return so(n,r,t),r}function pl(n,t){const e=(n.ORDER-Ic)/Rc,r=n.mul(t,Rn),s=n.pow(r,e),i=n.mul(t,s),o=n.mul(n.mul(i,Rn),s),c=n.mul(i,n.sub(o,n.ONE));return so(n,c,t),c}function gl(n){const t=Kn(n),e=Cc(n),r=e(t,t.neg(t.ONE)),s=e(t,r),i=e(t,t.neg(r)),o=(n+hl)/Mc;return(c,f)=>{let g=c.pow(f,o),E=c.mul(g,r);const A=c.mul(g,s),B=c.mul(g,i),v=c.eql(c.sqr(E),f),S=c.eql(c.sqr(A),f);g=c.cmov(g,E,v),E=c.cmov(B,A,S);const M=c.eql(c.sqr(E),f),L=c.cmov(g,E,M);return so(c,L,f),L}}function Cc(n){if(n<Ac)throw new Error("sqrt is not defined for small field");let t=n-he,e=0;for(;t%Rn===Be;)t/=Rn,e++;let r=Rn;const s=Kn(n);for(;Zo(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Tc;let i=s.pow(r,t);const o=(t+he)/Rn;return function(f,g){if(f.is0(g))return g;if(Zo(f,g)!==1)throw new Error("Cannot find square root");let E=e,A=f.mul(f.ONE,i),B=f.pow(g,t),v=f.pow(g,o);for(;!f.eql(B,f.ONE);){if(f.is0(B))return f.ZERO;let S=1,M=f.sqr(B);for(;!f.eql(M,f.ONE);)if(S++,M=f.sqr(M),S===E)throw new Error("Cannot find square root");const L=he<<BigInt(E-S-1),F=f.pow(A,L);E=S,A=f.sqr(F),B=f.mul(B,A),v=f.mul(v,F)}return v}}function ml(n){return n%kc===Ac?Tc:n%Rc===Ic?pl:n%Mc===dl?gl(n):Cc(n)}const yl=(n,t)=>(se(n,t)&he)===he,wl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function bl(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=wl.reduce((r,s)=>(r[s]="function",r),t);return qr(n,e),n}function vl(n,t,e){if(e<Be)throw new Error("invalid exponent, negatives unsupported");if(e===Be)return n.ONE;if(e===he)return t;let r=n.ONE,s=t;for(;e>Be;)e&he&&(r=n.mul(r,s)),s=n.sqr(s),e>>=he;return r}function Lc(n,t,e=!1){const r=new Array(t.length).fill(e?n.ZERO:void 0),s=t.reduce((o,c,f)=>n.is0(c)?o:(r[f]=o,n.mul(o,c)),n.ONE),i=n.inv(s);return t.reduceRight((o,c,f)=>n.is0(c)?o:(r[f]=n.mul(o,r[f]),n.mul(o,c)),i),r}function Zo(n,t){const e=(n.ORDER-he)/Rn,r=n.pow(t,e),s=n.eql(r,n.ONE),i=n.eql(r,n.ZERO),o=n.eql(r,n.neg(n.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Uc(n,t){t!==void 0&&Fs(t);const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Kn(n,t,e=!1,r={}){if(n<=Be)throw new Error("invalid field: expected ORDER > 0, got "+n);let s,i,o=!1,c;if(typeof t=="object"&&t!=null){if(r.sqrt||e)throw new Error("cannot specify opts in two arguments");const B=t;B.BITS&&(s=B.BITS),B.sqrt&&(i=B.sqrt),typeof B.isLE=="boolean"&&(e=B.isLE),typeof B.modFromBytes=="boolean"&&(o=B.modFromBytes),c=B.allowedLengths}else typeof t=="number"&&(s=t),r.sqrt&&(i=r.sqrt);const{nBitLength:f,nByteLength:g}=Uc(n,s);if(g>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let E;const A=Object.freeze({ORDER:n,isLE:e,BITS:f,BYTES:g,MASK:Nr(f),ZERO:Be,ONE:he,allowedLengths:c,create:B=>se(B,n),isValid:B=>{if(typeof B!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof B);return Be<=B&&B<n},is0:B=>B===Be,isValidNot0:B=>!A.is0(B)&&A.isValid(B),isOdd:B=>(B&he)===he,neg:B=>se(-B,n),eql:(B,v)=>B===v,sqr:B=>se(B*B,n),add:(B,v)=>se(B+v,n),sub:(B,v)=>se(B-v,n),mul:(B,v)=>se(B*v,n),pow:(B,v)=>vl(A,B,v),div:(B,v)=>se(B*Go(v,n),n),sqrN:B=>B*B,addN:(B,v)=>B+v,subN:(B,v)=>B-v,mulN:(B,v)=>B*v,inv:B=>Go(B,n),sqrt:i||(B=>(E||(E=ml(n)),E(A,B))),toBytes:B=>e?Sc(B,g):io(B,g),fromBytes:(B,v=!0)=>{if(c){if(!c.includes(B.length)||B.length>g)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+B.length);const M=new Uint8Array(g);M.set(B,e?0:M.length-B.length),B=M}if(B.length!==g)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+B.length);let S=e?Mr(B):Ii(B);if(o&&(S=se(S,n)),!v&&!A.isValid(S))throw new Error("invalid field element: outside of range 0..ORDER");return S},invertBatch:B=>Lc(A,B),cmov:(B,v,S)=>S?v:B});return Object.freeze(A)}function Fc(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function Oc(n){const t=Fc(n);return t+Math.ceil(t/2)}function _l(n,t,e=!1){const r=n.length,s=Fc(t),i=Oc(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=e?Mr(n):Ii(n),c=se(o,t-he)+he;return e?Sc(c,s):io(c,s)}const lr=BigInt(0),Mn=BigInt(1);function hi(n,t){const e=t.negate();return n?e:t}function Tn(n,t){const e=Lc(n.Fp,t.map(r=>r.Z));return t.map((r,s)=>n.fromAffine(r.toAffine(e[s])))}function Nc(n,t){if(!Number.isSafeInteger(n)||n<=0||n>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+n)}function os(n,t){Nc(n,t);const e=Math.ceil(t/n)+1,r=2**(n-1),s=2**n,i=Nr(n),o=BigInt(n);return{windows:e,windowSize:r,mask:i,maxNumber:s,shiftBy:o}}function Yo(n,t,e){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=e;let c=Number(n&s),f=n>>o;c>r&&(c-=i,f+=Mn);const g=t*r,E=g+Math.abs(c)-1,A=c===0,B=c<0,v=t%2!==0;return{nextN:f,offset:E,isZero:A,isNeg:B,isNegF:v,offsetF:g}}function xl(n,t){if(!Array.isArray(n))throw new Error("array expected");n.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function El(n,t){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const as=new WeakMap,qc=new WeakMap;function cs(n){return qc.get(n)||1}function Xo(n){if(n!==lr)throw new Error("invalid wNAF")}class Pc{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,r=this.ZERO){let s=t;for(;e>lr;)e&Mn&&(r=r.add(s)),s=s.double(),e>>=Mn;return r}precomputeWindow(t,e){const{windows:r,windowSize:s}=os(e,this.bits),i=[];let o=t,c=o;for(let f=0;f<r;f++){c=o,i.push(c);for(let g=1;g<s;g++)c=c.add(o),i.push(c);o=c.double()}return i}wNAF(t,e,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=os(t,this.bits);for(let c=0;c<o.windows;c++){const{nextN:f,offset:g,isZero:E,isNeg:A,isNegF:B,offsetF:v}=Yo(r,c,o);r=f,E?i=i.add(hi(B,e[v])):s=s.add(hi(A,e[g]))}return Xo(r),{p:s,f:i}}wNAFUnsafe(t,e,r,s=this.ZERO){const i=os(t,this.bits);for(let o=0;o<i.windows&&r!==lr;o++){const{nextN:c,offset:f,isZero:g,isNeg:E}=Yo(r,o,i);if(r=c,!g){const A=e[f];s=s.add(E?A.negate():A)}}return Xo(r),s}getPrecomputes(t,e,r){let s=as.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof r=="function"&&(s=r(s)),as.set(e,s))),s}cached(t,e,r){const s=cs(t);return this.wNAF(s,this.getPrecomputes(s,t,r),e)}unsafe(t,e,r,s){const i=cs(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,r),e,s)}createCache(t,e){Nc(e,this.bits),qc.set(t,e),as.delete(t)}hasCache(t){return cs(t)!==1}}function Sl(n,t,e,r){let s=t,i=n.ZERO,o=n.ZERO;for(;e>lr||r>lr;)e&Mn&&(i=i.add(s)),r&Mn&&(o=o.add(s)),s=s.double(),e>>=Mn,r>>=Mn;return{p1:i,p2:o}}function Dc(n,t,e,r){xl(e,n),El(r,t);const s=e.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=n.ZERO,c=Bc(BigInt(s));let f=1;c>12?f=c-3:c>4?f=c-2:c>0&&(f=2);const g=Nr(f),E=new Array(Number(g)+1).fill(o),A=Math.floor((t.BITS-1)/f)*f;let B=o;for(let v=A;v>=0;v-=f){E.fill(o);for(let M=0;M<i;M++){const L=r[M],F=Number(L>>BigInt(v)&g);E[F]=E[F].add(e[M])}let S=o;for(let M=E.length-1,L=o;M>0;M--)L=L.add(E[M]),S=S.add(L);if(B=B.add(S),v!==0)for(let M=0;M<f;M++)B=B.double()}return B}function Jo(n,t,e){if(t){if(t.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return bl(t),t}else return Kn(n,{isLE:e})}function zc(n,t,e={},r){if(r===void 0&&(r=n==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${n} CURVE object`);for(const f of["p","n","h"]){const g=t[f];if(!(typeof g=="bigint"&&g>lr))throw new Error(`CURVE.${f} must be positive bigint`)}const s=Jo(t.p,e.Fp,r),i=Jo(t.n,e.Fn,r),c=["Gx","Gy","a",n==="weierstrass"?"b":"d"];for(const f of c)if(!s.isValid(t[f]))throw new Error(`CURVE.${f} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}const yn=BigInt(0),oe=BigInt(1),us=BigInt(2),Bl=BigInt(8);function Al(n,t,e,r){const s=n.sqr(e),i=n.sqr(r),o=n.add(n.mul(t.a,s),i),c=n.add(n.ONE,n.mul(t.d,n.mul(s,i)));return n.eql(o,c)}function kl(n,t={}){const e=zc("edwards",n,t,t.FpFnLE),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o}=i;qr(t,{},{uvRatio:"function"});const c=us<<BigInt(s.BYTES*8)-oe,f=L=>r.create(L),g=t.uvRatio||((L,F)=>{try{return{isValid:!0,value:r.sqrt(r.div(L,F))}}catch{return{isValid:!1,value:yn}}});if(!Al(r,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function E(L,F,H=!1){const D=H?oe:yn;return Ns("coordinate "+L,F,D,c),F}function A(L){if(!(L instanceof S))throw new Error("ExtendedPoint expected")}const B=li((L,F)=>{const{X:H,Y:D,Z:X}=L,Z=L.is0();F==null&&(F=Z?Bl:r.inv(X));const Q=f(H*F),at=f(D*F),it=r.mul(X,F);if(Z)return{x:yn,y:oe};if(it!==oe)throw new Error("invZ was invalid");return{x:Q,y:at}}),v=li(L=>{const{a:F,d:H}=i;if(L.is0())throw new Error("bad point: ZERO");const{X:D,Y:X,Z,T:Q}=L,at=f(D*D),it=f(X*X),O=f(Z*Z),N=f(O*O),K=f(at*F),V=f(O*f(K+it)),y=f(N+f(H*f(at*it)));if(V!==y)throw new Error("bad point: equation left != right (1)");const a=f(D*X),d=f(Z*Q);if(a!==d)throw new Error("bad point: equation left != right (2)");return!0});class S{constructor(F,H,D,X){this.X=E("x",F),this.Y=E("y",H),this.Z=E("z",D,!0),this.T=E("t",X),Object.freeze(this)}static CURVE(){return i}static fromAffine(F){if(F instanceof S)throw new Error("extended point not allowed");const{x:H,y:D}=F||{};return E("x",H),E("y",D),new S(H,D,oe,f(H*D))}static fromBytes(F,H=!1){const D=r.BYTES,{a:X,d:Z}=i;F=Wo(ze(F,D,"point")),Pn(H,"zip215");const Q=Wo(F),at=F[D-1];Q[D-1]=at&-129;const it=Mr(Q),O=H?c:r.ORDER;Ns("point.y",it,yn,O);const N=f(it*it),K=f(N-oe),V=f(Z*N-X);let{isValid:y,value:a}=g(K,V);if(!y)throw new Error("bad point: invalid y coordinate");const d=(a&oe)===oe,m=(at&128)!==0;if(!H&&a===yn&&m)throw new Error("bad point: x=0 and x_0=1");return m!==d&&(a=f(-a)),S.fromAffine({x:a,y:it})}static fromHex(F,H=!1){return S.fromBytes(Pt("point",F),H)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(F=8,H=!0){return M.createCache(this,F),H||this.multiply(us),this}assertValidity(){v(this)}equals(F){A(F);const{X:H,Y:D,Z:X}=this,{X:Z,Y:Q,Z:at}=F,it=f(H*at),O=f(Z*X),N=f(D*at),K=f(Q*X);return it===O&&N===K}is0(){return this.equals(S.ZERO)}negate(){return new S(f(-this.X),this.Y,this.Z,f(-this.T))}double(){const{a:F}=i,{X:H,Y:D,Z:X}=this,Z=f(H*H),Q=f(D*D),at=f(us*f(X*X)),it=f(F*Z),O=H+D,N=f(f(O*O)-Z-Q),K=it+Q,V=K-at,y=it-Q,a=f(N*V),d=f(K*y),m=f(N*y),x=f(V*K);return new S(a,d,x,m)}add(F){A(F);const{a:H,d:D}=i,{X,Y:Z,Z:Q,T:at}=this,{X:it,Y:O,Z:N,T:K}=F,V=f(X*it),y=f(Z*O),a=f(at*D*K),d=f(Q*N),m=f((X+Z)*(it+O)-V-y),x=d-a,I=d+a,T=f(y-H*V),U=f(m*x),_=f(I*T),u=f(m*T),l=f(x*I);return new S(U,_,l,u)}subtract(F){return this.add(F.negate())}multiply(F){if(!s.isValidNot0(F))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:H,f:D}=M.cached(this,F,X=>Tn(S,X));return Tn(S,[H,D])[0]}multiplyUnsafe(F,H=S.ZERO){if(!s.isValid(F))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return F===yn?S.ZERO:this.is0()||F===oe?this:M.unsafe(this,F,D=>Tn(S,D),H)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return M.unsafe(this,i.n).is0()}toAffine(F){return B(this,F)}clearCofactor(){return o===oe?this:this.multiplyUnsafe(o)}toBytes(){const{x:F,y:H}=this.toAffine(),D=r.toBytes(H);return D[D.length-1]|=F&oe?128:0,D}toHex(){return Fn(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(F){return Tn(S,F)}static msm(F,H){return Dc(S,s,F,H)}_setWindowSize(F){this.precompute(F)}toRawBytes(){return this.toBytes()}}S.BASE=new S(i.Gx,i.Gy,oe,f(i.Gx*i.Gy)),S.ZERO=new S(yn,oe,oe,yn),S.Fp=r,S.Fn=s;const M=new Pc(S,s.BITS);return S.BASE.precompute(8),S}function Il(n,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');qr(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:r}=e,{BASE:s,Fp:i,Fn:o}=n,c=e.randomBytes||no,f=e.adjustScalarBytes||(O=>O),g=e.domain||((O,N,K)=>{if(Pn(K,"phflag"),N.length||K)throw new Error("Contexts/pre-hash are not supported");return O});function E(O){return o.create(Mr(O))}function A(O){const N=D.secretKey;O=Pt("private key",O,N);const K=Pt("hashed private key",t(O),2*N),V=f(K.slice(0,N)),y=K.slice(N,2*N),a=E(V);return{head:V,prefix:y,scalar:a}}function B(O){const{head:N,prefix:K,scalar:V}=A(O),y=s.multiply(V),a=y.toBytes();return{head:N,prefix:K,scalar:V,point:y,pointBytes:a}}function v(O){return B(O).pointBytes}function S(O=Uint8Array.of(),...N){const K=Ve(...N);return E(t(g(K,Pt("context",O),!!r)))}function M(O,N,K={}){O=Pt("message",O),r&&(O=r(O));const{prefix:V,scalar:y,pointBytes:a}=B(N),d=S(K.context,V,O),m=s.multiply(d).toBytes(),x=S(K.context,m,a,O),I=o.create(d+x*y);if(!o.isValid(I))throw new Error("sign failed: invalid s");const T=Ve(m,o.toBytes(I));return ze(T,D.signature,"result")}const L={zip215:!0};function F(O,N,K,V=L){const{context:y,zip215:a}=V,d=D.signature;O=Pt("signature",O,d),N=Pt("message",N),K=Pt("publicKey",K,D.publicKey),a!==void 0&&Pn(a,"zip215"),r&&(N=r(N));const m=d/2,x=O.subarray(0,m),I=Mr(O.subarray(m,d));let T,U,_;try{T=n.fromBytes(K,a),U=n.fromBytes(x,a),_=s.multiplyUnsafe(I)}catch{return!1}if(!a&&T.isSmallOrder())return!1;const u=S(y,U.toBytes(),T.toBytes(),N);return U.add(T.multiplyUnsafe(u)).subtract(_).clearCofactor().is0()}const H=i.BYTES,D={secretKey:H,publicKey:H,signature:2*H,seed:H};function X(O=c(D.seed)){return ze(O,D.seed,"seed")}function Z(O){const N=it.randomSecretKey(O);return{secretKey:N,publicKey:v(N)}}function Q(O){return Or(O)&&O.length===o.BYTES}function at(O,N){try{return!!n.fromBytes(O,N)}catch{return!1}}const it={getExtendedPublicKey:B,randomSecretKey:X,isValidSecretKey:Q,isValidPublicKey:at,toMontgomery(O){const{y:N}=n.fromBytes(O),K=D.publicKey,V=K===32;if(!V&&K!==57)throw new Error("only defined for 25519 and 448");const y=V?i.div(oe+N,oe-N):i.div(N-oe,N+oe);return i.toBytes(y)},toMontgomerySecret(O){const N=D.secretKey;ze(O,N);const K=t(O.subarray(0,N));return f(K).subarray(0,N)},randomPrivateKey:X,precompute(O=8,N=n.BASE){return N.precompute(O,!1)}};return Object.freeze({keygen:Z,getPublicKey:v,sign:M,verify:F,utils:it,Point:n,lengths:D})}function Rl(n){const t={a:n.a,d:n.d,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp,r=Kn(t.n,n.nBitLength,!0),s={Fp:e,Fn:r,uvRatio:n.uvRatio},i={randomBytes:n.randomBytes,adjustScalarBytes:n.adjustScalarBytes,domain:n.domain,prehash:n.prehash,mapToCurve:n.mapToCurve};return{CURVE:t,curveOpts:s,hash:n.hash,eddsaOpts:i}}function Ml(n,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:n,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function Tl(n){const{CURVE:t,curveOpts:e,hash:r,eddsaOpts:s}=Rl(n),i=kl(t,e),o=Il(i,r,s);return Ml(n,o)}const Cl=BigInt(1),Qo=BigInt(2);BigInt(3);const Ll=BigInt(5),Ul=BigInt(8),oo=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Kc={p:oo,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Ul,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Fl(n){const t=BigInt(10),e=BigInt(20),r=BigInt(40),s=BigInt(80),i=oo,c=n*n%i*n%i,f=qt(c,Qo,i)*c%i,g=qt(f,Cl,i)*n%i,E=qt(g,Ll,i)*g%i,A=qt(E,t,i)*E%i,B=qt(A,e,i)*A%i,v=qt(B,r,i)*B%i,S=qt(v,s,i)*v%i,M=qt(S,s,i)*v%i,L=qt(M,t,i)*E%i;return{pow_p_5_8:qt(L,Qo,i)*n%i,b2:c}}function Ol(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}const ta=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Nl(n,t){const e=oo,r=se(t*t*t,e),s=se(r*r*t,e),i=Fl(n*s).pow_p_5_8;let o=se(n*r*i,e);const c=se(t*o*o,e),f=o,g=se(o*ta,e),E=c===n,A=c===se(-n,e),B=c===se(-n*ta,e);return E&&(o=f),(A||B)&&(o=g),yl(o,e)&&(o=se(-o,e)),{isValid:E||A,value:o}}const ql=Kn(Kc.p,{isLE:!0}),Pl={...Kc,Fp:ql,hash:ul,adjustScalarBytes:Ol,uvRatio:Nl},Pr=Tl(Pl);var ri={exports:{}};const Dl={},zl=Object.freeze(Object.defineProperty({__proto__:null,default:Dl},Symbol.toStringTag,{value:"Module"})),Kl=Qs(zl);var $l=ri.exports,ea;function $c(){return ea||(ea=1,(function(n){(function(t,e){function r(y,a){if(!y)throw new Error(a||"Assertion failed")}function s(y,a){y.super_=a;var d=function(){};d.prototype=a.prototype,y.prototype=new d,y.prototype.constructor=y}function i(y,a,d){if(i.isBN(y))return y;this.negative=0,this.words=null,this.length=0,this.red=null,y!==null&&((a==="le"||a==="be")&&(d=a,a=10),this._init(y||0,a||10,d||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Kl.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,d){return a.cmp(d)>0?a:d},i.min=function(a,d){return a.cmp(d)<0?a:d},i.prototype._init=function(a,d,m){if(typeof a=="number")return this._initNumber(a,d,m);if(typeof a=="object")return this._initArray(a,d,m);d==="hex"&&(d=16),r(d===(d|0)&&d>=2&&d<=36),a=a.toString().replace(/\s+/g,"");var x=0;a[0]==="-"&&(x++,this.negative=1),x<a.length&&(d===16?this._parseHex(a,x,m):(this._parseBase(a,d,x),m==="le"&&this._initArray(this.toArray(),d,m)))},i.prototype._initNumber=function(a,d,m){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),m==="le"&&this._initArray(this.toArray(),d,m)},i.prototype._initArray=function(a,d,m){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var I,T,U=0;if(m==="be")for(x=a.length-1,I=0;x>=0;x-=3)T=a[x]|a[x-1]<<8|a[x-2]<<16,this.words[I]|=T<<U&67108863,this.words[I+1]=T>>>26-U&67108863,U+=24,U>=26&&(U-=26,I++);else if(m==="le")for(x=0,I=0;x<a.length;x+=3)T=a[x]|a[x+1]<<8|a[x+2]<<16,this.words[I]|=T<<U&67108863,this.words[I+1]=T>>>26-U&67108863,U+=24,U>=26&&(U-=26,I++);return this._strip()};function c(y,a){var d=y.charCodeAt(a);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;r(!1,"Invalid character in "+y)}function f(y,a,d){var m=c(y,d);return d-1>=a&&(m|=c(y,d-1)<<4),m}i.prototype._parseHex=function(a,d,m){this.length=Math.ceil((a.length-d)/6),this.words=new Array(this.length);for(var x=0;x<this.length;x++)this.words[x]=0;var I=0,T=0,U;if(m==="be")for(x=a.length-1;x>=d;x-=2)U=f(a,d,x)<<I,this.words[T]|=U&67108863,I>=18?(I-=18,T+=1,this.words[T]|=U>>>26):I+=8;else{var _=a.length-d;for(x=_%2===0?d+1:d;x<a.length;x+=2)U=f(a,d,x)<<I,this.words[T]|=U&67108863,I>=18?(I-=18,T+=1,this.words[T]|=U>>>26):I+=8}this._strip()};function g(y,a,d,m){for(var x=0,I=0,T=Math.min(y.length,d),U=a;U<T;U++){var _=y.charCodeAt(U)-48;x*=m,_>=49?I=_-49+10:_>=17?I=_-17+10:I=_,r(_>=0&&I<m,"Invalid character"),x+=I}return x}i.prototype._parseBase=function(a,d,m){this.words=[0],this.length=1;for(var x=0,I=1;I<=67108863;I*=d)x++;x--,I=I/d|0;for(var T=a.length-m,U=T%x,_=Math.min(T,T-U)+m,u=0,l=m;l<_;l+=x)u=g(a,l,l+x,d),this.imuln(I),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(U!==0){var b=1;for(u=g(a,l,a.length,d),l=0;l<U;l++)b*=d;this.imuln(b),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var d=0;d<this.length;d++)a.words[d]=this.words[d];a.length=this.length,a.negative=this.negative,a.red=this.red};function E(y,a){y.words=a.words,y.length=a.length,y.negative=a.negative,y.red=a.red}if(i.prototype._move=function(a){E(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],v=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,d){a=a||10,d=d|0||1;var m;if(a===16||a==="hex"){m="";for(var x=0,I=0,T=0;T<this.length;T++){var U=this.words[T],_=((U<<x|I)&16777215).toString(16);I=U>>>24-x&16777215,x+=2,x>=26&&(x-=26,T--),I!==0||T!==this.length-1?m=B[6-_.length]+_+m:m=_+m}for(I!==0&&(m=I.toString(16)+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}if(a===(a|0)&&a>=2&&a<=36){var u=v[a],l=S[a];m="";var b=this.clone();for(b.negative=0;!b.isZero();){var R=b.modrn(l).toString(a);b=b.idivn(l),b.isZero()?m=R+m:m=B[u-R.length]+R+m}for(this.isZero()&&(m="0"+m);m.length%d!==0;)m="0"+m;return this.negative!==0&&(m="-"+m),m}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(a,d){return this.toArrayLike(o,a,d)}),i.prototype.toArray=function(a,d){return this.toArrayLike(Array,a,d)};var M=function(a,d){return a.allocUnsafe?a.allocUnsafe(d):new a(d)};i.prototype.toArrayLike=function(a,d,m){this._strip();var x=this.byteLength(),I=m||Math.max(1,x);r(x<=I,"byte array longer than desired length"),r(I>0,"Requested array length <= 0");var T=M(a,I),U=d==="le"?"LE":"BE";return this["_toArrayLike"+U](T,x),T},i.prototype._toArrayLikeLE=function(a,d){for(var m=0,x=0,I=0,T=0;I<this.length;I++){var U=this.words[I]<<T|x;a[m++]=U&255,m<a.length&&(a[m++]=U>>8&255),m<a.length&&(a[m++]=U>>16&255),T===6?(m<a.length&&(a[m++]=U>>24&255),x=0,T=0):(x=U>>>24,T+=2)}if(m<a.length)for(a[m++]=x;m<a.length;)a[m++]=0},i.prototype._toArrayLikeBE=function(a,d){for(var m=a.length-1,x=0,I=0,T=0;I<this.length;I++){var U=this.words[I]<<T|x;a[m--]=U&255,m>=0&&(a[m--]=U>>8&255),m>=0&&(a[m--]=U>>16&255),T===6?(m>=0&&(a[m--]=U>>24&255),x=0,T=0):(x=U>>>24,T+=2)}if(m>=0)for(a[m--]=x;m>=0;)a[m--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var d=a,m=0;return d>=4096&&(m+=13,d>>>=13),d>=64&&(m+=7,d>>>=7),d>=8&&(m+=4,d>>>=4),d>=2&&(m+=2,d>>>=2),m+d},i.prototype._zeroBits=function(a){if(a===0)return 26;var d=a,m=0;return(d&8191)===0&&(m+=13,d>>>=13),(d&127)===0&&(m+=7,d>>>=7),(d&15)===0&&(m+=4,d>>>=4),(d&3)===0&&(m+=2,d>>>=2),(d&1)===0&&m++,m},i.prototype.bitLength=function(){var a=this.words[this.length-1],d=this._countBits(a);return(this.length-1)*26+d};function L(y){for(var a=new Array(y.bitLength()),d=0;d<a.length;d++){var m=d/26|0,x=d%26;a[d]=y.words[m]>>>x&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,d=0;d<this.length;d++){var m=this._zeroBits(this.words[d]);if(a+=m,m!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var d=0;d<a.length;d++)this.words[d]=this.words[d]|a.words[d];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var d;this.length>a.length?d=a:d=this;for(var m=0;m<d.length;m++)this.words[m]=this.words[m]&a.words[m];return this.length=d.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var d,m;this.length>a.length?(d=this,m=a):(d=a,m=this);for(var x=0;x<m.length;x++)this.words[x]=d.words[x]^m.words[x];if(this!==d)for(;x<d.length;x++)this.words[x]=d.words[x];return this.length=d.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var d=Math.ceil(a/26)|0,m=a%26;this._expand(d),m>0&&d--;for(var x=0;x<d;x++)this.words[x]=~this.words[x]&67108863;return m>0&&(this.words[x]=~this.words[x]&67108863>>26-m),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,d){r(typeof a=="number"&&a>=0);var m=a/26|0,x=a%26;return this._expand(m+1),d?this.words[m]=this.words[m]|1<<x:this.words[m]=this.words[m]&~(1<<x),this._strip()},i.prototype.iadd=function(a){var d;if(this.negative!==0&&a.negative===0)return this.negative=0,d=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,d=this.isub(a),a.negative=1,d._normSign();var m,x;this.length>a.length?(m=this,x=a):(m=a,x=this);for(var I=0,T=0;T<x.length;T++)d=(m.words[T]|0)+(x.words[T]|0)+I,this.words[T]=d&67108863,I=d>>>26;for(;I!==0&&T<m.length;T++)d=(m.words[T]|0)+I,this.words[T]=d&67108863,I=d>>>26;if(this.length=m.length,I!==0)this.words[this.length]=I,this.length++;else if(m!==this)for(;T<m.length;T++)this.words[T]=m.words[T];return this},i.prototype.add=function(a){var d;return a.negative!==0&&this.negative===0?(a.negative=0,d=this.sub(a),a.negative^=1,d):a.negative===0&&this.negative!==0?(this.negative=0,d=a.sub(this),this.negative=1,d):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var d=this.iadd(a);return a.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var m=this.cmp(a);if(m===0)return this.negative=0,this.length=1,this.words[0]=0,this;var x,I;m>0?(x=this,I=a):(x=a,I=this);for(var T=0,U=0;U<I.length;U++)d=(x.words[U]|0)-(I.words[U]|0)+T,T=d>>26,this.words[U]=d&67108863;for(;T!==0&&U<x.length;U++)d=(x.words[U]|0)+T,T=d>>26,this.words[U]=d&67108863;if(T===0&&U<x.length&&x!==this)for(;U<x.length;U++)this.words[U]=x.words[U];return this.length=Math.max(this.length,U),x!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function F(y,a,d){d.negative=a.negative^y.negative;var m=y.length+a.length|0;d.length=m,m=m-1|0;var x=y.words[0]|0,I=a.words[0]|0,T=x*I,U=T&67108863,_=T/67108864|0;d.words[0]=U;for(var u=1;u<m;u++){for(var l=_>>>26,b=_&67108863,R=Math.min(u,a.length-1),P=Math.max(0,u-y.length+1);P<=R;P++){var G=u-P|0;x=y.words[G]|0,I=a.words[P]|0,T=x*I+b,l+=T/67108864|0,b=T&67108863}d.words[u]=b|0,_=l|0}return _!==0?d.words[u]=_|0:d.length--,d._strip()}var H=function(a,d,m){var x=a.words,I=d.words,T=m.words,U=0,_,u,l,b=x[0]|0,R=b&8191,P=b>>>13,G=x[1]|0,et=G&8191,st=G>>>13,wt=x[2]|0,bt=wt&8191,Et=wt>>>13,Me=x[3]|0,St=Me&8191,Ut=Me>>>13,$r=x[4]|0,It=$r&8191,Ft=$r>>>13,Hr=x[5]|0,Tt=Hr&8191,At=Hr>>>13,ke=x[6]|0,Rt=ke&8191,Ot=ke>>>13,qe=x[7]|0,Nt=qe&8191,w=qe>>>13,h=x[8]|0,p=h&8191,k=h>>>13,q=x[9]|0,z=q&8191,W=q>>>13,dt=I[0]|0,ht=dt&8191,lt=dt>>>13,kt=I[1]|0,ft=kt&8191,zt=kt>>>13,yo=I[2]|0,Kt=yo&8191,$t=yo>>>13,wo=I[3]|0,Ht=wo&8191,Vt=wo>>>13,bo=I[4]|0,jt=bo&8191,Wt=bo>>>13,vo=I[5]|0,Gt=vo&8191,Zt=vo>>>13,_o=I[6]|0,Yt=_o&8191,Xt=_o>>>13,xo=I[7]|0,Jt=xo&8191,Qt=xo>>>13,Eo=I[8]|0,te=Eo&8191,ee=Eo>>>13,So=I[9]|0,ne=So&8191,re=So>>>13;m.negative=a.negative^d.negative,m.length=19,_=Math.imul(R,ht),u=Math.imul(R,lt),u=u+Math.imul(P,ht)|0,l=Math.imul(P,lt);var Oi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Oi>>>26)|0,Oi&=67108863,_=Math.imul(et,ht),u=Math.imul(et,lt),u=u+Math.imul(st,ht)|0,l=Math.imul(st,lt),_=_+Math.imul(R,ft)|0,u=u+Math.imul(R,zt)|0,u=u+Math.imul(P,ft)|0,l=l+Math.imul(P,zt)|0;var Ni=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Ni>>>26)|0,Ni&=67108863,_=Math.imul(bt,ht),u=Math.imul(bt,lt),u=u+Math.imul(Et,ht)|0,l=Math.imul(Et,lt),_=_+Math.imul(et,ft)|0,u=u+Math.imul(et,zt)|0,u=u+Math.imul(st,ft)|0,l=l+Math.imul(st,zt)|0,_=_+Math.imul(R,Kt)|0,u=u+Math.imul(R,$t)|0,u=u+Math.imul(P,Kt)|0,l=l+Math.imul(P,$t)|0;var qi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(qi>>>26)|0,qi&=67108863,_=Math.imul(St,ht),u=Math.imul(St,lt),u=u+Math.imul(Ut,ht)|0,l=Math.imul(Ut,lt),_=_+Math.imul(bt,ft)|0,u=u+Math.imul(bt,zt)|0,u=u+Math.imul(Et,ft)|0,l=l+Math.imul(Et,zt)|0,_=_+Math.imul(et,Kt)|0,u=u+Math.imul(et,$t)|0,u=u+Math.imul(st,Kt)|0,l=l+Math.imul(st,$t)|0,_=_+Math.imul(R,Ht)|0,u=u+Math.imul(R,Vt)|0,u=u+Math.imul(P,Ht)|0,l=l+Math.imul(P,Vt)|0;var Pi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Pi>>>26)|0,Pi&=67108863,_=Math.imul(It,ht),u=Math.imul(It,lt),u=u+Math.imul(Ft,ht)|0,l=Math.imul(Ft,lt),_=_+Math.imul(St,ft)|0,u=u+Math.imul(St,zt)|0,u=u+Math.imul(Ut,ft)|0,l=l+Math.imul(Ut,zt)|0,_=_+Math.imul(bt,Kt)|0,u=u+Math.imul(bt,$t)|0,u=u+Math.imul(Et,Kt)|0,l=l+Math.imul(Et,$t)|0,_=_+Math.imul(et,Ht)|0,u=u+Math.imul(et,Vt)|0,u=u+Math.imul(st,Ht)|0,l=l+Math.imul(st,Vt)|0,_=_+Math.imul(R,jt)|0,u=u+Math.imul(R,Wt)|0,u=u+Math.imul(P,jt)|0,l=l+Math.imul(P,Wt)|0;var Di=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Di>>>26)|0,Di&=67108863,_=Math.imul(Tt,ht),u=Math.imul(Tt,lt),u=u+Math.imul(At,ht)|0,l=Math.imul(At,lt),_=_+Math.imul(It,ft)|0,u=u+Math.imul(It,zt)|0,u=u+Math.imul(Ft,ft)|0,l=l+Math.imul(Ft,zt)|0,_=_+Math.imul(St,Kt)|0,u=u+Math.imul(St,$t)|0,u=u+Math.imul(Ut,Kt)|0,l=l+Math.imul(Ut,$t)|0,_=_+Math.imul(bt,Ht)|0,u=u+Math.imul(bt,Vt)|0,u=u+Math.imul(Et,Ht)|0,l=l+Math.imul(Et,Vt)|0,_=_+Math.imul(et,jt)|0,u=u+Math.imul(et,Wt)|0,u=u+Math.imul(st,jt)|0,l=l+Math.imul(st,Wt)|0,_=_+Math.imul(R,Gt)|0,u=u+Math.imul(R,Zt)|0,u=u+Math.imul(P,Gt)|0,l=l+Math.imul(P,Zt)|0;var zi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(zi>>>26)|0,zi&=67108863,_=Math.imul(Rt,ht),u=Math.imul(Rt,lt),u=u+Math.imul(Ot,ht)|0,l=Math.imul(Ot,lt),_=_+Math.imul(Tt,ft)|0,u=u+Math.imul(Tt,zt)|0,u=u+Math.imul(At,ft)|0,l=l+Math.imul(At,zt)|0,_=_+Math.imul(It,Kt)|0,u=u+Math.imul(It,$t)|0,u=u+Math.imul(Ft,Kt)|0,l=l+Math.imul(Ft,$t)|0,_=_+Math.imul(St,Ht)|0,u=u+Math.imul(St,Vt)|0,u=u+Math.imul(Ut,Ht)|0,l=l+Math.imul(Ut,Vt)|0,_=_+Math.imul(bt,jt)|0,u=u+Math.imul(bt,Wt)|0,u=u+Math.imul(Et,jt)|0,l=l+Math.imul(Et,Wt)|0,_=_+Math.imul(et,Gt)|0,u=u+Math.imul(et,Zt)|0,u=u+Math.imul(st,Gt)|0,l=l+Math.imul(st,Zt)|0,_=_+Math.imul(R,Yt)|0,u=u+Math.imul(R,Xt)|0,u=u+Math.imul(P,Yt)|0,l=l+Math.imul(P,Xt)|0;var Ki=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Ki>>>26)|0,Ki&=67108863,_=Math.imul(Nt,ht),u=Math.imul(Nt,lt),u=u+Math.imul(w,ht)|0,l=Math.imul(w,lt),_=_+Math.imul(Rt,ft)|0,u=u+Math.imul(Rt,zt)|0,u=u+Math.imul(Ot,ft)|0,l=l+Math.imul(Ot,zt)|0,_=_+Math.imul(Tt,Kt)|0,u=u+Math.imul(Tt,$t)|0,u=u+Math.imul(At,Kt)|0,l=l+Math.imul(At,$t)|0,_=_+Math.imul(It,Ht)|0,u=u+Math.imul(It,Vt)|0,u=u+Math.imul(Ft,Ht)|0,l=l+Math.imul(Ft,Vt)|0,_=_+Math.imul(St,jt)|0,u=u+Math.imul(St,Wt)|0,u=u+Math.imul(Ut,jt)|0,l=l+Math.imul(Ut,Wt)|0,_=_+Math.imul(bt,Gt)|0,u=u+Math.imul(bt,Zt)|0,u=u+Math.imul(Et,Gt)|0,l=l+Math.imul(Et,Zt)|0,_=_+Math.imul(et,Yt)|0,u=u+Math.imul(et,Xt)|0,u=u+Math.imul(st,Yt)|0,l=l+Math.imul(st,Xt)|0,_=_+Math.imul(R,Jt)|0,u=u+Math.imul(R,Qt)|0,u=u+Math.imul(P,Jt)|0,l=l+Math.imul(P,Qt)|0;var $i=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+($i>>>26)|0,$i&=67108863,_=Math.imul(p,ht),u=Math.imul(p,lt),u=u+Math.imul(k,ht)|0,l=Math.imul(k,lt),_=_+Math.imul(Nt,ft)|0,u=u+Math.imul(Nt,zt)|0,u=u+Math.imul(w,ft)|0,l=l+Math.imul(w,zt)|0,_=_+Math.imul(Rt,Kt)|0,u=u+Math.imul(Rt,$t)|0,u=u+Math.imul(Ot,Kt)|0,l=l+Math.imul(Ot,$t)|0,_=_+Math.imul(Tt,Ht)|0,u=u+Math.imul(Tt,Vt)|0,u=u+Math.imul(At,Ht)|0,l=l+Math.imul(At,Vt)|0,_=_+Math.imul(It,jt)|0,u=u+Math.imul(It,Wt)|0,u=u+Math.imul(Ft,jt)|0,l=l+Math.imul(Ft,Wt)|0,_=_+Math.imul(St,Gt)|0,u=u+Math.imul(St,Zt)|0,u=u+Math.imul(Ut,Gt)|0,l=l+Math.imul(Ut,Zt)|0,_=_+Math.imul(bt,Yt)|0,u=u+Math.imul(bt,Xt)|0,u=u+Math.imul(Et,Yt)|0,l=l+Math.imul(Et,Xt)|0,_=_+Math.imul(et,Jt)|0,u=u+Math.imul(et,Qt)|0,u=u+Math.imul(st,Jt)|0,l=l+Math.imul(st,Qt)|0,_=_+Math.imul(R,te)|0,u=u+Math.imul(R,ee)|0,u=u+Math.imul(P,te)|0,l=l+Math.imul(P,ee)|0;var Hi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Hi>>>26)|0,Hi&=67108863,_=Math.imul(z,ht),u=Math.imul(z,lt),u=u+Math.imul(W,ht)|0,l=Math.imul(W,lt),_=_+Math.imul(p,ft)|0,u=u+Math.imul(p,zt)|0,u=u+Math.imul(k,ft)|0,l=l+Math.imul(k,zt)|0,_=_+Math.imul(Nt,Kt)|0,u=u+Math.imul(Nt,$t)|0,u=u+Math.imul(w,Kt)|0,l=l+Math.imul(w,$t)|0,_=_+Math.imul(Rt,Ht)|0,u=u+Math.imul(Rt,Vt)|0,u=u+Math.imul(Ot,Ht)|0,l=l+Math.imul(Ot,Vt)|0,_=_+Math.imul(Tt,jt)|0,u=u+Math.imul(Tt,Wt)|0,u=u+Math.imul(At,jt)|0,l=l+Math.imul(At,Wt)|0,_=_+Math.imul(It,Gt)|0,u=u+Math.imul(It,Zt)|0,u=u+Math.imul(Ft,Gt)|0,l=l+Math.imul(Ft,Zt)|0,_=_+Math.imul(St,Yt)|0,u=u+Math.imul(St,Xt)|0,u=u+Math.imul(Ut,Yt)|0,l=l+Math.imul(Ut,Xt)|0,_=_+Math.imul(bt,Jt)|0,u=u+Math.imul(bt,Qt)|0,u=u+Math.imul(Et,Jt)|0,l=l+Math.imul(Et,Qt)|0,_=_+Math.imul(et,te)|0,u=u+Math.imul(et,ee)|0,u=u+Math.imul(st,te)|0,l=l+Math.imul(st,ee)|0,_=_+Math.imul(R,ne)|0,u=u+Math.imul(R,re)|0,u=u+Math.imul(P,ne)|0,l=l+Math.imul(P,re)|0;var Vi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Vi>>>26)|0,Vi&=67108863,_=Math.imul(z,ft),u=Math.imul(z,zt),u=u+Math.imul(W,ft)|0,l=Math.imul(W,zt),_=_+Math.imul(p,Kt)|0,u=u+Math.imul(p,$t)|0,u=u+Math.imul(k,Kt)|0,l=l+Math.imul(k,$t)|0,_=_+Math.imul(Nt,Ht)|0,u=u+Math.imul(Nt,Vt)|0,u=u+Math.imul(w,Ht)|0,l=l+Math.imul(w,Vt)|0,_=_+Math.imul(Rt,jt)|0,u=u+Math.imul(Rt,Wt)|0,u=u+Math.imul(Ot,jt)|0,l=l+Math.imul(Ot,Wt)|0,_=_+Math.imul(Tt,Gt)|0,u=u+Math.imul(Tt,Zt)|0,u=u+Math.imul(At,Gt)|0,l=l+Math.imul(At,Zt)|0,_=_+Math.imul(It,Yt)|0,u=u+Math.imul(It,Xt)|0,u=u+Math.imul(Ft,Yt)|0,l=l+Math.imul(Ft,Xt)|0,_=_+Math.imul(St,Jt)|0,u=u+Math.imul(St,Qt)|0,u=u+Math.imul(Ut,Jt)|0,l=l+Math.imul(Ut,Qt)|0,_=_+Math.imul(bt,te)|0,u=u+Math.imul(bt,ee)|0,u=u+Math.imul(Et,te)|0,l=l+Math.imul(Et,ee)|0,_=_+Math.imul(et,ne)|0,u=u+Math.imul(et,re)|0,u=u+Math.imul(st,ne)|0,l=l+Math.imul(st,re)|0;var ji=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(ji>>>26)|0,ji&=67108863,_=Math.imul(z,Kt),u=Math.imul(z,$t),u=u+Math.imul(W,Kt)|0,l=Math.imul(W,$t),_=_+Math.imul(p,Ht)|0,u=u+Math.imul(p,Vt)|0,u=u+Math.imul(k,Ht)|0,l=l+Math.imul(k,Vt)|0,_=_+Math.imul(Nt,jt)|0,u=u+Math.imul(Nt,Wt)|0,u=u+Math.imul(w,jt)|0,l=l+Math.imul(w,Wt)|0,_=_+Math.imul(Rt,Gt)|0,u=u+Math.imul(Rt,Zt)|0,u=u+Math.imul(Ot,Gt)|0,l=l+Math.imul(Ot,Zt)|0,_=_+Math.imul(Tt,Yt)|0,u=u+Math.imul(Tt,Xt)|0,u=u+Math.imul(At,Yt)|0,l=l+Math.imul(At,Xt)|0,_=_+Math.imul(It,Jt)|0,u=u+Math.imul(It,Qt)|0,u=u+Math.imul(Ft,Jt)|0,l=l+Math.imul(Ft,Qt)|0,_=_+Math.imul(St,te)|0,u=u+Math.imul(St,ee)|0,u=u+Math.imul(Ut,te)|0,l=l+Math.imul(Ut,ee)|0,_=_+Math.imul(bt,ne)|0,u=u+Math.imul(bt,re)|0,u=u+Math.imul(Et,ne)|0,l=l+Math.imul(Et,re)|0;var Wi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Wi>>>26)|0,Wi&=67108863,_=Math.imul(z,Ht),u=Math.imul(z,Vt),u=u+Math.imul(W,Ht)|0,l=Math.imul(W,Vt),_=_+Math.imul(p,jt)|0,u=u+Math.imul(p,Wt)|0,u=u+Math.imul(k,jt)|0,l=l+Math.imul(k,Wt)|0,_=_+Math.imul(Nt,Gt)|0,u=u+Math.imul(Nt,Zt)|0,u=u+Math.imul(w,Gt)|0,l=l+Math.imul(w,Zt)|0,_=_+Math.imul(Rt,Yt)|0,u=u+Math.imul(Rt,Xt)|0,u=u+Math.imul(Ot,Yt)|0,l=l+Math.imul(Ot,Xt)|0,_=_+Math.imul(Tt,Jt)|0,u=u+Math.imul(Tt,Qt)|0,u=u+Math.imul(At,Jt)|0,l=l+Math.imul(At,Qt)|0,_=_+Math.imul(It,te)|0,u=u+Math.imul(It,ee)|0,u=u+Math.imul(Ft,te)|0,l=l+Math.imul(Ft,ee)|0,_=_+Math.imul(St,ne)|0,u=u+Math.imul(St,re)|0,u=u+Math.imul(Ut,ne)|0,l=l+Math.imul(Ut,re)|0;var Gi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Gi>>>26)|0,Gi&=67108863,_=Math.imul(z,jt),u=Math.imul(z,Wt),u=u+Math.imul(W,jt)|0,l=Math.imul(W,Wt),_=_+Math.imul(p,Gt)|0,u=u+Math.imul(p,Zt)|0,u=u+Math.imul(k,Gt)|0,l=l+Math.imul(k,Zt)|0,_=_+Math.imul(Nt,Yt)|0,u=u+Math.imul(Nt,Xt)|0,u=u+Math.imul(w,Yt)|0,l=l+Math.imul(w,Xt)|0,_=_+Math.imul(Rt,Jt)|0,u=u+Math.imul(Rt,Qt)|0,u=u+Math.imul(Ot,Jt)|0,l=l+Math.imul(Ot,Qt)|0,_=_+Math.imul(Tt,te)|0,u=u+Math.imul(Tt,ee)|0,u=u+Math.imul(At,te)|0,l=l+Math.imul(At,ee)|0,_=_+Math.imul(It,ne)|0,u=u+Math.imul(It,re)|0,u=u+Math.imul(Ft,ne)|0,l=l+Math.imul(Ft,re)|0;var Zi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Zi>>>26)|0,Zi&=67108863,_=Math.imul(z,Gt),u=Math.imul(z,Zt),u=u+Math.imul(W,Gt)|0,l=Math.imul(W,Zt),_=_+Math.imul(p,Yt)|0,u=u+Math.imul(p,Xt)|0,u=u+Math.imul(k,Yt)|0,l=l+Math.imul(k,Xt)|0,_=_+Math.imul(Nt,Jt)|0,u=u+Math.imul(Nt,Qt)|0,u=u+Math.imul(w,Jt)|0,l=l+Math.imul(w,Qt)|0,_=_+Math.imul(Rt,te)|0,u=u+Math.imul(Rt,ee)|0,u=u+Math.imul(Ot,te)|0,l=l+Math.imul(Ot,ee)|0,_=_+Math.imul(Tt,ne)|0,u=u+Math.imul(Tt,re)|0,u=u+Math.imul(At,ne)|0,l=l+Math.imul(At,re)|0;var Yi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Yi>>>26)|0,Yi&=67108863,_=Math.imul(z,Yt),u=Math.imul(z,Xt),u=u+Math.imul(W,Yt)|0,l=Math.imul(W,Xt),_=_+Math.imul(p,Jt)|0,u=u+Math.imul(p,Qt)|0,u=u+Math.imul(k,Jt)|0,l=l+Math.imul(k,Qt)|0,_=_+Math.imul(Nt,te)|0,u=u+Math.imul(Nt,ee)|0,u=u+Math.imul(w,te)|0,l=l+Math.imul(w,ee)|0,_=_+Math.imul(Rt,ne)|0,u=u+Math.imul(Rt,re)|0,u=u+Math.imul(Ot,ne)|0,l=l+Math.imul(Ot,re)|0;var Xi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Xi>>>26)|0,Xi&=67108863,_=Math.imul(z,Jt),u=Math.imul(z,Qt),u=u+Math.imul(W,Jt)|0,l=Math.imul(W,Qt),_=_+Math.imul(p,te)|0,u=u+Math.imul(p,ee)|0,u=u+Math.imul(k,te)|0,l=l+Math.imul(k,ee)|0,_=_+Math.imul(Nt,ne)|0,u=u+Math.imul(Nt,re)|0,u=u+Math.imul(w,ne)|0,l=l+Math.imul(w,re)|0;var Ji=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Ji>>>26)|0,Ji&=67108863,_=Math.imul(z,te),u=Math.imul(z,ee),u=u+Math.imul(W,te)|0,l=Math.imul(W,ee),_=_+Math.imul(p,ne)|0,u=u+Math.imul(p,re)|0,u=u+Math.imul(k,ne)|0,l=l+Math.imul(k,re)|0;var Qi=(U+_|0)+((u&8191)<<13)|0;U=(l+(u>>>13)|0)+(Qi>>>26)|0,Qi&=67108863,_=Math.imul(z,ne),u=Math.imul(z,re),u=u+Math.imul(W,ne)|0,l=Math.imul(W,re);var ts=(U+_|0)+((u&8191)<<13)|0;return U=(l+(u>>>13)|0)+(ts>>>26)|0,ts&=67108863,T[0]=Oi,T[1]=Ni,T[2]=qi,T[3]=Pi,T[4]=Di,T[5]=zi,T[6]=Ki,T[7]=$i,T[8]=Hi,T[9]=Vi,T[10]=ji,T[11]=Wi,T[12]=Gi,T[13]=Zi,T[14]=Yi,T[15]=Xi,T[16]=Ji,T[17]=Qi,T[18]=ts,U!==0&&(T[19]=U,m.length++),m};Math.imul||(H=F);function D(y,a,d){d.negative=a.negative^y.negative,d.length=y.length+a.length;for(var m=0,x=0,I=0;I<d.length-1;I++){var T=x;x=0;for(var U=m&67108863,_=Math.min(I,a.length-1),u=Math.max(0,I-y.length+1);u<=_;u++){var l=I-u,b=y.words[l]|0,R=a.words[u]|0,P=b*R,G=P&67108863;T=T+(P/67108864|0)|0,G=G+U|0,U=G&67108863,T=T+(G>>>26)|0,x+=T>>>26,T&=67108863}d.words[I]=U,m=T,T=x}return m!==0?d.words[I]=m:d.length--,d._strip()}function X(y,a,d){return D(y,a,d)}i.prototype.mulTo=function(a,d){var m,x=this.length+a.length;return this.length===10&&a.length===10?m=H(this,a,d):x<63?m=F(this,a,d):x<1024?m=D(this,a,d):m=X(this,a,d),m},i.prototype.mul=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),this.mulTo(a,d)},i.prototype.mulf=function(a){var d=new i(null);return d.words=new Array(this.length+a.length),X(this,a,d)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var d=a<0;d&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var m=0,x=0;x<this.length;x++){var I=(this.words[x]|0)*a,T=(I&67108863)+(m&67108863);m>>=26,m+=I/67108864|0,m+=T>>>26,this.words[x]=T&67108863}return m!==0&&(this.words[x]=m,this.length++),this.length=a===0?1:this.length,d?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var d=L(a);if(d.length===0)return new i(1);for(var m=this,x=0;x<d.length&&d[x]===0;x++,m=m.sqr());if(++x<d.length)for(var I=m.sqr();x<d.length;x++,I=I.sqr())d[x]!==0&&(m=m.mul(I));return m},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var d=a%26,m=(a-d)/26,x=67108863>>>26-d<<26-d,I;if(d!==0){var T=0;for(I=0;I<this.length;I++){var U=this.words[I]&x,_=(this.words[I]|0)-U<<d;this.words[I]=_|T,T=U>>>26-d}T&&(this.words[I]=T,this.length++)}if(m!==0){for(I=this.length-1;I>=0;I--)this.words[I+m]=this.words[I];for(I=0;I<m;I++)this.words[I]=0;this.length+=m}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,d,m){r(typeof a=="number"&&a>=0);var x;d?x=(d-d%26)/26:x=0;var I=a%26,T=Math.min((a-I)/26,this.length),U=67108863^67108863>>>I<<I,_=m;if(x-=T,x=Math.max(0,x),_){for(var u=0;u<T;u++)_.words[u]=this.words[u];_.length=T}if(T!==0)if(this.length>T)for(this.length-=T,u=0;u<this.length;u++)this.words[u]=this.words[u+T];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(l!==0||u>=x);u--){var b=this.words[u]|0;this.words[u]=l<<26-I|b>>>I,l=b&U}return _&&l!==0&&(_.words[_.length++]=l),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,d,m){return r(this.negative===0),this.iushrn(a,d,m)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var d=a%26,m=(a-d)/26,x=1<<d;if(this.length<=m)return!1;var I=this.words[m];return!!(I&x)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var d=a%26,m=(a-d)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=m)return this;if(d!==0&&m++,this.length=Math.min(m,this.length),d!==0){var x=67108863^67108863>>>d<<d;this.words[this.length-1]&=x}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,d,m){var x=a.length+m,I;this._expand(x);var T,U=0;for(I=0;I<a.length;I++){T=(this.words[I+m]|0)+U;var _=(a.words[I]|0)*d;T-=_&67108863,U=(T>>26)-(_/67108864|0),this.words[I+m]=T&67108863}for(;I<this.length-m;I++)T=(this.words[I+m]|0)+U,U=T>>26,this.words[I+m]=T&67108863;if(U===0)return this._strip();for(r(U===-1),U=0,I=0;I<this.length;I++)T=-(this.words[I]|0)+U,U=T>>26,this.words[I]=T&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,d){var m=this.length-a.length,x=this.clone(),I=a,T=I.words[I.length-1]|0,U=this._countBits(T);m=26-U,m!==0&&(I=I.ushln(m),x.iushln(m),T=I.words[I.length-1]|0);var _=x.length-I.length,u;if(d!=="mod"){u=new i(null),u.length=_+1,u.words=new Array(u.length);for(var l=0;l<u.length;l++)u.words[l]=0}var b=x.clone()._ishlnsubmul(I,1,_);b.negative===0&&(x=b,u&&(u.words[_]=1));for(var R=_-1;R>=0;R--){var P=(x.words[I.length+R]|0)*67108864+(x.words[I.length+R-1]|0);for(P=Math.min(P/T|0,67108863),x._ishlnsubmul(I,P,R);x.negative!==0;)P--,x.negative=0,x._ishlnsubmul(I,1,R),x.isZero()||(x.negative^=1);u&&(u.words[R]=P)}return u&&u._strip(),x._strip(),d!=="div"&&m!==0&&x.iushrn(m),{div:u||null,mod:x}},i.prototype.divmod=function(a,d,m){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var x,I,T;return this.negative!==0&&a.negative===0?(T=this.neg().divmod(a,d),d!=="mod"&&(x=T.div.neg()),d!=="div"&&(I=T.mod.neg(),m&&I.negative!==0&&I.iadd(a)),{div:x,mod:I}):this.negative===0&&a.negative!==0?(T=this.divmod(a.neg(),d),d!=="mod"&&(x=T.div.neg()),{div:x,mod:T.mod}):(this.negative&a.negative)!==0?(T=this.neg().divmod(a.neg(),d),d!=="div"&&(I=T.mod.neg(),m&&I.negative!==0&&I.isub(a)),{div:T.div,mod:I}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?d==="div"?{div:this.divn(a.words[0]),mod:null}:d==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,d)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var d=this.divmod(a);if(d.mod.isZero())return d.div;var m=d.div.negative!==0?d.mod.isub(a):d.mod,x=a.ushrn(1),I=a.andln(1),T=m.cmp(x);return T<0||I===1&&T===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},i.prototype.modrn=function(a){var d=a<0;d&&(a=-a),r(a<=67108863);for(var m=(1<<26)%a,x=0,I=this.length-1;I>=0;I--)x=(m*x+(this.words[I]|0))%a;return d?-x:x},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var d=a<0;d&&(a=-a),r(a<=67108863);for(var m=0,x=this.length-1;x>=0;x--){var I=(this.words[x]|0)+m*67108864;this.words[x]=I/a|0,m=I%a}return this._strip(),d?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var d=this,m=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var x=new i(1),I=new i(0),T=new i(0),U=new i(1),_=0;d.isEven()&&m.isEven();)d.iushrn(1),m.iushrn(1),++_;for(var u=m.clone(),l=d.clone();!d.isZero();){for(var b=0,R=1;(d.words[0]&R)===0&&b<26;++b,R<<=1);if(b>0)for(d.iushrn(b);b-- >0;)(x.isOdd()||I.isOdd())&&(x.iadd(u),I.isub(l)),x.iushrn(1),I.iushrn(1);for(var P=0,G=1;(m.words[0]&G)===0&&P<26;++P,G<<=1);if(P>0)for(m.iushrn(P);P-- >0;)(T.isOdd()||U.isOdd())&&(T.iadd(u),U.isub(l)),T.iushrn(1),U.iushrn(1);d.cmp(m)>=0?(d.isub(m),x.isub(T),I.isub(U)):(m.isub(d),T.isub(x),U.isub(I))}return{a:T,b:U,gcd:m.iushln(_)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var d=this,m=a.clone();d.negative!==0?d=d.umod(a):d=d.clone();for(var x=new i(1),I=new i(0),T=m.clone();d.cmpn(1)>0&&m.cmpn(1)>0;){for(var U=0,_=1;(d.words[0]&_)===0&&U<26;++U,_<<=1);if(U>0)for(d.iushrn(U);U-- >0;)x.isOdd()&&x.iadd(T),x.iushrn(1);for(var u=0,l=1;(m.words[0]&l)===0&&u<26;++u,l<<=1);if(u>0)for(m.iushrn(u);u-- >0;)I.isOdd()&&I.iadd(T),I.iushrn(1);d.cmp(m)>=0?(d.isub(m),x.isub(I)):(m.isub(d),I.isub(x))}var b;return d.cmpn(1)===0?b=x:b=I,b.cmpn(0)<0&&b.iadd(a),b},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var d=this.clone(),m=a.clone();d.negative=0,m.negative=0;for(var x=0;d.isEven()&&m.isEven();x++)d.iushrn(1),m.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;m.isEven();)m.iushrn(1);var I=d.cmp(m);if(I<0){var T=d;d=m,m=T}else if(I===0||m.cmpn(1)===0)break;d.isub(m)}while(!0);return m.iushln(x)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var d=a%26,m=(a-d)/26,x=1<<d;if(this.length<=m)return this._expand(m+1),this.words[m]|=x,this;for(var I=x,T=m;I!==0&&T<this.length;T++){var U=this.words[T]|0;U+=I,I=U>>>26,U&=67108863,this.words[T]=U}return I!==0&&(this.words[T]=I,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var d=a<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var m;if(this.length>1)m=1;else{d&&(a=-a),r(a<=67108863,"Number is too big");var x=this.words[0]|0;m=x===a?0:x<a?-1:1}return this.negative!==0?-m|0:m},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var d=this.ucmp(a);return this.negative!==0?-d|0:d},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var d=0,m=this.length-1;m>=0;m--){var x=this.words[m]|0,I=a.words[m]|0;if(x!==I){x<I?d=-1:x>I&&(d=1);break}}return d},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new K(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var Z={k256:null,p224:null,p192:null,p25519:null};function Q(y,a){this.name=y,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Q.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},Q.prototype.ireduce=function(a){var d=a,m;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),m=d.bitLength();while(m>this.n);var x=m<this.n?-1:d.ucmp(this.p);return x===0?(d.words[0]=0,d.length=1):x>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},Q.prototype.split=function(a,d){a.iushrn(this.n,0,d)},Q.prototype.imulK=function(a){return a.imul(this.k)};function at(){Q.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(at,Q),at.prototype.split=function(a,d){for(var m=4194303,x=Math.min(a.length,9),I=0;I<x;I++)d.words[I]=a.words[I];if(d.length=x,a.length<=9){a.words[0]=0,a.length=1;return}var T=a.words[9];for(d.words[d.length++]=T&m,I=10;I<a.length;I++){var U=a.words[I]|0;a.words[I-10]=(U&m)<<4|T>>>22,T=U}T>>>=22,a.words[I-10]=T,T===0&&a.length>10?a.length-=10:a.length-=9},at.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var d=0,m=0;m<a.length;m++){var x=a.words[m]|0;d+=x*977,a.words[m]=d&67108863,d=x*64+(d/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function it(){Q.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(it,Q);function O(){Q.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(O,Q);function N(){Q.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(N,Q),N.prototype.imulK=function(a){for(var d=0,m=0;m<a.length;m++){var x=(a.words[m]|0)*19+d,I=x&67108863;x>>>=26,a.words[m]=I,d=x}return d!==0&&(a.words[a.length++]=d),a},i._prime=function(a){if(Z[a])return Z[a];var d;if(a==="k256")d=new at;else if(a==="p224")d=new it;else if(a==="p192")d=new O;else if(a==="p25519")d=new N;else throw new Error("Unknown prime "+a);return Z[a]=d,d};function K(y){if(typeof y=="string"){var a=i._prime(y);this.m=a.p,this.prime=a}else r(y.gtn(1),"modulus must be greater than 1"),this.m=y,this.prime=null}K.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},K.prototype._verify2=function(a,d){r((a.negative|d.negative)===0,"red works only with positives"),r(a.red&&a.red===d.red,"red works only with red numbers")},K.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(E(a,a.umod(this.m)._forceRed(this)),a)},K.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},K.prototype.add=function(a,d){this._verify2(a,d);var m=a.add(d);return m.cmp(this.m)>=0&&m.isub(this.m),m._forceRed(this)},K.prototype.iadd=function(a,d){this._verify2(a,d);var m=a.iadd(d);return m.cmp(this.m)>=0&&m.isub(this.m),m},K.prototype.sub=function(a,d){this._verify2(a,d);var m=a.sub(d);return m.cmpn(0)<0&&m.iadd(this.m),m._forceRed(this)},K.prototype.isub=function(a,d){this._verify2(a,d);var m=a.isub(d);return m.cmpn(0)<0&&m.iadd(this.m),m},K.prototype.shl=function(a,d){return this._verify1(a),this.imod(a.ushln(d))},K.prototype.imul=function(a,d){return this._verify2(a,d),this.imod(a.imul(d))},K.prototype.mul=function(a,d){return this._verify2(a,d),this.imod(a.mul(d))},K.prototype.isqr=function(a){return this.imul(a,a.clone())},K.prototype.sqr=function(a){return this.mul(a,a)},K.prototype.sqrt=function(a){if(a.isZero())return a.clone();var d=this.m.andln(3);if(r(d%2===1),d===3){var m=this.m.add(new i(1)).iushrn(2);return this.pow(a,m)}for(var x=this.m.subn(1),I=0;!x.isZero()&&x.andln(1)===0;)I++,x.iushrn(1);r(!x.isZero());var T=new i(1).toRed(this),U=T.redNeg(),_=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);this.pow(u,_).cmp(U)!==0;)u.redIAdd(U);for(var l=this.pow(u,x),b=this.pow(a,x.addn(1).iushrn(1)),R=this.pow(a,x),P=I;R.cmp(T)!==0;){for(var G=R,et=0;G.cmp(T)!==0;et++)G=G.redSqr();r(et<P);var st=this.pow(l,new i(1).iushln(P-et-1));b=b.redMul(st),l=st.redSqr(),R=R.redMul(l),P=et}return b},K.prototype.invm=function(a){var d=a._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},K.prototype.pow=function(a,d){if(d.isZero())return new i(1).toRed(this);if(d.cmpn(1)===0)return a.clone();var m=4,x=new Array(1<<m);x[0]=new i(1).toRed(this),x[1]=a;for(var I=2;I<x.length;I++)x[I]=this.mul(x[I-1],a);var T=x[0],U=0,_=0,u=d.bitLength()%26;for(u===0&&(u=26),I=d.length-1;I>=0;I--){for(var l=d.words[I],b=u-1;b>=0;b--){var R=l>>b&1;if(T!==x[0]&&(T=this.sqr(T)),R===0&&U===0){_=0;continue}U<<=1,U|=R,_++,!(_!==m&&(I!==0||b!==0))&&(T=this.mul(T,x[U]),_=0,U=0)}u=26}return T},K.prototype.convertTo=function(a){var d=a.umod(this.m);return d===a?d.clone():d},K.prototype.convertFrom=function(a){var d=a.clone();return d.red=null,d},i.mont=function(a){return new V(a)};function V(y){K.call(this,y),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(V,K),V.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},V.prototype.convertFrom=function(a){var d=this.imod(a.mul(this.rinv));return d.red=null,d},V.prototype.imul=function(a,d){if(a.isZero()||d.isZero())return a.words[0]=0,a.length=1,a;var m=a.imul(d),x=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=m.isub(x).iushrn(this.shift),T=I;return I.cmp(this.m)>=0?T=I.isub(this.m):I.cmpn(0)<0&&(T=I.iadd(this.m)),T._forceRed(this)},V.prototype.mul=function(a,d){if(a.isZero()||d.isZero())return new i(0)._forceRed(this);var m=a.mul(d),x=m.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=m.isub(x).iushrn(this.shift),T=I;return I.cmp(this.m)>=0?T=I.isub(this.m):I.cmpn(0)<0&&(T=I.iadd(this.m)),T._forceRed(this)},V.prototype.invm=function(a){var d=this.imod(a._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(n,$l)})(ri)),ri.exports}var Hl=$c();const na=ki(Hl);var Jr={exports:{}};var ra;function Vl(){return ra||(ra=1,(function(n,t){var e=to(),r=e.Buffer;function s(o,c){for(var f in o)c[f]=o[f]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(s(e,t),t.Buffer=i);function i(o,c,f){return r(o,c,f)}i.prototype=Object.create(r.prototype),s(r,i),i.from=function(o,c,f){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,c,f)},i.alloc=function(o,c,f){if(typeof o!="number")throw new TypeError("Argument must be a number");var g=r(o);return c!==void 0?typeof f=="string"?g.fill(c,f):g.fill(c):g.fill(0),g},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(Jr,Jr.exports)),Jr.exports}var fs,ia;function jl(){if(ia)return fs;ia=1;var n=Vl().Buffer;function t(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),c=o.charCodeAt(0);if(r[c]!==255)throw new TypeError(o+" is ambiguous");r[c]=i}var f=e.length,g=e.charAt(0),E=Math.log(f)/Math.log(256),A=Math.log(256)/Math.log(f);function B(M){if((Array.isArray(M)||M instanceof Uint8Array)&&(M=n.from(M)),!n.isBuffer(M))throw new TypeError("Expected Buffer");if(M.length===0)return"";for(var L=0,F=0,H=0,D=M.length;H!==D&&M[H]===0;)H++,L++;for(var X=(D-H)*A+1>>>0,Z=new Uint8Array(X);H!==D;){for(var Q=M[H],at=0,it=X-1;(Q!==0||at<F)&&it!==-1;it--,at++)Q+=256*Z[it]>>>0,Z[it]=Q%f>>>0,Q=Q/f>>>0;if(Q!==0)throw new Error("Non-zero carry");F=at,H++}for(var O=X-F;O!==X&&Z[O]===0;)O++;for(var N=g.repeat(L);O<X;++O)N+=e.charAt(Z[O]);return N}function v(M){if(typeof M!="string")throw new TypeError("Expected String");if(M.length===0)return n.alloc(0);for(var L=0,F=0,H=0;M[L]===g;)F++,L++;for(var D=(M.length-L)*E+1>>>0,X=new Uint8Array(D);L<M.length;){var Z=M.charCodeAt(L);if(Z>255)return;var Q=r[Z];if(Q===255)return;for(var at=0,it=D-1;(Q!==0||at<H)&&it!==-1;it--,at++)Q+=f*X[it]>>>0,X[it]=Q%256>>>0,Q=Q/256>>>0;if(Q!==0)throw new Error("Non-zero carry");H=at,L++}for(var O=D-H;O!==D&&X[O]===0;)O++;var N=n.allocUnsafe(F+(D-O));N.fill(0,0,F);for(var K=F;O!==D;)N[K++]=X[O++];return N}function S(M){var L=v(M);if(L)return L;throw new Error("Non-base"+f+" character")}return{encode:B,decodeUnsafe:v,decode:S}}return fs=t,fs}var ls,sa;function Hc(){if(sa)return ls;sa=1;var n=jl(),t="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return ls=n(t),ls}var Wl=Hc();const le=ki(Wl),oa=xc;var vt={};function en(n,t,e){return t<=n&&n<=e}function Ri(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function Gl(n){for(var t=String(n),e=t.length,r=0,s=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)s.push(65533);else{var o=n.charCodeAt(r+1);if(56320<=o&&o<=57343){var c=i&1023,f=o&1023;s.push(65536+(c<<10)+f),r+=1}else s.push(65533)}r+=1}return s}function Zl(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var di=-1;function ao(n){this.tokens=[].slice.call(n)}ao.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():di},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var hr=-1;function hs(n,t){if(n)throw TypeError("Decoder error");return t||65533}var pi="utf-8";function gi(n,t){if(!(this instanceof gi))return new gi(n,t);if(n=n!==void 0?String(n).toLowerCase():pi,n!==pi)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ri(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}gi.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=Ri(e),this._streaming||(this._decoder=new Yl({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new ao(r),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==hr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===hr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Zl(i)}};function mi(n,t){if(!(this instanceof mi))return new mi(n,t);if(n=n!==void 0?String(n).toLowerCase():pi,n!==pi)throw new Error("Encoding not supported. Only utf-8 is supported");t=Ri(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}mi.prototype={encode:function(t,e){t=t?String(t):"",e=Ri(e),this._streaming||(this._encoder=new Xl(this._options)),this._streaming=!!e.stream;for(var r=[],s=new ao(Gl(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==hr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==hr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Yl(n){var t=n.fatal,e=0,r=0,s=0,i=128,o=191;this.handler=function(c,f){if(f===di&&s!==0)return s=0,hs(t);if(f===di)return hr;if(s===0){if(en(f,0,127))return f;if(en(f,194,223))s=1,e=f-192;else if(en(f,224,239))f===224&&(i=160),f===237&&(o=159),s=2,e=f-224;else if(en(f,240,244))f===240&&(i=144),f===244&&(o=143),s=3,e=f-240;else return hs(t);return e=e<<6*s,null}if(!en(f,i,o))return e=s=r=0,i=128,o=191,c.prepend(f),hs(t);if(i=128,o=191,r+=1,e+=f-128<<6*(s-r),r!==s)return null;var g=e;return e=s=r=0,g}}function Xl(n){n.fatal,this.handler=function(t,e){if(e===di)return hr;if(en(e,0,127))return e;var r,s;en(e,128,2047)?(r=1,s=192):en(e,2048,65535)?(r=2,s=224):en(e,65536,1114111)&&(r=3,s=240);for(var i=[(e>>6*r)+s];r>0;){var o=e>>6*(r-1);i.push(128|o&63),r-=1}return i}}const Jl=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:gi,TextEncoder:mi},Symbol.toStringTag,{value:"Module"})),Ql=Qs(Jl);var aa;function th(){if(aa)return vt;aa=1;var n=vt&&vt.__createBinding||(Object.create?(function(O,N,K,V){V===void 0&&(V=K),Object.defineProperty(O,V,{enumerable:!0,get:function(){return N[K]}})}):(function(O,N,K,V){V===void 0&&(V=K),O[V]=N[K]})),t=vt&&vt.__setModuleDefault||(Object.create?(function(O,N){Object.defineProperty(O,"default",{enumerable:!0,value:N})}):function(O,N){O.default=N}),e=vt&&vt.__decorate||function(O,N,K,V){var y=arguments.length,a=y<3?N:V===null?V=Object.getOwnPropertyDescriptor(N,K):V,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(O,N,K,V);else for(var m=O.length-1;m>=0;m--)(d=O[m])&&(a=(y<3?d(a):y>3?d(N,K,a):d(N,K))||a);return y>3&&a&&Object.defineProperty(N,K,a),a},r=vt&&vt.__importStar||function(O){if(O&&O.__esModule)return O;var N={};if(O!=null)for(var K in O)K!=="default"&&Object.hasOwnProperty.call(O,K)&&n(N,O,K);return t(N,O),N},s=vt&&vt.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(vt,"__esModule",{value:!0}),vt.deserializeUnchecked=vt.deserialize=vt.serialize=vt.BinaryReader=vt.BinaryWriter=vt.BorshError=vt.baseDecode=vt.baseEncode=void 0;const i=s($c()),o=s(Hc()),c=r(Ql),f=typeof TextDecoder!="function"?c.TextDecoder:TextDecoder,g=new f("utf-8",{fatal:!0});function E(O){return typeof O=="string"&&(O=Buffer.from(O,"utf8")),o.default.encode(Buffer.from(O))}vt.baseEncode=E;function A(O){return Buffer.from(o.default.decode(O))}vt.baseDecode=A;const B=1024;class v extends Error{constructor(N){super(N),this.fieldPath=[],this.originalMessage=N}addToFieldPath(N){this.fieldPath.splice(0,0,N),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}vt.BorshError=v;class S{constructor(){this.buf=Buffer.alloc(B),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(B)]))}writeU8(N){this.maybeResize(),this.buf.writeUInt8(N,this.length),this.length+=1}writeU16(N){this.maybeResize(),this.buf.writeUInt16LE(N,this.length),this.length+=2}writeU32(N){this.maybeResize(),this.buf.writeUInt32LE(N,this.length),this.length+=4}writeU64(N){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(N).toArray("le",8)))}writeU128(N){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(N).toArray("le",16)))}writeU256(N){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(N).toArray("le",32)))}writeU512(N){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(N).toArray("le",64)))}writeBuffer(N){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),N,Buffer.alloc(B)]),this.length+=N.length}writeString(N){this.maybeResize();const K=Buffer.from(N,"utf8");this.writeU32(K.length),this.writeBuffer(K)}writeFixedArray(N){this.writeBuffer(Buffer.from(N))}writeArray(N,K){this.maybeResize(),this.writeU32(N.length);for(const V of N)this.maybeResize(),K(V)}toArray(){return this.buf.subarray(0,this.length)}}vt.BinaryWriter=S;function M(O,N,K){const V=K.value;K.value=function(...y){try{return V.apply(this,y)}catch(a){if(a instanceof RangeError){const d=a.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(d)>=0)throw new v("Reached the end of buffer when deserializing")}throw a}}}class L{constructor(N){this.buf=N,this.offset=0}readU8(){const N=this.buf.readUInt8(this.offset);return this.offset+=1,N}readU16(){const N=this.buf.readUInt16LE(this.offset);return this.offset+=2,N}readU32(){const N=this.buf.readUInt32LE(this.offset);return this.offset+=4,N}readU64(){const N=this.readBuffer(8);return new i.default(N,"le")}readU128(){const N=this.readBuffer(16);return new i.default(N,"le")}readU256(){const N=this.readBuffer(32);return new i.default(N,"le")}readU512(){const N=this.readBuffer(64);return new i.default(N,"le")}readBuffer(N){if(this.offset+N>this.buf.length)throw new v(`Expected buffer length ${N} isn't within bounds`);const K=this.buf.slice(this.offset,this.offset+N);return this.offset+=N,K}readString(){const N=this.readU32(),K=this.readBuffer(N);try{return g.decode(K)}catch(V){throw new v(`Error decoding UTF-8 string: ${V}`)}}readFixedArray(N){return new Uint8Array(this.readBuffer(N))}readArray(N){const K=this.readU32(),V=Array();for(let y=0;y<K;++y)V.push(N());return V}}e([M],L.prototype,"readU8",null),e([M],L.prototype,"readU16",null),e([M],L.prototype,"readU32",null),e([M],L.prototype,"readU64",null),e([M],L.prototype,"readU128",null),e([M],L.prototype,"readU256",null),e([M],L.prototype,"readU512",null),e([M],L.prototype,"readString",null),e([M],L.prototype,"readFixedArray",null),e([M],L.prototype,"readArray",null),vt.BinaryReader=L;function F(O){return O.charAt(0).toUpperCase()+O.slice(1)}function H(O,N,K,V,y){try{if(typeof V=="string")y[`write${F(V)}`](K);else if(V instanceof Array)if(typeof V[0]=="number"){if(K.length!==V[0])throw new v(`Expecting byte array of length ${V[0]}, but got ${K.length} bytes`);y.writeFixedArray(K)}else if(V.length===2&&typeof V[1]=="number"){if(K.length!==V[1])throw new v(`Expecting byte array of length ${V[1]}, but got ${K.length} bytes`);for(let a=0;a<V[1];a++)H(O,null,K[a],V[0],y)}else y.writeArray(K,a=>{H(O,N,a,V[0],y)});else if(V.kind!==void 0)switch(V.kind){case"option":{K==null?y.writeU8(0):(y.writeU8(1),H(O,N,K,V.type,y));break}case"map":{y.writeU32(K.size),K.forEach((a,d)=>{H(O,N,d,V.key,y),H(O,N,a,V.value,y)});break}default:throw new v(`FieldType ${V} unrecognized`)}else D(O,K,y)}catch(a){throw a instanceof v&&a.addToFieldPath(N),a}}function D(O,N,K){if(typeof N.borshSerialize=="function"){N.borshSerialize(K);return}const V=O.get(N.constructor);if(!V)throw new v(`Class ${N.constructor.name} is missing in schema`);if(V.kind==="struct")V.fields.map(([y,a])=>{H(O,y,N[y],a,K)});else if(V.kind==="enum"){const y=N[V.field];for(let a=0;a<V.values.length;++a){const[d,m]=V.values[a];if(d===y){K.writeU8(a),H(O,d,N[d],m,K);break}}}else throw new v(`Unexpected schema kind: ${V.kind} for ${N.constructor.name}`)}function X(O,N,K=S){const V=new K;return D(O,N,V),V.toArray()}vt.serialize=X;function Z(O,N,K,V){try{if(typeof K=="string")return V[`read${F(K)}`]();if(K instanceof Array){if(typeof K[0]=="number")return V.readFixedArray(K[0]);if(typeof K[1]=="number"){const y=[];for(let a=0;a<K[1];a++)y.push(Z(O,null,K[0],V));return y}else return V.readArray(()=>Z(O,N,K[0],V))}if(K.kind==="option")return V.readU8()?Z(O,N,K.type,V):void 0;if(K.kind==="map"){let y=new Map;const a=V.readU32();for(let d=0;d<a;d++){const m=Z(O,N,K.key,V),x=Z(O,N,K.value,V);y.set(m,x)}return y}return Q(O,K,V)}catch(y){throw y instanceof v&&y.addToFieldPath(N),y}}function Q(O,N,K){if(typeof N.borshDeserialize=="function")return N.borshDeserialize(K);const V=O.get(N);if(!V)throw new v(`Class ${N.name} is missing in schema`);if(V.kind==="struct"){const y={};for(const[a,d]of O.get(N).fields)y[a]=Z(O,a,d,K);return new N(y)}if(V.kind==="enum"){const y=K.readU8();if(y>=V.values.length)throw new v(`Enum index: ${y} is out of range`);const[a,d]=V.values[y],m=Z(O,a,d,K);return new N({[a]:m})}throw new v(`Unexpected schema kind: ${V.kind} for ${N.constructor.name}`)}function at(O,N,K,V=L){const y=new V(K),a=Q(O,N,y);if(y.offset<K.length)throw new v(`Unexpected ${K.length-y.offset} bytes after deserialized data`);return a}vt.deserialize=at;function it(O,N,K,V=L){const y=new V(K);return Q(O,N,y)}return vt.deserializeUnchecked=it,vt}var ds=th(),j={},ca;function eh(){if(ca)return j;ca=1,Object.defineProperty(j,"__esModule",{value:!0}),j.s16=j.s8=j.nu64be=j.u48be=j.u40be=j.u32be=j.u24be=j.u16be=j.nu64=j.u48=j.u40=j.u32=j.u24=j.u16=j.u8=j.offset=j.greedy=j.Constant=j.UTF8=j.CString=j.Blob=j.Boolean=j.BitField=j.BitStructure=j.VariantLayout=j.Union=j.UnionLayoutDiscriminator=j.UnionDiscriminator=j.Structure=j.Sequence=j.DoubleBE=j.Double=j.FloatBE=j.Float=j.NearInt64BE=j.NearInt64=j.NearUInt64BE=j.NearUInt64=j.IntBE=j.Int=j.UIntBE=j.UInt=j.OffsetLayout=j.GreedyCount=j.ExternalLayout=j.bindConstructorLayout=j.nameWithProperty=j.Layout=j.uint8ArrayToBuffer=j.checkUint8Array=void 0,j.constant=j.utf8=j.cstr=j.blob=j.unionLayoutDiscriminator=j.union=j.seq=j.bits=j.struct=j.f64be=j.f64=j.f32be=j.f32=j.ns64be=j.s48be=j.s40be=j.s32be=j.s24be=j.s16be=j.ns64=j.s48=j.s40=j.s32=j.s24=void 0;const n=to();function t(u){if(!(u instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}j.checkUint8Array=t;function e(u){return t(u),n.Buffer.from(u.buffer,u.byteOffset,u.length)}j.uint8ArrayToBuffer=e;let r=class{constructor(l,b){if(!Number.isInteger(l))throw new TypeError("span must be an integer");this.span=l,this.property=b}makeDestinationObject(){return{}}getSpan(l,b){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(l){const b=Object.create(this.constructor.prototype);return Object.assign(b,this),b.property=l,b}fromArray(l){}};j.Layout=r;function s(u,l){return l.property?u+"["+l.property+"]":u}j.nameWithProperty=s;function i(u,l){if(typeof u!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(u,"layout_"))throw new Error("Class is already bound to a layout");if(!(l&&l instanceof r))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(l,"boundConstructor_"))throw new Error("layout is already bound to a constructor");u.layout_=l,l.boundConstructor_=u,l.makeDestinationObject=(()=>new u),Object.defineProperty(u.prototype,"encode",{value(b,R){return l.encode(this,b,R)},writable:!0}),Object.defineProperty(u,"decode",{value(b,R){return l.decode(b,R)},writable:!0})}j.bindConstructorLayout=i;class o extends r{isCount(){throw new Error("ExternalLayout is abstract")}}j.ExternalLayout=o;class c extends o{constructor(l=1,b){if(!Number.isInteger(l)||0>=l)throw new TypeError("elementSpan must be a (positive) integer");super(-1,b),this.elementSpan=l}isCount(){return!0}decode(l,b=0){t(l);const R=l.length-b;return Math.floor(R/this.elementSpan)}encode(l,b,R){return 0}}j.GreedyCount=c;class f extends o{constructor(l,b=0,R){if(!(l instanceof r))throw new TypeError("layout must be a Layout");if(!Number.isInteger(b))throw new TypeError("offset must be integer or undefined");super(l.span,R||l.property),this.layout=l,this.offset=b}isCount(){return this.layout instanceof g||this.layout instanceof E}decode(l,b=0){return this.layout.decode(l,b+this.offset)}encode(l,b,R=0){return this.layout.encode(l,b,R+this.offset)}}j.OffsetLayout=f;class g extends r{constructor(l,b){if(super(l,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,b=0){return e(l).readUIntLE(b,this.span)}encode(l,b,R=0){return e(b).writeUIntLE(l,R,this.span),this.span}}j.UInt=g;class E extends r{constructor(l,b){if(super(l,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,b=0){return e(l).readUIntBE(b,this.span)}encode(l,b,R=0){return e(b).writeUIntBE(l,R,this.span),this.span}}j.UIntBE=E;class A extends r{constructor(l,b){if(super(l,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,b=0){return e(l).readIntLE(b,this.span)}encode(l,b,R=0){return e(b).writeIntLE(l,R,this.span),this.span}}j.Int=A;class B extends r{constructor(l,b){if(super(l,b),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,b=0){return e(l).readIntBE(b,this.span)}encode(l,b,R=0){return e(b).writeIntBE(l,R,this.span),this.span}}j.IntBE=B;const v=Math.pow(2,32);function S(u){const l=Math.floor(u/v),b=u-l*v;return{hi32:l,lo32:b}}function M(u,l){return u*v+l}class L extends r{constructor(l){super(8,l)}decode(l,b=0){const R=e(l),P=R.readUInt32LE(b),G=R.readUInt32LE(b+4);return M(G,P)}encode(l,b,R=0){const P=S(l),G=e(b);return G.writeUInt32LE(P.lo32,R),G.writeUInt32LE(P.hi32,R+4),8}}j.NearUInt64=L;class F extends r{constructor(l){super(8,l)}decode(l,b=0){const R=e(l),P=R.readUInt32BE(b),G=R.readUInt32BE(b+4);return M(P,G)}encode(l,b,R=0){const P=S(l),G=e(b);return G.writeUInt32BE(P.hi32,R),G.writeUInt32BE(P.lo32,R+4),8}}j.NearUInt64BE=F;class H extends r{constructor(l){super(8,l)}decode(l,b=0){const R=e(l),P=R.readUInt32LE(b),G=R.readInt32LE(b+4);return M(G,P)}encode(l,b,R=0){const P=S(l),G=e(b);return G.writeUInt32LE(P.lo32,R),G.writeInt32LE(P.hi32,R+4),8}}j.NearInt64=H;class D extends r{constructor(l){super(8,l)}decode(l,b=0){const R=e(l),P=R.readInt32BE(b),G=R.readUInt32BE(b+4);return M(P,G)}encode(l,b,R=0){const P=S(l),G=e(b);return G.writeInt32BE(P.hi32,R),G.writeUInt32BE(P.lo32,R+4),8}}j.NearInt64BE=D;class X extends r{constructor(l){super(4,l)}decode(l,b=0){return e(l).readFloatLE(b)}encode(l,b,R=0){return e(b).writeFloatLE(l,R),4}}j.Float=X;class Z extends r{constructor(l){super(4,l)}decode(l,b=0){return e(l).readFloatBE(b)}encode(l,b,R=0){return e(b).writeFloatBE(l,R),4}}j.FloatBE=Z;class Q extends r{constructor(l){super(8,l)}decode(l,b=0){return e(l).readDoubleLE(b)}encode(l,b,R=0){return e(b).writeDoubleLE(l,R),8}}j.Double=Q;class at extends r{constructor(l){super(8,l)}decode(l,b=0){return e(l).readDoubleBE(b)}encode(l,b,R=0){return e(b).writeDoubleBE(l,R),8}}j.DoubleBE=at;class it extends r{constructor(l,b,R){if(!(l instanceof r))throw new TypeError("elementLayout must be a Layout");if(!(b instanceof o&&b.isCount()||Number.isInteger(b)&&0<=b))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let P=-1;!(b instanceof o)&&0<l.span&&(P=b*l.span),super(P,R),this.elementLayout=l,this.count=b}getSpan(l,b=0){if(0<=this.span)return this.span;let R=0,P=this.count;if(P instanceof o&&(P=P.decode(l,b)),0<this.elementLayout.span)R=P*this.elementLayout.span;else{let G=0;for(;G<P;)R+=this.elementLayout.getSpan(l,b+R),++G}return R}decode(l,b=0){const R=[];let P=0,G=this.count;for(G instanceof o&&(G=G.decode(l,b));P<G;)R.push(this.elementLayout.decode(l,b)),b+=this.elementLayout.getSpan(l,b),P+=1;return R}encode(l,b,R=0){const P=this.elementLayout,G=l.reduce((et,st)=>et+P.encode(st,b,R+et),0);return this.count instanceof o&&this.count.encode(l.length,b,R),G}}j.Sequence=it;class O extends r{constructor(l,b,R){if(!(Array.isArray(l)&&l.reduce((G,et)=>G&&et instanceof r,!0)))throw new TypeError("fields must be array of Layout instances");typeof b=="boolean"&&R===void 0&&(R=b,b=void 0);for(const G of l)if(0>G.span&&G.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let P=-1;try{P=l.reduce((G,et)=>G+et.getSpan(),0)}catch{}super(P,b),this.fields=l,this.decodePrefixes=!!R}getSpan(l,b=0){if(0<=this.span)return this.span;let R=0;try{R=this.fields.reduce((P,G)=>{const et=G.getSpan(l,b);return b+=et,P+et},0)}catch{throw new RangeError("indeterminate span")}return R}decode(l,b=0){t(l);const R=this.makeDestinationObject();for(const P of this.fields)if(P.property!==void 0&&(R[P.property]=P.decode(l,b)),b+=P.getSpan(l,b),this.decodePrefixes&&l.length===b)break;return R}encode(l,b,R=0){const P=R;let G=0,et=0;for(const st of this.fields){let wt=st.span;if(et=0<wt?wt:0,st.property!==void 0){const bt=l[st.property];bt!==void 0&&(et=st.encode(bt,b,R),0>wt&&(wt=st.getSpan(b,R)))}G=R,R+=wt}return G+et-P}fromArray(l){const b=this.makeDestinationObject();for(const R of this.fields)R.property!==void 0&&0<l.length&&(b[R.property]=l.shift());return b}layoutFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const b of this.fields)if(b.property===l)return b}offsetOf(l){if(typeof l!="string")throw new TypeError("property must be string");let b=0;for(const R of this.fields){if(R.property===l)return b;0>R.span?b=-1:0<=b&&(b+=R.span)}}}j.Structure=O;class N{constructor(l){this.property=l}decode(l,b){throw new Error("UnionDiscriminator is abstract")}encode(l,b,R){throw new Error("UnionDiscriminator is abstract")}}j.UnionDiscriminator=N;class K extends N{constructor(l,b){if(!(l instanceof o&&l.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(b||l.property||"variant"),this.layout=l}decode(l,b){return this.layout.decode(l,b)}encode(l,b,R){return this.layout.encode(l,b,R)}}j.UnionLayoutDiscriminator=K;class V extends r{constructor(l,b,R){let P;if(l instanceof g||l instanceof E)P=new K(new f(l));else if(l instanceof o&&l.isCount())P=new K(l);else if(l instanceof N)P=l;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(b===void 0&&(b=null),!(b===null||b instanceof r))throw new TypeError("defaultLayout must be null or a Layout");if(b!==null){if(0>b.span)throw new Error("defaultLayout must have constant span");b.property===void 0&&(b=b.replicate("content"))}let G=-1;b&&(G=b.span,0<=G&&(l instanceof g||l instanceof E)&&(G+=P.layout.span)),super(G,R),this.discriminator=P,this.usesPrefixDiscriminator=l instanceof g||l instanceof E,this.defaultLayout=b,this.registry={};let et=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(st){return et(st)},this.configGetSourceVariant=function(st){et=st.bind(this)}}getSpan(l,b=0){if(0<=this.span)return this.span;const R=this.getVariant(l,b);if(!R)throw new Error("unable to determine span for unrecognized variant");return R.getSpan(l,b)}defaultGetSourceVariant(l){if(Object.prototype.hasOwnProperty.call(l,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(l,this.defaultLayout.property))return;const b=this.registry[l[this.discriminator.property]];if(b&&(!b.layout||b.property&&Object.prototype.hasOwnProperty.call(l,b.property)))return b}else for(const b in this.registry){const R=this.registry[b];if(R.property&&Object.prototype.hasOwnProperty.call(l,R.property))return R}throw new Error("unable to infer src variant")}decode(l,b=0){let R;const P=this.discriminator,G=P.decode(l,b),et=this.registry[G];if(et===void 0){const st=this.defaultLayout;let wt=0;this.usesPrefixDiscriminator&&(wt=P.layout.span),R=this.makeDestinationObject(),R[P.property]=G,R[st.property]=st.decode(l,b+wt)}else R=et.decode(l,b);return R}encode(l,b,R=0){const P=this.getSourceVariant(l);if(P===void 0){const G=this.discriminator,et=this.defaultLayout;let st=0;return this.usesPrefixDiscriminator&&(st=G.layout.span),G.encode(l[G.property],b,R),st+et.encode(l[et.property],b,R+st)}return P.encode(l,b,R)}addVariant(l,b,R){const P=new y(this,l,b,R);return this.registry[l]=P,P}getVariant(l,b=0){let R;return l instanceof Uint8Array?R=this.discriminator.decode(l,b):R=l,this.registry[R]}}j.Union=V;class y extends r{constructor(l,b,R,P){if(!(l instanceof V))throw new TypeError("union must be a Union");if(!Number.isInteger(b)||0>b)throw new TypeError("variant must be a (non-negative) integer");if(typeof R=="string"&&P===void 0&&(P=R,R=null),R){if(!(R instanceof r))throw new TypeError("layout must be a Layout");if(l.defaultLayout!==null&&0<=R.span&&R.span>l.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof P!="string")throw new TypeError("variant must have a String property")}let G=l.span;0>l.span&&(G=R?R.span:0,0<=G&&l.usesPrefixDiscriminator&&(G+=l.discriminator.layout.span)),super(G,P),this.union=l,this.variant=b,this.layout=R||null}getSpan(l,b=0){if(0<=this.span)return this.span;let R=0;this.union.usesPrefixDiscriminator&&(R=this.union.discriminator.layout.span);let P=0;return this.layout&&(P=this.layout.getSpan(l,b+R)),R+P}decode(l,b=0){const R=this.makeDestinationObject();if(this!==this.union.getVariant(l,b))throw new Error("variant mismatch");let P=0;return this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout?R[this.property]=this.layout.decode(l,b+P):this.property?R[this.property]=!0:this.union.usesPrefixDiscriminator&&(R[this.union.discriminator.property]=this.variant),R}encode(l,b,R=0){let P=0;if(this.union.usesPrefixDiscriminator&&(P=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(l,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,b,R);let G=P;if(this.layout&&(this.layout.encode(l[this.property],b,R+P),G+=this.layout.getSpan(b,R+P),0<=this.union.span&&G>this.union.span))throw new Error("encoded variant overruns containing union");return G}fromArray(l){if(this.layout)return this.layout.fromArray(l)}}j.VariantLayout=y;function a(u){return 0>u&&(u+=4294967296),u}class d extends r{constructor(l,b,R){if(!(l instanceof g||l instanceof E))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof b=="string"&&R===void 0&&(R=b,b=!1),4<l.span)throw new RangeError("word cannot exceed 32 bits");super(l.span,R),this.word=l,this.msb=!!b,this.fields=[];let P=0;this._packedSetValue=function(G){return P=a(G),this},this._packedGetValue=function(){return P}}decode(l,b=0){const R=this.makeDestinationObject(),P=this.word.decode(l,b);this._packedSetValue(P);for(const G of this.fields)G.property!==void 0&&(R[G.property]=G.decode(l));return R}encode(l,b,R=0){const P=this.word.decode(b,R);this._packedSetValue(P);for(const G of this.fields)if(G.property!==void 0){const et=l[G.property];et!==void 0&&G.encode(et)}return this.word.encode(this._packedGetValue(),b,R)}addField(l,b){const R=new m(this,l,b);return this.fields.push(R),R}addBoolean(l){const b=new x(this,l);return this.fields.push(b),b}fieldFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const b of this.fields)if(b.property===l)return b}}j.BitStructure=d;class m{constructor(l,b,R){if(!(l instanceof d))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(b)||0>=b)throw new TypeError("bits must be positive integer");const P=8*l.span,G=l.fields.reduce((et,st)=>et+st.bits,0);if(b+G>P)throw new Error("bits too long for span remainder ("+(P-G)+" of "+P+" remain)");this.container=l,this.bits=b,this.valueMask=(1<<b)-1,b===32&&(this.valueMask=4294967295),this.start=G,this.container.msb&&(this.start=P-G-b),this.wordMask=a(this.valueMask<<this.start),this.property=R}decode(l,b){const R=this.container._packedGetValue();return a(R&this.wordMask)>>>this.start}encode(l){if(typeof l!="number"||!Number.isInteger(l)||l!==a(l&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const b=this.container._packedGetValue(),R=a(l<<this.start);this.container._packedSetValue(a(b&~this.wordMask)|R)}}j.BitField=m;class x extends m{constructor(l,b){super(l,1,b)}decode(l,b){return!!super.decode(l,b)}encode(l){typeof l=="boolean"&&(l=+l),super.encode(l)}}j.Boolean=x;class I extends r{constructor(l,b){if(!(l instanceof o&&l.isCount()||Number.isInteger(l)&&0<=l))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let R=-1;l instanceof o||(R=l),super(R,b),this.length=l}getSpan(l,b){let R=this.span;return 0>R&&(R=this.length.decode(l,b)),R}decode(l,b=0){let R=this.span;return 0>R&&(R=this.length.decode(l,b)),e(l).slice(b,b+R)}encode(l,b,R){let P=this.length;if(this.length instanceof o&&(P=l.length),!(l instanceof Uint8Array&&P===l.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+P+") Uint8Array as src");if(R+P>b.length)throw new RangeError("encoding overruns Uint8Array");const G=e(l);return e(b).write(G.toString("hex"),R,P,"hex"),this.length instanceof o&&this.length.encode(P,b,R),P}}j.Blob=I;class T extends r{constructor(l){super(-1,l)}getSpan(l,b=0){t(l);let R=b;for(;R<l.length&&l[R]!==0;)R+=1;return 1+R-b}decode(l,b=0){const R=this.getSpan(l,b);return e(l).slice(b,b+R-1).toString("utf-8")}encode(l,b,R=0){typeof l!="string"&&(l=String(l));const P=n.Buffer.from(l,"utf8"),G=P.length;if(R+G>b.length)throw new RangeError("encoding overruns Buffer");const et=e(b);return P.copy(et,R),et[R+G]=0,G+1}}j.CString=T;class U extends r{constructor(l,b){if(typeof l=="string"&&b===void 0&&(b=l,l=void 0),l===void 0)l=-1;else if(!Number.isInteger(l))throw new TypeError("maxSpan must be an integer");super(-1,b),this.maxSpan=l}getSpan(l,b=0){return t(l),l.length-b}decode(l,b=0){const R=this.getSpan(l,b);if(0<=this.maxSpan&&this.maxSpan<R)throw new RangeError("text length exceeds maxSpan");return e(l).slice(b,b+R).toString("utf-8")}encode(l,b,R=0){typeof l!="string"&&(l=String(l));const P=n.Buffer.from(l,"utf8"),G=P.length;if(0<=this.maxSpan&&this.maxSpan<G)throw new RangeError("text length exceeds maxSpan");if(R+G>b.length)throw new RangeError("encoding overruns Buffer");return P.copy(e(b),R),G}}j.UTF8=U;class _ extends r{constructor(l,b){super(0,b),this.value=l}decode(l,b){return this.value}encode(l,b,R){return 0}}return j.Constant=_,j.greedy=((u,l)=>new c(u,l)),j.offset=((u,l,b)=>new f(u,l,b)),j.u8=(u=>new g(1,u)),j.u16=(u=>new g(2,u)),j.u24=(u=>new g(3,u)),j.u32=(u=>new g(4,u)),j.u40=(u=>new g(5,u)),j.u48=(u=>new g(6,u)),j.nu64=(u=>new L(u)),j.u16be=(u=>new E(2,u)),j.u24be=(u=>new E(3,u)),j.u32be=(u=>new E(4,u)),j.u40be=(u=>new E(5,u)),j.u48be=(u=>new E(6,u)),j.nu64be=(u=>new F(u)),j.s8=(u=>new A(1,u)),j.s16=(u=>new A(2,u)),j.s24=(u=>new A(3,u)),j.s32=(u=>new A(4,u)),j.s40=(u=>new A(5,u)),j.s48=(u=>new A(6,u)),j.ns64=(u=>new H(u)),j.s16be=(u=>new B(2,u)),j.s24be=(u=>new B(3,u)),j.s32be=(u=>new B(4,u)),j.s40be=(u=>new B(5,u)),j.s48be=(u=>new B(6,u)),j.ns64be=(u=>new D(u)),j.f32=(u=>new X(u)),j.f32be=(u=>new Z(u)),j.f64=(u=>new Q(u)),j.f64be=(u=>new at(u)),j.struct=((u,l,b)=>new O(u,l,b)),j.bits=((u,l,b)=>new d(u,l,b)),j.seq=((u,l,b)=>new it(u,l,b)),j.union=((u,l,b)=>new V(u,l,b)),j.unionLayoutDiscriminator=((u,l)=>new K(u,l)),j.blob=((u,l)=>new I(u,l)),j.cstr=(u=>new T(u)),j.utf8=((u,l)=>new U(u,l)),j.constant=((u,l)=>new _(u,l)),j}var C=eh(),nh=8078e3,rh=8078001,ih=8078004,sh=8078005,oh=8078006,ah=8078011;function Vc(n){return Array.isArray(n)?"%5B"+n.map(Vc).join("%2C%20")+"%5D":typeof n=="bigint"?`${n}n`:encodeURIComponent(String(n!=null&&Object.getPrototypeOf(n)===null?{...n}:n))}function ch([n,t]){return`${n}=${Vc(t)}`}function uh(n){const t=Object.entries(n).map(ch).join("&");return btoa(t)}function fh(n,t={}){{let e=`Solana error #${n}; Decode this error by running \`npx @solana/errors decode -- ${n}`;return Object.keys(t).length&&(e+=` '${uh(t)}'`),`${e}\``}}var nr=class extends Error{cause=this.cause;context;constructor(...[n,t]){let e,r;if(t){const{cause:i,...o}=t;i&&(r={cause:i}),Object.keys(o).length>0&&(e=o)}const s=fh(n,e);super(s,r),this.context={__code:n,...e},this.name="SolanaError"}};function lh(n,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(n)}function hh(n){return Object.freeze({...n,encode:t=>{const e=new Uint8Array(lh(t,n));return n.write(t,e,0),e}})}function dh(n){return Object.freeze({...n,decode:(t,e=0)=>n.read(t,e)[0]})}function Xn(n){return"fixedSize"in n&&typeof n.fixedSize=="number"}function ph(n,t){if(Xn(n)!==Xn(t))throw new nr(ih);if(Xn(n)&&Xn(t)&&n.fixedSize!==t.fixedSize)throw new nr(sh,{decoderFixedSize:t.fixedSize,encoderFixedSize:n.fixedSize});if(!Xn(n)&&!Xn(t)&&n.maxSize!==t.maxSize)throw new nr(oh,{decoderMaxSize:t.maxSize,encoderMaxSize:n.maxSize});return{...t,...n,decode:t.decode,encode:n.encode,read:t.read,write:n.write}}function gh(n,t,e=0){if(t.length-e<=0)throw new nr(nh,{codecDescription:n})}function mh(n,t,e,r=0){const s=e.length-r;if(s<t)throw new nr(rh,{bytesLength:s,codecDescription:n,expected:t})}function yh(n,t,e,r){if(r<t||r>e)throw new nr(ah,{codecDescription:n,max:e,min:t,value:r})}function jc(n){return n?.endian!==1}function wh(n){return hh({fixedSize:n.size,write(t,e,r){n.range&&yh(n.name,n.range[0],n.range[1],t);const s=new ArrayBuffer(n.size);return n.set(new DataView(s),t,jc(n.config)),e.set(new Uint8Array(s),r),r+n.size}})}function bh(n){return dh({fixedSize:n.size,read(t,e=0){gh(n.name,t,e),mh(n.name,n.size,t,e);const r=new DataView(vh(t,e,n.size));return[n.get(r,jc(n.config)),e+n.size]}})}function vh(n,t,e){const r=n.byteOffset+(t??0),s=e??n.byteLength;return n.buffer.slice(r,r+s)}var _h=(n={})=>wh({config:n,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,r)=>t.setBigUint64(0,BigInt(e),r),size:8}),xh=(n={})=>bh({config:n,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),Eh=(n={})=>ph(_h(n),xh(n));class Sh extends TypeError{constructor(t,e){let r;const{message:s,explanation:i,...o}=t,{path:c}=t,f=c.length===0?s:`At path: ${c.join(".")} -- ${s}`;super(i??f),i!=null&&(this.cause=f),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>r??(r=[t,...e()])}}function Bh(n){return Dr(n)&&typeof n[Symbol.iterator]=="function"}function Dr(n){return typeof n=="object"&&n!=null}function yi(n){return Dr(n)&&!Array.isArray(n)}function Ke(n){return typeof n=="symbol"?n.toString():typeof n=="string"?JSON.stringify(n):`${n}`}function Ah(n){const{done:t,value:e}=n.next();return t?void 0:e}function kh(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:s,branch:i}=t,{type:o}=e,{refinement:c,message:f=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${Ke(r)}\``}=n;return{value:r,type:o,refinement:c,key:s[s.length-1],path:s,branch:i,...n,message:f}}function*ua(n,t,e,r){Bh(n)||(n=[n]);for(const s of n){const i=kh(s,t,e,r);i&&(yield i)}}function*co(n,t,e={}){const{path:r=[],branch:s=[n],coerce:i=!1,mask:o=!1}=e,c={path:r,branch:s,mask:o};i&&(n=t.coercer(n,c));let f="valid";for(const g of t.validator(n,c))g.explanation=e.message,f="not_valid",yield[g,void 0];for(let[g,E,A]of t.entries(n,c)){const B=co(E,A,{path:g===void 0?r:[...r,g],branch:g===void 0?s:[...s,E],coerce:i,mask:o,message:e.message});for(const v of B)v[0]?(f=v[0].refinement!=null?"not_refined":"not_valid",yield[v[0],void 0]):i&&(E=v[1],g===void 0?n=E:n instanceof Map?n.set(g,E):n instanceof Set?n.add(E):Dr(n)&&(E!==void 0||g in n)&&(n[g]=E))}if(f!=="not_valid")for(const g of t.refiner(n,c))g.explanation=e.message,f="not_refined",yield[g,void 0];f==="valid"&&(yield[void 0,n])}let Ze=class{constructor(t){const{type:e,schema:r,validator:s,refiner:i,coercer:o=f=>f,entries:c=function*(){}}=t;this.type=e,this.schema=r,this.entries=c,this.coercer=o,s?this.validator=(f,g)=>{const E=s(f,g);return ua(E,g,this,f)}:this.validator=()=>[],i?this.refiner=(f,g)=>{const E=i(f,g);return ua(E,g,this,f)}:this.refiner=()=>[]}assert(t,e){return Ih(t,this,e)}create(t,e){return tt(t,this,e)}is(t){return Wc(t,this)}mask(t,e){return Rh(t,this,e)}validate(t,e={}){return zr(t,this,e)}};function Ih(n,t,e){const r=zr(n,t,{message:e});if(r[0])throw r[0]}function tt(n,t,e){const r=zr(n,t,{coerce:!0,message:e});if(r[0])throw r[0];return r[1]}function Rh(n,t,e){const r=zr(n,t,{coerce:!0,mask:!0,message:e});if(r[0])throw r[0];return r[1]}function Wc(n,t){return!zr(n,t)[0]}function zr(n,t,e={}){const r=co(n,t,e),s=Ah(r);return s[0]?[new Sh(s[0],function*(){for(const o of r)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function $n(n,t){return new Ze({type:n,schema:null,validator:t})}function Mh(){return $n("any",()=>!0)}function nt(n){return new Ze({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${Ke(t)}`}})}function Ge(){return $n("boolean",n=>typeof n=="boolean")}function uo(n){return $n("instance",t=>t instanceof n||`Expected a \`${n.name}\` instance, but received: ${Ke(t)}`)}function Ct(n){const t=Ke(n),e=typeof n;return new Ze({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||`Expected the literal \`${t}\`, but received: ${Ke(r)}`}})}function Th(){return $n("never",()=>!1)}function rt(n){return new Ze({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function $(){return $n("number",n=>typeof n=="number"&&!isNaN(n)||`Expected a number, but received: ${Ke(n)}`)}function ct(n){return new Ze({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function Gc(n,t){return new Ze({type:"record",schema:null,*entries(e){if(Dr(e))for(const r in e){const s=e[r];yield[r,r,n],yield[r,s,t]}},validator(e){return yi(e)||`Expected an object, but received: ${Ke(e)}`},coercer(e){return yi(e)?{...e}:e}})}function J(){return $n("string",n=>typeof n=="string"||`Expected a string, but received: ${Ke(n)}`)}function fo(n){const t=Th();return new Ze({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let s=0;s<r;s++)yield[s,e[s],n[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${Ke(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function Y(n){const t=Object.keys(n);return new Ze({type:"type",schema:n,*entries(e){if(Dr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return yi(e)||`Expected an object, but received: ${Ke(e)}`},coercer(e){return yi(e)?{...e}:e}})}function xe(n){const t=n.map(e=>e.type).join(" | ");return new Ze({type:"union",schema:null,coercer(e,r){for(const s of n){const[i,o]=s.validate(e,{coerce:!0,mask:r.mask});if(!i)return o}return e},validator(e,r){const s=[];for(const i of n){const[...o]=co(e,i,r),[c]=o;if(c[0])for(const[f]of o)f&&s.push(f);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${Ke(e)}`,...s]}})}function mr(){return $n("unknown",()=>!0)}function Kr(n,t,e){return new Ze({...n,coercer:(r,s)=>Wc(r,t)?n.coercer(e(r,s),s):n.coercer(r,s)})}var Qr,Ch=new Uint8Array(16);function Zc(){if(!Qr&&(Qr=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Qr))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qr(Ch)}const Lh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Mi(n){return typeof n=="string"&&Lh.test(n)}var ue=[];for(var ps=0;ps<256;++ps)ue.push((ps+256).toString(16).substr(1));function Ti(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(ue[n[t+0]]+ue[n[t+1]]+ue[n[t+2]]+ue[n[t+3]]+"-"+ue[n[t+4]]+ue[n[t+5]]+"-"+ue[n[t+6]]+ue[n[t+7]]+"-"+ue[n[t+8]]+ue[n[t+9]]+"-"+ue[n[t+10]]+ue[n[t+11]]+ue[n[t+12]]+ue[n[t+13]]+ue[n[t+14]]+ue[n[t+15]]).toLowerCase();if(!Mi(e))throw TypeError("Stringified UUID is invalid");return e}var fa,gs,ms=0,ys=0;function Uh(n,t,e){var r=t&&e||0,s=t||new Array(16);n=n||{};var i=n.node||fa,o=n.clockseq!==void 0?n.clockseq:gs;if(i==null||o==null){var c=n.random||(n.rng||Zc)();i==null&&(i=fa=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),o==null&&(o=gs=(c[6]<<8|c[7])&16383)}var f=n.msecs!==void 0?n.msecs:Date.now(),g=n.nsecs!==void 0?n.nsecs:ys+1,E=f-ms+(g-ys)/1e4;if(E<0&&n.clockseq===void 0&&(o=o+1&16383),(E<0||f>ms)&&n.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ms=f,ys=g,gs=o,f+=122192928e5;var A=((f&268435455)*1e4+g)%4294967296;s[r++]=A>>>24&255,s[r++]=A>>>16&255,s[r++]=A>>>8&255,s[r++]=A&255;var B=f/4294967296*1e4&268435455;s[r++]=B>>>8&255,s[r++]=B&255,s[r++]=B>>>24&15|16,s[r++]=B>>>16&255,s[r++]=o>>>8|128,s[r++]=o&255;for(var v=0;v<6;++v)s[r+v]=i[v];return t||Ti(s)}function Yc(n){if(!Mi(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function Fh(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Oh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Nh="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Xc(n,t,e){function r(s,i,o,c){if(typeof s=="string"&&(s=Fh(s)),typeof i=="string"&&(i=Yc(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var f=new Uint8Array(16+s.length);if(f.set(i),f.set(s,i.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,o){c=c||0;for(var g=0;g<16;++g)o[c+g]=f[g];return o}return Ti(f)}try{r.name=n}catch{}return r.DNS=Oh,r.URL=Nh,r}function qh(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return Ph(Dh(zh(n),n.length*8))}function Ph(n){for(var t=[],e=n.length*32,r="0123456789abcdef",s=0;s<e;s+=8){var i=n[s>>5]>>>s%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(o)}return t}function Jc(n){return(n+64>>>9<<4)+14+1}function Dh(n,t){n[t>>5]|=128<<t%32,n[Jc(t)-1]=t;for(var e=1732584193,r=-271733879,s=-1732584194,i=271733878,o=0;o<n.length;o+=16){var c=e,f=r,g=s,E=i;e=ge(e,r,s,i,n[o],7,-680876936),i=ge(i,e,r,s,n[o+1],12,-389564586),s=ge(s,i,e,r,n[o+2],17,606105819),r=ge(r,s,i,e,n[o+3],22,-1044525330),e=ge(e,r,s,i,n[o+4],7,-176418897),i=ge(i,e,r,s,n[o+5],12,1200080426),s=ge(s,i,e,r,n[o+6],17,-1473231341),r=ge(r,s,i,e,n[o+7],22,-45705983),e=ge(e,r,s,i,n[o+8],7,1770035416),i=ge(i,e,r,s,n[o+9],12,-1958414417),s=ge(s,i,e,r,n[o+10],17,-42063),r=ge(r,s,i,e,n[o+11],22,-1990404162),e=ge(e,r,s,i,n[o+12],7,1804603682),i=ge(i,e,r,s,n[o+13],12,-40341101),s=ge(s,i,e,r,n[o+14],17,-1502002290),r=ge(r,s,i,e,n[o+15],22,1236535329),e=me(e,r,s,i,n[o+1],5,-165796510),i=me(i,e,r,s,n[o+6],9,-1069501632),s=me(s,i,e,r,n[o+11],14,643717713),r=me(r,s,i,e,n[o],20,-373897302),e=me(e,r,s,i,n[o+5],5,-701558691),i=me(i,e,r,s,n[o+10],9,38016083),s=me(s,i,e,r,n[o+15],14,-660478335),r=me(r,s,i,e,n[o+4],20,-405537848),e=me(e,r,s,i,n[o+9],5,568446438),i=me(i,e,r,s,n[o+14],9,-1019803690),s=me(s,i,e,r,n[o+3],14,-187363961),r=me(r,s,i,e,n[o+8],20,1163531501),e=me(e,r,s,i,n[o+13],5,-1444681467),i=me(i,e,r,s,n[o+2],9,-51403784),s=me(s,i,e,r,n[o+7],14,1735328473),r=me(r,s,i,e,n[o+12],20,-1926607734),e=ye(e,r,s,i,n[o+5],4,-378558),i=ye(i,e,r,s,n[o+8],11,-2022574463),s=ye(s,i,e,r,n[o+11],16,1839030562),r=ye(r,s,i,e,n[o+14],23,-35309556),e=ye(e,r,s,i,n[o+1],4,-1530992060),i=ye(i,e,r,s,n[o+4],11,1272893353),s=ye(s,i,e,r,n[o+7],16,-155497632),r=ye(r,s,i,e,n[o+10],23,-1094730640),e=ye(e,r,s,i,n[o+13],4,681279174),i=ye(i,e,r,s,n[o],11,-358537222),s=ye(s,i,e,r,n[o+3],16,-722521979),r=ye(r,s,i,e,n[o+6],23,76029189),e=ye(e,r,s,i,n[o+9],4,-640364487),i=ye(i,e,r,s,n[o+12],11,-421815835),s=ye(s,i,e,r,n[o+15],16,530742520),r=ye(r,s,i,e,n[o+2],23,-995338651),e=we(e,r,s,i,n[o],6,-198630844),i=we(i,e,r,s,n[o+7],10,1126891415),s=we(s,i,e,r,n[o+14],15,-1416354905),r=we(r,s,i,e,n[o+5],21,-57434055),e=we(e,r,s,i,n[o+12],6,1700485571),i=we(i,e,r,s,n[o+3],10,-1894986606),s=we(s,i,e,r,n[o+10],15,-1051523),r=we(r,s,i,e,n[o+1],21,-2054922799),e=we(e,r,s,i,n[o+8],6,1873313359),i=we(i,e,r,s,n[o+15],10,-30611744),s=we(s,i,e,r,n[o+6],15,-1560198380),r=we(r,s,i,e,n[o+13],21,1309151649),e=we(e,r,s,i,n[o+4],6,-145523070),i=we(i,e,r,s,n[o+11],10,-1120210379),s=we(s,i,e,r,n[o+2],15,718787259),r=we(r,s,i,e,n[o+9],21,-343485551),e=_n(e,c),r=_n(r,f),s=_n(s,g),i=_n(i,E)}return[e,r,s,i]}function zh(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(Jc(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function _n(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function Kh(n,t){return n<<t|n>>>32-t}function Ci(n,t,e,r,s,i){return _n(Kh(_n(_n(t,n),_n(r,i)),s),e)}function ge(n,t,e,r,s,i,o){return Ci(t&e|~t&r,n,t,s,i,o)}function me(n,t,e,r,s,i,o){return Ci(t&r|e&~r,n,t,s,i,o)}function ye(n,t,e,r,s,i,o){return Ci(t^e^r,n,t,s,i,o)}function we(n,t,e,r,s,i,o){return Ci(e^(t|~r),n,t,s,i,o)}var $h=Xc("v3",48,qh);function Hh(n,t,e){n=n||{};var r=n.random||(n.rng||Zc)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=r[s];return t}return Ti(r)}function Vh(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function ws(n,t){return n<<t|n>>>32-t}function jh(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var s=0;s<r.length;++s)n.push(r.charCodeAt(s))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,o=Math.ceil(i/16),c=new Array(o),f=0;f<o;++f){for(var g=new Uint32Array(16),E=0;E<16;++E)g[E]=n[f*64+E*4]<<24|n[f*64+E*4+1]<<16|n[f*64+E*4+2]<<8|n[f*64+E*4+3];c[f]=g}c[o-1][14]=(n.length-1)*8/Math.pow(2,32),c[o-1][14]=Math.floor(c[o-1][14]),c[o-1][15]=(n.length-1)*8&4294967295;for(var A=0;A<o;++A){for(var B=new Uint32Array(80),v=0;v<16;++v)B[v]=c[A][v];for(var S=16;S<80;++S)B[S]=ws(B[S-3]^B[S-8]^B[S-14]^B[S-16],1);for(var M=e[0],L=e[1],F=e[2],H=e[3],D=e[4],X=0;X<80;++X){var Z=Math.floor(X/20),Q=ws(M,5)+Vh(Z,L,F,H)+D+t[Z]+B[X]>>>0;D=H,H=F,F=ws(L,30)>>>0,L=M,M=Q}e[0]=e[0]+M>>>0,e[1]=e[1]+L>>>0,e[2]=e[2]+F>>>0,e[3]=e[3]+H>>>0,e[4]=e[4]+D>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var Wh=Xc("v5",80,jh);const Gh="00000000-0000-0000-0000-000000000000";function Zh(n){if(!Mi(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const Yh=Object.freeze(Object.defineProperty({__proto__:null,NIL:Gh,parse:Yc,stringify:Ti,v1:Uh,v3:$h,v4:Hh,v5:Wh,validate:Mi,version:Zh},Symbol.toStringTag,{value:"Module"})),Qc=Qs(Yh);var bs,la;function Xh(){if(la)return bs;la=1;const n=Qc.v4;return bs=function(e,r,s,i){if(typeof e!="string")throw new TypeError(e+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const c={method:e};if(o===2&&(c.jsonrpc="2.0"),r){if(typeof r!="object"&&!Array.isArray(r))throw new TypeError(r+" must be an object, array or omitted");c.params=r}if(typeof s>"u"){const f=typeof i.generator=="function"?i.generator:function(){return n()};c.id=f(c,i)}else o===2&&s===null?i.notificationIdNull&&(c.id=null):c.id=s;return c},bs}var vs,ha;function Jh(){if(ha)return vs;ha=1;const n=Qc.v4,t=Xh(),e=function(r,s){if(!(this instanceof e))return new e(r,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return n()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=r};return vs=e,e.prototype.request=function(r,s,i,o){const c=this;let f=null;const g=Array.isArray(r)&&typeof s=="function";if(this.options.version===1&&g)throw new TypeError("JSON-RPC 1.0 does not support batching");if(g||!g&&r&&typeof r=="object"&&typeof s=="function")o=s,f=r;else{typeof i=="function"&&(o=i,i=void 0);const B=typeof o=="function";try{f=t(r,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(v){if(B){o(v);return}throw v}if(!B)return f}let A;try{A=JSON.stringify(f,this.options.replacer)}catch(B){o(B);return}return this.callServer(A,function(B,v){c._parseResponse(B,v,o)}),f},e.prototype._parseResponse=function(r,s,i){if(r){i(r);return}if(!s){i();return}let o;try{o=JSON.parse(s,this.options.reviver)}catch(c){i(c);return}if(i.length===3)if(Array.isArray(o)){const c=function(g){return typeof g.error<"u"},f=function(g){return!c(g)};i(null,o.filter(c),o.filter(f));return}else{i(null,o.error,o.result);return}i(null,o)},vs}var Qh=Jh();const td=ki(Qh);var _s={exports:{}},da;function ed(){return da||(da=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function s(f,g,E){this.fn=f,this.context=g,this.once=E||!1}function i(f,g,E,A,B){if(typeof E!="function")throw new TypeError("The listener must be a function");var v=new s(E,A||f,B),S=e?e+g:g;return f._events[S]?f._events[S].fn?f._events[S]=[f._events[S],v]:f._events[S].push(v):(f._events[S]=v,f._eventsCount++),f}function o(f,g){--f._eventsCount===0?f._events=new r:delete f._events[g]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var g=[],E,A;if(this._eventsCount===0)return g;for(A in E=this._events)t.call(E,A)&&g.push(e?A.slice(1):A);return Object.getOwnPropertySymbols?g.concat(Object.getOwnPropertySymbols(E)):g},c.prototype.listeners=function(g){var E=e?e+g:g,A=this._events[E];if(!A)return[];if(A.fn)return[A.fn];for(var B=0,v=A.length,S=new Array(v);B<v;B++)S[B]=A[B].fn;return S},c.prototype.listenerCount=function(g){var E=e?e+g:g,A=this._events[E];return A?A.fn?1:A.length:0},c.prototype.emit=function(g,E,A,B,v,S){var M=e?e+g:g;if(!this._events[M])return!1;var L=this._events[M],F=arguments.length,H,D;if(L.fn){switch(L.once&&this.removeListener(g,L.fn,void 0,!0),F){case 1:return L.fn.call(L.context),!0;case 2:return L.fn.call(L.context,E),!0;case 3:return L.fn.call(L.context,E,A),!0;case 4:return L.fn.call(L.context,E,A,B),!0;case 5:return L.fn.call(L.context,E,A,B,v),!0;case 6:return L.fn.call(L.context,E,A,B,v,S),!0}for(D=1,H=new Array(F-1);D<F;D++)H[D-1]=arguments[D];L.fn.apply(L.context,H)}else{var X=L.length,Z;for(D=0;D<X;D++)switch(L[D].once&&this.removeListener(g,L[D].fn,void 0,!0),F){case 1:L[D].fn.call(L[D].context);break;case 2:L[D].fn.call(L[D].context,E);break;case 3:L[D].fn.call(L[D].context,E,A);break;case 4:L[D].fn.call(L[D].context,E,A,B);break;default:if(!H)for(Z=1,H=new Array(F-1);Z<F;Z++)H[Z-1]=arguments[Z];L[D].fn.apply(L[D].context,H)}}return!0},c.prototype.on=function(g,E,A){return i(this,g,E,A,!1)},c.prototype.once=function(g,E,A){return i(this,g,E,A,!0)},c.prototype.removeListener=function(g,E,A,B){var v=e?e+g:g;if(!this._events[v])return this;if(!E)return o(this,v),this;var S=this._events[v];if(S.fn)S.fn===E&&(!B||S.once)&&(!A||S.context===A)&&o(this,v);else{for(var M=0,L=[],F=S.length;M<F;M++)(S[M].fn!==E||B&&!S[M].once||A&&S[M].context!==A)&&L.push(S[M]);L.length?this._events[v]=L.length===1?L[0]:L:o(this,v)}return this},c.prototype.removeAllListeners=function(g){var E;return g?(E=e?e+g:g,this._events[E]&&o(this,E)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c})(_s)),_s.exports}var nd=ed();const tu=ki(nd);var rd=class extends tu{socket;constructor(n,t){super(),this.socket=new window.WebSocket(n,t.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(n,t,e){const r=e||t;try{this.socket.send(n),r()}catch(s){r(s)}}close(n,t){this.socket.close(n,t)}addEventListener(n,t,e){this.socket.addEventListener(n,t,e)}};function id(n,t){return new rd(n,t)}var sd=class{encode(n){return JSON.stringify(n)}decode(n){return JSON.parse(n)}},od=class extends tu{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(n,t="ws://localhost:8080",{autoconnect:e=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:i=5,...o}={},c,f){super(),this.webSocketFactory=n,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=e,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=i,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=c||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),f?this.dataPack=f:this.dataPack=new sd,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(n,t,e,r){return!r&&typeof e=="object"&&(r=e,e=null),new Promise((s,i)=>{if(!this.ready)return i(new Error("socket not ready"));const o=this.generate_request_id(n,t),c={jsonrpc:"2.0",method:n,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(c),r,f=>{if(f)return i(f);this.queue[o]={promise:[s,i]},e&&(this.queue[o].timeout=setTimeout(()=>{delete this.queue[o],i(new Error("reply timeout"))},e))})})}async login(n){const t=await this.call("rpc.login",n);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(n,t){return new Promise((e,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:n,params:t};this.socket.send(this.dataPack.encode(s),i=>{if(i)return r(i);e()})})}async subscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.on",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed subscribing to an event '"+n+"' with: "+t[n]);return t}async unsubscribe(n){typeof n=="string"&&(n=[n]);const t=await this.call("rpc.off",n);if(typeof n=="string"&&t[n]!=="ok")throw new Error("Failed unsubscribing from an event with: "+t);return t}close(n,t){this.socket&&this.socket.close(n||1e3,t)}setAutoReconnect(n){this.reconnect=n}setReconnectInterval(n){this.reconnect_interval=n}setMaxReconnects(n){this.max_reconnects=n}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(n,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(n,t),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:e})=>{e instanceof ArrayBuffer&&(e=gt.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch{return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const r=[e.notification];if(e.params.constructor===Object)r.push(e.params);else for(let s=0;s<e.params.length;s++)r.push(e.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[e.id])return e.method?Promise.resolve().then(()=>{this.emit(e.method,e?.params)}):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]}),this.socket.addEventListener("error",e=>this.emit("error",e)),this.socket.addEventListener("close",({code:e,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",e,r),0),this.ready=!1,this.socket=void 0,e!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(n,t),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",e,r),1))})}};class eu extends wc{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,mc(t);const r=eo(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(r.length>s?t.create().update(r).digest():r);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),fr(i)}update(t){return ui(this),this.iHash.update(t),this}digestInto(t){ui(this),zn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:s,destroyed:i,blockLen:o,outputLen:c}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const nu=(n,t,e)=>new eu(n,t).update(e).digest();nu.create=(n,t)=>new eu(n,t);const pa=(n,t)=>(n+(n>=0?t:-t)/ru)/t;function ad(n,t,e){const[[r,s],[i,o]]=t,c=pa(o*n,e),f=pa(-s*n,e);let g=n-c*r-f*i,E=-c*s-f*o;const A=g<rn,B=E<rn;A&&(g=-g),B&&(E=-E);const v=Nr(Math.ceil(Bc(e)/2))+rr;if(g<rn||g>=v||E<rn||E>=v)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:A,k1:g,k2neg:B,k2:E}}function qs(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function xs(n,t){const e={};for(let r of Object.keys(t))e[r]=n[r]===void 0?t[r]:n[r];return Pn(e.lowS,"lowS"),Pn(e.prehash,"prehash"),e.format!==void 0&&qs(e.format),e}class cd extends Error{constructor(t=""){super(t)}}const tn={Err:cd,_tlv:{encode:(n,t)=>{const{Err:e}=tn;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const r=t.length/2,s=Xr(r);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=r>127?Xr(s.length/2|128):"";return Xr(n)+i+s+t},decode(n,t){const{Err:e}=tn;let r=0;if(n<0||n>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[r++]!==n)throw new e("tlv.decode: wrong tlv");const s=t[r++],i=!!(s&128);let o=0;if(!i)o=s;else{const f=s&127;if(!f)throw new e("tlv.decode(long): indefinite length not supported");if(f>4)throw new e("tlv.decode(long): byte length is too big");const g=t.subarray(r,r+f);if(g.length!==f)throw new e("tlv.decode: length bytes not complete");if(g[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const E of g)o=o<<8|E;if(r+=f,o<128)throw new e("tlv.decode(long): not minimal encoding")}const c=t.subarray(r,r+o);if(c.length!==o)throw new e("tlv.decode: wrong value length");return{v:c,l:t.subarray(r+o)}}},_int:{encode(n){const{Err:t}=tn;if(n<rn)throw new t("integer: negative integers are not allowed");let e=Xr(n);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(n){const{Err:t}=tn;if(n[0]&128)throw new t("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Ii(n)}},toSig(n){const{Err:t,_int:e,_tlv:r}=tn,s=Pt("signature",n),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:c,l:f}=r.decode(2,i),{v:g,l:E}=r.decode(2,f);if(E.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(c),s:e.decode(g)}},hexFromSig(n){const{_tlv:t,_int:e}=tn,r=t.encode(2,e.encode(n.r)),s=t.encode(2,e.encode(n.s)),i=r+s;return t.encode(48,i)}},rn=BigInt(0),rr=BigInt(1),ru=BigInt(2),ti=BigInt(3),ud=BigInt(4);function tr(n,t){const{BYTES:e}=n;let r;if(typeof t=="bigint")r=t;else{let s=Pt("private key",t);try{r=n.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!n.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function fd(n,t={}){const e=zc("weierstrass",n,t),{Fp:r,Fn:s}=e;let i=e.CURVE;const{h:o,n:c}=i;qr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:f}=t;if(f&&(!r.is0(i.a)||typeof f.beta!="bigint"||!Array.isArray(f.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const g=su(r,s);function E(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function A(V,y,a){const{x:d,y:m}=y.toAffine(),x=r.toBytes(d);if(Pn(a,"isCompressed"),a){E();const I=!r.isOdd(m);return Ve(iu(I),x)}else return Ve(Uint8Array.of(4),x,r.toBytes(m))}function B(V){ze(V,void 0,"Point");const{publicKey:y,publicKeyUncompressed:a}=g,d=V.length,m=V[0],x=V.subarray(1);if(d===y&&(m===2||m===3)){const I=r.fromBytes(x);if(!r.isValid(I))throw new Error("bad point: is not on curve, wrong x");const T=M(I);let U;try{U=r.sqrt(T)}catch(l){const b=l instanceof Error?": "+l.message:"";throw new Error("bad point: is not on curve, sqrt error"+b)}E();const _=r.isOdd(U);return(m&1)===1!==_&&(U=r.neg(U)),{x:I,y:U}}else if(d===a&&m===4){const I=r.BYTES,T=r.fromBytes(x.subarray(0,I)),U=r.fromBytes(x.subarray(I,I*2));if(!L(T,U))throw new Error("bad point: is not on curve");return{x:T,y:U}}else throw new Error(`bad point: got length ${d}, expected compressed=${y} or uncompressed=${a}`)}const v=t.toBytes||A,S=t.fromBytes||B;function M(V){const y=r.sqr(V),a=r.mul(y,V);return r.add(r.add(a,r.mul(V,i.a)),i.b)}function L(V,y){const a=r.sqr(y),d=M(V);return r.eql(a,d)}if(!L(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const F=r.mul(r.pow(i.a,ti),ud),H=r.mul(r.sqr(i.b),BigInt(27));if(r.is0(r.add(F,H)))throw new Error("bad curve params: a or b");function D(V,y,a=!1){if(!r.isValid(y)||a&&r.is0(y))throw new Error(`bad point coordinate ${V}`);return y}function X(V){if(!(V instanceof O))throw new Error("ProjectivePoint expected")}function Z(V){if(!f||!f.basises)throw new Error("no endo");return ad(V,f.basises,s.ORDER)}const Q=li((V,y)=>{const{X:a,Y:d,Z:m}=V;if(r.eql(m,r.ONE))return{x:a,y:d};const x=V.is0();y==null&&(y=x?r.ONE:r.inv(m));const I=r.mul(a,y),T=r.mul(d,y),U=r.mul(m,y);if(x)return{x:r.ZERO,y:r.ZERO};if(!r.eql(U,r.ONE))throw new Error("invZ was invalid");return{x:I,y:T}}),at=li(V=>{if(V.is0()){if(t.allowInfinityPoint&&!r.is0(V.Y))return;throw new Error("bad point: ZERO")}const{x:y,y:a}=V.toAffine();if(!r.isValid(y)||!r.isValid(a))throw new Error("bad point: x or y not field elements");if(!L(y,a))throw new Error("bad point: equation left != right");if(!V.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function it(V,y,a,d,m){return a=new O(r.mul(a.X,V),a.Y,a.Z),y=hi(d,y),a=hi(m,a),y.add(a)}class O{constructor(y,a,d){this.X=D("x",y),this.Y=D("y",a,!0),this.Z=D("z",d),Object.freeze(this)}static CURVE(){return i}static fromAffine(y){const{x:a,y:d}=y||{};if(!y||!r.isValid(a)||!r.isValid(d))throw new Error("invalid affine point");if(y instanceof O)throw new Error("projective point not allowed");return r.is0(a)&&r.is0(d)?O.ZERO:new O(a,d,r.ONE)}static fromBytes(y){const a=O.fromAffine(S(ze(y,void 0,"point")));return a.assertValidity(),a}static fromHex(y){return O.fromBytes(Pt("pointHex",y))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(y=8,a=!0){return K.createCache(this,y),a||this.multiply(ti),this}assertValidity(){at(this)}hasEvenY(){const{y}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(y)}equals(y){X(y);const{X:a,Y:d,Z:m}=this,{X:x,Y:I,Z:T}=y,U=r.eql(r.mul(a,T),r.mul(x,m)),_=r.eql(r.mul(d,T),r.mul(I,m));return U&&_}negate(){return new O(this.X,r.neg(this.Y),this.Z)}double(){const{a:y,b:a}=i,d=r.mul(a,ti),{X:m,Y:x,Z:I}=this;let T=r.ZERO,U=r.ZERO,_=r.ZERO,u=r.mul(m,m),l=r.mul(x,x),b=r.mul(I,I),R=r.mul(m,x);return R=r.add(R,R),_=r.mul(m,I),_=r.add(_,_),T=r.mul(y,_),U=r.mul(d,b),U=r.add(T,U),T=r.sub(l,U),U=r.add(l,U),U=r.mul(T,U),T=r.mul(R,T),_=r.mul(d,_),b=r.mul(y,b),R=r.sub(u,b),R=r.mul(y,R),R=r.add(R,_),_=r.add(u,u),u=r.add(_,u),u=r.add(u,b),u=r.mul(u,R),U=r.add(U,u),b=r.mul(x,I),b=r.add(b,b),u=r.mul(b,R),T=r.sub(T,u),_=r.mul(b,l),_=r.add(_,_),_=r.add(_,_),new O(T,U,_)}add(y){X(y);const{X:a,Y:d,Z:m}=this,{X:x,Y:I,Z:T}=y;let U=r.ZERO,_=r.ZERO,u=r.ZERO;const l=i.a,b=r.mul(i.b,ti);let R=r.mul(a,x),P=r.mul(d,I),G=r.mul(m,T),et=r.add(a,d),st=r.add(x,I);et=r.mul(et,st),st=r.add(R,P),et=r.sub(et,st),st=r.add(a,m);let wt=r.add(x,T);return st=r.mul(st,wt),wt=r.add(R,G),st=r.sub(st,wt),wt=r.add(d,m),U=r.add(I,T),wt=r.mul(wt,U),U=r.add(P,G),wt=r.sub(wt,U),u=r.mul(l,st),U=r.mul(b,G),u=r.add(U,u),U=r.sub(P,u),u=r.add(P,u),_=r.mul(U,u),P=r.add(R,R),P=r.add(P,R),G=r.mul(l,G),st=r.mul(b,st),P=r.add(P,G),G=r.sub(R,G),G=r.mul(l,G),st=r.add(st,G),R=r.mul(P,st),_=r.add(_,R),R=r.mul(wt,st),U=r.mul(et,U),U=r.sub(U,R),R=r.mul(et,P),u=r.mul(wt,u),u=r.add(u,R),new O(U,_,u)}subtract(y){return this.add(y.negate())}is0(){return this.equals(O.ZERO)}multiply(y){const{endo:a}=t;if(!s.isValidNot0(y))throw new Error("invalid scalar: out of range");let d,m;const x=I=>K.cached(this,I,T=>Tn(O,T));if(a){const{k1neg:I,k1:T,k2neg:U,k2:_}=Z(y),{p:u,f:l}=x(T),{p:b,f:R}=x(_);m=l.add(R),d=it(a.beta,u,b,I,U)}else{const{p:I,f:T}=x(y);d=I,m=T}return Tn(O,[d,m])[0]}multiplyUnsafe(y){const{endo:a}=t,d=this;if(!s.isValid(y))throw new Error("invalid scalar: out of range");if(y===rn||d.is0())return O.ZERO;if(y===rr)return d;if(K.hasCache(this))return this.multiply(y);if(a){const{k1neg:m,k1:x,k2neg:I,k2:T}=Z(y),{p1:U,p2:_}=Sl(O,d,x,T);return it(a.beta,U,_,m,I)}else return K.unsafe(d,y)}multiplyAndAddUnsafe(y,a,d){const m=this.multiplyUnsafe(a).add(y.multiplyUnsafe(d));return m.is0()?void 0:m}toAffine(y){return Q(this,y)}isTorsionFree(){const{isTorsionFree:y}=t;return o===rr?!0:y?y(O,this):K.unsafe(this,c).is0()}clearCofactor(){const{clearCofactor:y}=t;return o===rr?this:y?y(O,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(y=!0){return Pn(y,"isCompressed"),this.assertValidity(),v(O,this,y)}toHex(y=!0){return Fn(this.toBytes(y))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(y=!0){return this.toBytes(y)}_setWindowSize(y){this.precompute(y)}static normalizeZ(y){return Tn(O,y)}static msm(y,a){return Dc(O,s,y,a)}static fromPrivateKey(y){return O.BASE.multiply(tr(s,y))}}O.BASE=new O(i.Gx,i.Gy,r.ONE),O.ZERO=new O(r.ZERO,r.ONE,r.ZERO),O.Fp=r,O.Fn=s;const N=s.BITS,K=new Pc(O,t.endo?Math.ceil(N/2):N);return O.BASE.precompute(8),O}function iu(n){return Uint8Array.of(n?2:3)}function su(n,t){return{secretKey:t.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function ld(n,t={}){const{Fn:e}=n,r=t.randomBytes||no,s=Object.assign(su(n.Fp,e),{seed:Oc(e.ORDER)});function i(v){try{return!!tr(e,v)}catch{return!1}}function o(v,S){const{publicKey:M,publicKeyUncompressed:L}=s;try{const F=v.length;return S===!0&&F!==M||S===!1&&F!==L?!1:!!n.fromBytes(v)}catch{return!1}}function c(v=r(s.seed)){return _l(ze(v,s.seed,"seed"),e.ORDER)}function f(v,S=!0){return n.BASE.multiply(tr(e,v)).toBytes(S)}function g(v){const S=c(v);return{secretKey:S,publicKey:f(S)}}function E(v){if(typeof v=="bigint")return!1;if(v instanceof n)return!0;const{secretKey:S,publicKey:M,publicKeyUncompressed:L}=s;if(e.allowedLengths||S===M)return;const F=Pt("key",v).length;return F===M||F===L}function A(v,S,M=!0){if(E(v)===!0)throw new Error("first arg must be private key");if(E(S)===!1)throw new Error("second arg must be public key");const L=tr(e,v);return n.fromHex(S).multiply(L).toBytes(M)}return Object.freeze({getPublicKey:f,getSharedSecret:A,keygen:g,Point:n,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:c,isValidPrivateKey:i,randomPrivateKey:c,normPrivateKeyToScalar:v=>tr(e,v),precompute(v=8,S=n.BASE){return S.precompute(v,!1)}},lengths:s})}function hd(n,t,e={}){mc(t),qr(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=e.randomBytes||no,s=e.hmac||((a,...d)=>nu(t,a,Ve(...d))),{Fp:i,Fn:o}=n,{ORDER:c,BITS:f}=o,{keygen:g,getPublicKey:E,getSharedSecret:A,utils:B,lengths:v}=ld(n,e),S={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},M="compact";function L(a){const d=c>>rr;return a>d}function F(a,d){if(!o.isValidNot0(d))throw new Error(`invalid signature ${a}: out of range 1..Point.Fn.ORDER`);return d}function H(a,d){qs(d);const m=v.signature,x=d==="compact"?m:d==="recovered"?m+1:void 0;return ze(a,x,`${d} signature`)}class D{constructor(d,m,x){this.r=F("r",d),this.s=F("s",m),x!=null&&(this.recovery=x),Object.freeze(this)}static fromBytes(d,m=M){H(d,m);let x;if(m==="der"){const{r:_,s:u}=tn.toSig(ze(d));return new D(_,u)}m==="recovered"&&(x=d[0],m="compact",d=d.subarray(1));const I=o.BYTES,T=d.subarray(0,I),U=d.subarray(I,I*2);return new D(o.fromBytes(T),o.fromBytes(U),x)}static fromHex(d,m){return this.fromBytes(fi(d),m)}addRecoveryBit(d){return new D(this.r,this.s,d)}recoverPublicKey(d){const m=i.ORDER,{r:x,s:I,recovery:T}=this;if(T==null||![0,1,2,3].includes(T))throw new Error("recovery id invalid");if(c*ru<m&&T>1)throw new Error("recovery id is ambiguous for h>1 curve");const _=T===2||T===3?x+c:x;if(!i.isValid(_))throw new Error("recovery id 2 or 3 invalid");const u=i.toBytes(_),l=n.fromBytes(Ve(iu((T&1)===0),u)),b=o.inv(_),R=Z(Pt("msgHash",d)),P=o.create(-R*b),G=o.create(I*b),et=n.BASE.multiplyUnsafe(P).add(l.multiplyUnsafe(G));if(et.is0())throw new Error("point at infinify");return et.assertValidity(),et}hasHighS(){return L(this.s)}toBytes(d=M){if(qs(d),d==="der")return fi(tn.hexFromSig(this));const m=o.toBytes(this.r),x=o.toBytes(this.s);if(d==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ve(Uint8Array.of(this.recovery),m,x)}return Ve(m,x)}toHex(d){return Fn(this.toBytes(d))}assertValidity(){}static fromCompact(d){return D.fromBytes(Pt("sig",d),"compact")}static fromDER(d){return D.fromBytes(Pt("sig",d),"der")}normalizeS(){return this.hasHighS()?new D(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Fn(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Fn(this.toBytes("compact"))}}const X=e.bits2int||function(d){if(d.length>8192)throw new Error("input is too large");const m=Ii(d),x=d.length*8-f;return x>0?m>>BigInt(x):m},Z=e.bits2int_modN||function(d){return o.create(X(d))},Q=Nr(f);function at(a){return Ns("num < 2^"+f,a,rn,Q),o.toBytes(a)}function it(a,d){return ze(a,void 0,"message"),d?ze(t(a),void 0,"prehashed message"):a}function O(a,d,m){if(["recovered","canonical"].some(P=>P in m))throw new Error("sign() legacy options not supported");const{lowS:x,prehash:I,extraEntropy:T}=xs(m,S);a=it(a,I);const U=Z(a),_=tr(o,d),u=[at(_),at(U)];if(T!=null&&T!==!1){const P=T===!0?r(v.secretKey):T;u.push(Pt("extraEntropy",P))}const l=Ve(...u),b=U;function R(P){const G=X(P);if(!o.isValidNot0(G))return;const et=o.inv(G),st=n.BASE.multiply(G).toAffine(),wt=o.create(st.x);if(wt===rn)return;const bt=o.create(et*o.create(b+wt*_));if(bt===rn)return;let Et=(st.x===wt?0:2)|Number(st.y&rr),Me=bt;return x&&L(bt)&&(Me=o.neg(bt),Et^=1),new D(wt,Me,Et)}return{seed:l,k2sig:R}}function N(a,d,m={}){a=Pt("message",a);const{seed:x,k2sig:I}=O(a,d,m);return ll(t.outputLen,o.BYTES,s)(x,I)}function K(a){let d;const m=typeof a=="string"||Or(a),x=!m&&a!==null&&typeof a=="object"&&typeof a.r=="bigint"&&typeof a.s=="bigint";if(!m&&!x)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(x)d=new D(a.r,a.s);else if(m){try{d=D.fromBytes(Pt("sig",a),"der")}catch(I){if(!(I instanceof tn.Err))throw I}if(!d)try{d=D.fromBytes(Pt("sig",a),"compact")}catch{return!1}}return d||!1}function V(a,d,m,x={}){const{lowS:I,prehash:T,format:U}=xs(x,S);if(m=Pt("publicKey",m),d=it(Pt("message",d),T),"strict"in x)throw new Error("options.strict was renamed to lowS");const _=U===void 0?K(a):D.fromBytes(Pt("sig",a),U);if(_===!1)return!1;try{const u=n.fromBytes(m);if(I&&_.hasHighS())return!1;const{r:l,s:b}=_,R=Z(d),P=o.inv(b),G=o.create(R*P),et=o.create(l*P),st=n.BASE.multiplyUnsafe(G).add(u.multiplyUnsafe(et));return st.is0()?!1:o.create(st.x)===l}catch{return!1}}function y(a,d,m={}){const{prehash:x}=xs(m,S);return d=it(d,x),D.fromBytes(a,"recovered").recoverPublicKey(d).toBytes()}return Object.freeze({keygen:g,getPublicKey:E,getSharedSecret:A,utils:B,lengths:v,Point:n,sign:N,verify:V,recoverPublicKey:y,Signature:D,hash:t})}function dd(n){const t={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},e=n.Fp;let r=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Kn(t.n,{BITS:n.nBitLength,allowedLengths:r,modFromBytes:n.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:t,curveOpts:i}}function pd(n){const{CURVE:t,curveOpts:e}=dd(n),r={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:t,curveOpts:e,hash:n.hash,ecdsaOpts:r}}function gd(n,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},n,Uc(e.Fn.ORDER,e.Fn.BITS))})}function md(n){const{CURVE:t,curveOpts:e,hash:r,ecdsaOpts:s}=pd(n),i=fd(t,e),o=hd(i,r,s);return gd(n,o)}function yd(n,t){const e=r=>md({...n,hash:r});return{...e(t),create:e}}const lo={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},wd={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},ga=BigInt(2);function bd(n){const t=lo.p,e=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),c=BigInt(44),f=BigInt(88),g=n*n*n%t,E=g*g*n%t,A=qt(E,e,t)*E%t,B=qt(A,e,t)*E%t,v=qt(B,ga,t)*g%t,S=qt(v,s,t)*v%t,M=qt(S,i,t)*S%t,L=qt(M,c,t)*M%t,F=qt(L,f,t)*L%t,H=qt(F,c,t)*M%t,D=qt(H,e,t)*E%t,X=qt(D,o,t)*S%t,Z=qt(X,r,t)*g%t,Q=qt(Z,ga,t);if(!Ps.eql(Ps.sqr(Q),n))throw new Error("Cannot find square root");return Q}const Ps=Kn(lo.p,{sqrt:bd}),vd=yd({...lo,Fp:Ps,lowS:!0,endo:wd},xc);Pr.utils.randomPrivateKey;Pr.getPublicKey;function ma(n){try{return Pr.ExtendedPoint.fromHex(n),!0}catch{return!1}}const _d=(n,t)=>Pr.sign(n,t.slice(0,32)),xd=Pr.verify,dr=n=>gt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?gt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):gt.Buffer.from(n);class Ed{constructor(t){Object.assign(this,t)}encode(){return gt.Buffer.from(ds.serialize(ii,this))}static decode(t){return ds.deserialize(ii,this,t)}static decodeUnchecked(t){return ds.deserializeUnchecked(ii,this,t)}}const ii=new Map;var ou;const Sd=32,Bn=32;function Bd(n){return n._bn!==void 0}let ya=1;class ut extends Ed{constructor(t){if(super({}),this._bn=void 0,Bd(t))this._bn=t._bn;else{if(typeof t=="string"){const e=le.decode(t);if(e.length!=Bn)throw new Error("Invalid public key input");this._bn=new na(e)}else this._bn=new na(t);if(this._bn.byteLength()>Bn)throw new Error("Invalid public key input")}}static unique(){const t=new ut(ya);return ya+=1,new ut(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return le.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(gt.Buffer);if(t.length===Bn)return t;const e=gt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const s=gt.Buffer.concat([t.toBuffer(),gt.Buffer.from(e),r.toBuffer()]),i=oa(s);return new ut(i)}static createProgramAddressSync(t,e){let r=gt.Buffer.alloc(0);t.forEach(function(i){if(i.length>Sd)throw new TypeError("Max seed length exceeded");r=gt.Buffer.concat([r,dr(i)])}),r=gt.Buffer.concat([r,e.toBuffer(),gt.Buffer.from("ProgramDerivedAddress")]);const s=oa(r);if(ma(s))throw new Error("Invalid seeds, address must fall off the curve");return new ut(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,s;for(;r!=0;){try{const i=t.concat(gt.Buffer.from([r]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[s,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ut(t);return ma(e.toBytes())}}ou=ut;ut.default=new ou("11111111111111111111111111111111");ii.set(ut,{kind:"struct",fields:[["_bn","u256"]]});new ut("BPFLoader1111111111111111111111111111111111");const ir=1232,au=127,cu=64;class uu extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(uu.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class fu extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(fu.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Sr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Sr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class wi{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,o)=>{r.set(i.toBase58(),o)});const s=i=>{const o=r.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const mt=(n="publicKey")=>C.blob(32,n),er=(n="string")=>{const t=C.struct([C.u32("length"),C.u32("lengthPadding"),C.blob(C.offset(C.u32(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,c)=>{const f={chars:gt.Buffer.from(i,"utf8")};return r(f,o,c)},s.alloc=i=>C.u32().span+C.u32().span+gt.Buffer.from(i,"utf8").length,s},Ad=(n="authorized")=>C.struct([mt("staker"),mt("withdrawer")],n),kd=(n="lockup")=>C.struct([C.ns64("unixTimestamp"),C.ns64("epoch"),mt("custodian")],n),Id=(n="voteInit")=>C.struct([mt("nodePubkey"),mt("authorizedVoter"),mt("authorizedWithdrawer"),C.u8("commission")],n),Rd=(n="voteAuthorizeWithSeedArgs")=>C.struct([C.u32("voteAuthorizationType"),mt("currentAuthorityDerivedKeyOwnerPubkey"),er("currentAuthorityDerivedKeySeed"),mt("newAuthorized")],n);function Ue(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,(r&128)===0)break}return t}function Fe(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function ie(n,t){if(!n)throw new Error(t||"Assertion failed")}class Li{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,s=o=>{const c=o.toBase58();let f=r.get(c);return f===void 0&&(f={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,f)),f},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const c of o.keys){const f=s(c.pubkey);f.isSigner||=c.isSigner,f.isWritable||=c.isWritable}}return new Li(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];ie(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,f])=>f.isSigner&&f.isWritable),r=t.filter(([,f])=>f.isSigner&&!f.isWritable),s=t.filter(([,f])=>!f.isSigner&&f.isWritable),i=t.filter(([,f])=>!f.isSigner&&!f.isWritable),o={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{ie(e.length>0,"Expected at least one writable signer key");const[f]=e[0];ie(f===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([f])=>new ut(f)),...r.map(([f])=>new ut(f)),...s.map(([f])=>new ut(f)),...i.map(([f])=>new ut(f))];return[o,c]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const c=new ut(i),f=t.findIndex(g=>g.equals(c));f>=0&&(ie(f<256,"Max lookup table index exceeded"),r.push(f),s.push(c),this.keyMetaMap.delete(i))}return[r,s]}}const lu="Reached end of buffer unexpectedly";function nn(n){if(n.length===0)throw new Error(lu);return n.shift()}function Oe(n,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>n.length:e>=n.length)throw new Error(lu);return n.splice(...t)}class An{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ut(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:le.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new wi(this.staticAccountKeys)}static compile(t){const e=Li.compile(t.instructions,t.payerKey),[r,s]=e.getMessageComponents(),o=new wi(s).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:le.encode(c.data)}));return new An({header:r,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Fe(e,t);const r=this.instructions.map(A=>{const{accounts:B,programIdIndex:v}=A,S=Array.from(le.decode(A.data));let M=[];Fe(M,B.length);let L=[];return Fe(L,S.length),{programIdIndex:v,keyIndicesCount:gt.Buffer.from(M),keyIndices:B,dataLength:gt.Buffer.from(L),data:S}});let s=[];Fe(s,r.length);let i=gt.Buffer.alloc(ir);gt.Buffer.from(s).copy(i);let o=s.length;r.forEach(A=>{const v=C.struct([C.u8("programIdIndex"),C.blob(A.keyIndicesCount.length,"keyIndicesCount"),C.seq(C.u8("keyIndex"),A.keyIndices.length,"keyIndices"),C.blob(A.dataLength.length,"dataLength"),C.seq(C.u8("userdatum"),A.data.length,"data")]).encode(A,i,o);o+=v}),i=i.slice(0,o);const c=C.struct([C.blob(1,"numRequiredSignatures"),C.blob(1,"numReadonlySignedAccounts"),C.blob(1,"numReadonlyUnsignedAccounts"),C.blob(e.length,"keyCount"),C.seq(mt("key"),t,"keys"),mt("recentBlockhash")]),f={numRequiredSignatures:gt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:gt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:gt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:gt.Buffer.from(e),keys:this.accountKeys.map(A=>dr(A.toBytes())),recentBlockhash:le.decode(this.recentBlockhash)};let g=gt.Buffer.alloc(2048);const E=c.encode(f,g);return i.copy(g,E),g.slice(0,E+i.length)}static from(t){let e=[...t];const r=nn(e);if(r!==(r&au))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=nn(e),i=nn(e),o=Ue(e);let c=[];for(let B=0;B<o;B++){const v=Oe(e,0,Bn);c.push(new ut(gt.Buffer.from(v)))}const f=Oe(e,0,Bn),g=Ue(e);let E=[];for(let B=0;B<g;B++){const v=nn(e),S=Ue(e),M=Oe(e,0,S),L=Ue(e),F=Oe(e,0,L),H=le.encode(gt.Buffer.from(F));E.push({programIdIndex:v,accounts:M,data:H})}const A={header:{numRequiredSignatures:r,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:le.encode(gt.Buffer.from(f)),accountKeys:c,instructions:E};return new An(A)}}class bi{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new wi(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const s=t-r,i=this.addressTableLookups.reduce((o,c)=>o+c.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=r-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const s=t.find(i=>i.key.equals(r.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Li.compile(t.instructions,t.payerKey),r=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const E of i){const A=e.extractTableLookup(E);if(A!==void 0){const[B,{writable:v,readonly:S}]=A;r.push(B),s.writable.push(...v),s.readonly.push(...S)}}const[o,c]=e.getMessageComponents(),g=new wi(c,s).compileInstructions(t.instructions);return new bi({header:o,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:g,addressTableLookups:r})}serialize(){const t=Array();Fe(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Fe(r,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Fe(i,this.addressTableLookups.length);const o=C.struct([C.u8("prefix"),C.struct([C.u8("numRequiredSignatures"),C.u8("numReadonlySignedAccounts"),C.u8("numReadonlyUnsignedAccounts")],"header"),C.blob(t.length,"staticAccountKeysLength"),C.seq(mt(),this.staticAccountKeys.length,"staticAccountKeys"),mt("recentBlockhash"),C.blob(r.length,"instructionsLength"),C.blob(e.length,"serializedInstructions"),C.blob(i.length,"addressTableLookupsLength"),C.blob(s.length,"serializedAddressTableLookups")]),c=new Uint8Array(ir),g=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(E=>E.toBytes()),recentBlockhash:le.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},c);return c.slice(0,g)}serializeInstructions(){let t=0;const e=new Uint8Array(ir);for(const r of this.compiledInstructions){const s=Array();Fe(s,r.accountKeyIndexes.length);const i=Array();Fe(i,r.data.length);const o=C.struct([C.u8("programIdIndex"),C.blob(s.length,"encodedAccountKeyIndexesLength"),C.seq(C.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),C.blob(i.length,"encodedDataLength"),C.blob(r.data.length,"data")]);t+=o.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(ir);for(const r of this.addressTableLookups){const s=Array();Fe(s,r.writableIndexes.length);const i=Array();Fe(i,r.readonlyIndexes.length);const o=C.struct([mt("accountKey"),C.blob(s.length,"encodedWritableIndexesLength"),C.seq(C.u8(),r.writableIndexes.length,"writableIndexes"),C.blob(i.length,"encodedReadonlyIndexesLength"),C.seq(C.u8(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=nn(e),s=r&au;ie(r!==s,"Expected versioned message but received legacy message");const i=s;ie(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:nn(e),numReadonlySignedAccounts:nn(e),numReadonlyUnsignedAccounts:nn(e)},c=[],f=Ue(e);for(let S=0;S<f;S++)c.push(new ut(Oe(e,0,Bn)));const g=le.encode(Oe(e,0,Bn)),E=Ue(e),A=[];for(let S=0;S<E;S++){const M=nn(e),L=Ue(e),F=Oe(e,0,L),H=Ue(e),D=new Uint8Array(Oe(e,0,H));A.push({programIdIndex:M,accountKeyIndexes:F,data:D})}const B=Ue(e),v=[];for(let S=0;S<B;S++){const M=new ut(Oe(e,0,Bn)),L=Ue(e),F=Oe(e,0,L),H=Ue(e),D=Oe(e,0,H);v.push({accountKey:M,writableIndexes:F,readonlyIndexes:D})}return new bi({header:o,staticAccountKeys:c,recentBlockhash:g,compiledInstructions:A,addressTableLookups:v})}}let wn=(function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n})({});const Md=gt.Buffer.alloc(cu).fill(0);class wa{constructor(t){this.keys=void 0,this.programId=void 0,this.data=gt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class bn{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new wa(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let M=0;M<e.length;M++)if(e[M].programId===void 0)throw new Error(`Transaction instruction index ${M} has undefined program id`);const s=[],i=[];e.forEach(M=>{M.keys.forEach(F=>{i.push({...F})});const L=M.programId.toString();s.includes(L)||s.push(L)}),s.forEach(M=>{i.push({pubkey:new ut(M),isSigner:!1,isWritable:!1})});const o=[];i.forEach(M=>{const L=M.pubkey.toString(),F=o.findIndex(H=>H.pubkey.toString()===L);F>-1?(o[F].isWritable=o[F].isWritable||M.isWritable,o[F].isSigner=o[F].isSigner||M.isSigner):o.push(M)}),o.sort(function(M,L){if(M.isSigner!==L.isSigner)return M.isSigner?-1:1;if(M.isWritable!==L.isWritable)return M.isWritable?-1:1;const F={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return M.pubkey.toBase58().localeCompare(L.pubkey.toBase58(),"en",F)});const c=o.findIndex(M=>M.pubkey.equals(r));if(c>-1){const[M]=o.splice(c,1);M.isSigner=!0,M.isWritable=!0,o.unshift(M)}else o.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const M of this.signatures){const L=o.findIndex(F=>F.pubkey.equals(M.publicKey));if(L>-1)o[L].isSigner||(o[L].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${M.publicKey.toString()}`)}let f=0,g=0,E=0;const A=[],B=[];o.forEach(({pubkey:M,isSigner:L,isWritable:F})=>{L?(A.push(M.toString()),f+=1,F||(g+=1)):(B.push(M.toString()),F||(E+=1))});const v=A.concat(B),S=e.map(M=>{const{data:L,programId:F}=M;return{programIdIndex:v.indexOf(F.toString()),accounts:M.keys.map(H=>v.indexOf(H.pubkey.toString())),data:le.encode(L)}});return S.forEach(M=>{ie(M.programIdIndex>=0),M.accounts.forEach(L=>ie(L>=0))}),new An({header:{numRequiredSignatures:f,numReadonlySignedAccounts:g,numReadonlyUnsignedAccounts:E},accountKeys:v,recentBlockhash:t,instructions:S})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const s=r.toString();return e.has(s)?!1:(e.add(s),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),r.push(i))}const s=this._compile();this._partialSign(s,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(s=>{const i=_d(r,s.secretKey);this._addSignature(s.publicKey,dr(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){ie(e.length===64);const r=this.signatures.findIndex(s=>t.equals(s.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=gt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(r.missing||=[]).push(i):xd(s,t,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,r=[];Fe(r,e.length);const s=r.length+e.length*64+t.length,i=gt.Buffer.alloc(s);return ie(e.length<256),gt.Buffer.from(r).copy(i,0),e.forEach(({signature:o},c)=>{o!==null&&(ie(o.length===64,"signature has invalid length"),gt.Buffer.from(o).copy(i,r.length+c*64))}),t.copy(i,r.length+e.length*64),ie(i.length<=ir,`Transaction too large: ${i.length} > ${ir}`),i}get keys(){return ie(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return ie(this.instructions.length===1),this.instructions[0].programId}get data(){return ie(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=Ue(e);let s=[];for(let i=0;i<r;i++){const o=Oe(e,0,cu);s.push(le.encode(gt.Buffer.from(o)))}return bn.populate(An.from(e),s)}static populate(t,e=[]){const r=new bn;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==le.encode(Md)?null:le.decode(s),publicKey:t.accountKeys[i]};r.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const c=t.accountKeys[o];return{pubkey:c,isSigner:r.signatures.some(f=>f.publicKey.toString()===c.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});r.instructions.push(new wa({keys:i,programId:t.accountKeys[s.programIdIndex],data:le.decode(s.data)}))}),r._message=t,r._json=r.toJSON(),r}}const Td=160,Cd=64,Ld=Td/Cd,Ud=1e3/Ld;new ut("SysvarC1ock11111111111111111111111111111111");new ut("SysvarEpochSchedu1e111111111111111111111111");new ut("Sysvar1nstructions1111111111111111111111111");new ut("SysvarRecentB1ockHashes11111111111111111111");new ut("SysvarRent111111111111111111111111111111111");new ut("SysvarRewards111111111111111111111111111111");new ut("SysvarS1otHashes111111111111111111111111111");new ut("SysvarS1otHistory11111111111111111111111111");new ut("SysvarStakeHistory1111111111111111111111111");class ba extends Error{constructor({action:t,signature:e,transactionMessage:r,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let c;switch(t){case"send":c=`Transaction ${e} resulted in an error. 
${r}. `+i+o;break;case"simulate":c=`Simulation failed. 
Message: ${r}. 
`+i+o;break;default:c=`Unknown action '${(f=>f)(t)}'`}super(c),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=r,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,r)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else r(new Error("Log messages not found"))}).catch(r)})),await this.transactionLogs}}class ot extends Error{constructor({code:t,message:e,data:r},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}function Jn(n){return new Promise(t=>setTimeout(t,n))}const Fd=C.nu64("lamportsPerSignature"),hu=C.struct([C.u32("version"),C.u32("state"),mt("authorizedPubkey"),mt("nonce"),C.struct([Fd],"feeCalculator")]);hu.span;class ho{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=hu.decode(dr(t),0);return new ho({authorizedPubkey:new ut(e.authorizedPubkey),nonce:new ut(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function pr(n){const t=C.blob(8,n),e=t.decode.bind(t),r=t.encode.bind(t),s=t,i=Eh();return s.decode=(o,c)=>{const f=e(o,c);return i.decode(f)},s.encode=(o,c,f)=>{const g=i.encode(o);return r(g,c,f)},s}Object.freeze({Create:{index:0,layout:C.struct([C.u32("instruction"),C.ns64("lamports"),C.ns64("space"),mt("programId")])},Assign:{index:1,layout:C.struct([C.u32("instruction"),mt("programId")])},Transfer:{index:2,layout:C.struct([C.u32("instruction"),pr("lamports")])},CreateWithSeed:{index:3,layout:C.struct([C.u32("instruction"),mt("base"),er("seed"),C.ns64("lamports"),C.ns64("space"),mt("programId")])},AdvanceNonceAccount:{index:4,layout:C.struct([C.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:C.struct([C.u32("instruction"),mt("authorized")])},AuthorizeNonceAccount:{index:7,layout:C.struct([C.u32("instruction"),mt("authorized")])},Allocate:{index:8,layout:C.struct([C.u32("instruction"),C.ns64("space")])},AllocateWithSeed:{index:9,layout:C.struct([C.u32("instruction"),mt("base"),er("seed"),C.ns64("space"),mt("programId")])},AssignWithSeed:{index:10,layout:C.struct([C.u32("instruction"),mt("base"),er("seed"),mt("programId")])},TransferWithSeed:{index:11,layout:C.struct([C.u32("instruction"),pr("lamports"),er("seed"),mt("programId")])},UpgradeNonceAccount:{index:12,layout:C.struct([C.u32("instruction")])}});new ut("11111111111111111111111111111111");new ut("BPFLoader2111111111111111111111111111111111");function Od(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Es,va;function Nd(){if(va)return Es;va=1;var n=Object.prototype.toString,t=Object.keys||function(r){var s=[];for(var i in r)s.push(i);return s};function e(r,s){var i,o,c,f,g,E,A;if(r===!0)return"true";if(r===!1)return"false";switch(typeof r){case"object":if(r===null)return null;if(r.toJSON&&typeof r.toJSON=="function")return e(r.toJSON(),s);if(A=n.call(r),A==="[object Array]"){for(c="[",o=r.length-1,i=0;i<o;i++)c+=e(r[i],!0)+",";return o>-1&&(c+=e(r[i],!0)),c+"]"}else if(A==="[object Object]"){for(f=t(r).sort(),o=f.length,c="",i=0;i<o;)g=f[i],E=e(r[g],!1),E!==void 0&&(c&&(c+=","),c+=JSON.stringify(g)+":"+E),i++;return"{"+c+"}"}else return JSON.stringify(r);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(r);default:return isFinite(r)?r:null}}return Es=function(r){var s=e(r,!1);if(s!==void 0)return""+s},Es}var qd=Nd(),_a=Od(qd);const br=32;function Ss(n){let t=0;for(;n>1;)n/=2,t++;return t}function Pd(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class Dd{constructor(t,e,r,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Ss(Pd(t+br+1))-Ss(br)-1,r=this.getSlotsInEpoch(e),s=t-(r-br);return[e,s]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*br:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Ss(br)):this.slotsPerEpoch}}var zd=globalThis.fetch;class Kd extends od{constructor(t,e,r){const s=i=>{const o=id(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,r),this.underlyingSocket=void 0}call(...t){const e=this.underlyingSocket?.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){const e=this.underlyingSocket?.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function $d(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const xa=56;class Ea{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=$d(Hd,t),r=t.length-xa;ie(r>=0,"lookup table is invalid"),ie(r%32===0,"lookup table is invalid");const s=r/32,{addresses:i}=C.struct([C.seq(mt(),s,"addresses")]).decode(t.slice(xa));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ut(e.authority[0]):void 0,addresses:i.map(o=>new ut(o))}}}const Hd={index:1,layout:C.struct([C.u32("typeIndex"),pr("deactivationSlot"),C.nu64("lastExtendedSlot"),C.u8("lastExtendedStartIndex"),C.u8(),C.seq(mt(),C.offset(C.u8(),-1),"authority")])},Vd=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function jd(n){const t=n.match(Vd);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,s,i]=t,o=n.startsWith("https:")?"wss:":"ws:",c=s==null?null:parseInt(s.slice(1),10),f=c==null?"":`:${c+1}`;return`${o}//${r}${f}${i}`}const Lt=Kr(uo(ut),J(),n=>new ut(n)),du=fo([J(),Ct("base64")]),po=Kr(uo(gt.Buffer),du,n=>gt.Buffer.from(n[0],"base64")),Wd=30*1e3;function Gd(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Bt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...s}=n;t=r,e=s}return{commitment:t,config:e}}function Sa(n){return n.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function pu(n){return xe([Y({jsonrpc:Ct("2.0"),id:J(),result:n}),Y({jsonrpc:Ct("2.0"),id:J(),error:Y({code:mr(),message:J(),data:ct(Mh())})})])}const Zd=pu(mr());function pt(n){return Kr(pu(n),Zd,t=>"error"in t?t:{...t,result:tt(t.result,n)})}function Dt(n){return pt(Y({context:Y({slot:$()}),value:n}))}function Ui(n){return Y({context:Y({slot:$()}),value:n})}function Bs(n,t){return n===0?new bi({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ut(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:le.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new An(t)}const Yd=Y({foundation:$(),foundationTerm:$(),initial:$(),taper:$(),terminal:$()}),Xd=pt(nt(rt(Y({epoch:$(),effectiveSlot:$(),amount:$(),postBalance:$(),commission:ct(rt($()))})))),Jd=nt(Y({slot:$(),prioritizationFee:$()})),Qd=Y({total:$(),validator:$(),foundation:$(),epoch:$()}),t0=Y({epoch:$(),slotIndex:$(),slotsInEpoch:$(),absoluteSlot:$(),blockHeight:ct($()),transactionCount:ct($())}),e0=Y({slotsPerEpoch:$(),leaderScheduleSlotOffset:$(),warmup:Ge(),firstNormalEpoch:$(),firstNormalSlot:$()}),n0=Gc(J(),nt($())),Hn=rt(xe([Y({}),J()])),r0=Y({err:Hn}),i0=Ct("receivedSignature"),s0=Y({"solana-core":J(),"feature-set":ct($())}),o0=Y({program:J(),programId:Lt,parsed:mr()}),a0=Y({programId:Lt,accounts:nt(Lt),data:J()}),Ba=Dt(Y({err:rt(xe([Y({}),J()])),logs:rt(nt(J())),accounts:ct(rt(nt(rt(Y({executable:Ge(),owner:J(),lamports:$(),data:nt(J()),rentEpoch:ct($())}))))),unitsConsumed:ct($()),returnData:ct(rt(Y({programId:J(),data:fo([J(),Ct("base64")])}))),innerInstructions:ct(rt(nt(Y({index:$(),instructions:nt(xe([o0,a0]))}))))})),c0=Dt(Y({byIdentity:Gc(J(),nt($())),range:Y({firstSlot:$(),lastSlot:$()})}));function u0(n,t,e,r,s,i){const o=e||zd;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let f;return r&&(f=async(E,A)=>{const B=await new Promise((v,S)=>{try{r(E,A,(M,L)=>v([M,L]))}catch(M){S(M)}});return await o(...B)}),new td(async(E,A)=>{const B={method:"POST",body:E,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},up)};try{let v=5,S,M=500;for(;f?S=await f(n,B):S=await o(n,B),!(S.status!==429||s===!0||(v-=1,v===0));)console.error(`Server responded with ${S.status} ${S.statusText}.  Retrying after ${M}ms delay...`),await Jn(M),M*=2;const L=await S.text();S.ok?A(null,L):A(new Error(`${S.status} ${S.statusText}: ${L}`))}catch(v){v instanceof Error&&A(v)}},{})}function f0(n){return(t,e)=>new Promise((r,s)=>{n.request(t,e,(i,o)=>{if(i){s(i);return}r(o)})})}function l0(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const s=t.map(i=>n.request(i.methodName,i.args));n.request(s,(i,o)=>{if(i){r(i);return}e(o)})})}const h0=pt(Yd),d0=pt(Qd),p0=pt(Jd),g0=pt(t0),m0=pt(e0),y0=pt(n0),w0=pt($()),b0=Dt(Y({total:$(),circulating:$(),nonCirculating:$(),nonCirculatingAccounts:nt(Lt)})),Ds=Y({amount:J(),uiAmount:rt($()),decimals:$(),uiAmountString:ct(J())}),v0=Dt(nt(Y({address:Lt,amount:J(),uiAmount:rt($()),decimals:$(),uiAmountString:ct(J())}))),_0=Dt(nt(Y({pubkey:Lt,account:Y({executable:Ge(),owner:Lt,lamports:$(),data:po,rentEpoch:$()})}))),zs=Y({program:J(),parsed:mr(),space:$()}),x0=Dt(nt(Y({pubkey:Lt,account:Y({executable:Ge(),owner:Lt,lamports:$(),data:zs,rentEpoch:$()})}))),E0=Dt(nt(Y({lamports:$(),address:Lt}))),Tr=Y({executable:Ge(),owner:Lt,lamports:$(),data:po,rentEpoch:$()}),S0=Y({pubkey:Lt,account:Tr}),B0=Kr(xe([uo(gt.Buffer),zs]),xe([du,zs]),n=>Array.isArray(n)?tt(n,po):n),Ks=Y({executable:Ge(),owner:Lt,lamports:$(),data:B0,rentEpoch:$()}),A0=Y({pubkey:Lt,account:Ks}),k0=Y({state:xe([Ct("active"),Ct("inactive"),Ct("activating"),Ct("deactivating")]),active:$(),inactive:$()}),I0=pt(nt(Y({signature:J(),slot:$(),err:Hn,memo:rt(J()),blockTime:ct(rt($()))}))),R0=pt(nt(Y({signature:J(),slot:$(),err:Hn,memo:rt(J()),blockTime:ct(rt($()))}))),M0=Y({subscription:$(),result:Ui(Tr)}),T0=Y({pubkey:Lt,account:Tr}),C0=Y({subscription:$(),result:Ui(T0)}),L0=Y({parent:$(),slot:$(),root:$()}),U0=Y({subscription:$(),result:L0}),F0=xe([Y({type:xe([Ct("firstShredReceived"),Ct("completed"),Ct("optimisticConfirmation"),Ct("root")]),slot:$(),timestamp:$()}),Y({type:Ct("createdBank"),parent:$(),slot:$(),timestamp:$()}),Y({type:Ct("frozen"),slot:$(),timestamp:$(),stats:Y({numTransactionEntries:$(),numSuccessfulTransactions:$(),numFailedTransactions:$(),maxTransactionsPerEntry:$()})}),Y({type:Ct("dead"),slot:$(),timestamp:$(),err:J()})]),O0=Y({subscription:$(),result:F0}),N0=Y({subscription:$(),result:Ui(xe([r0,i0]))}),q0=Y({subscription:$(),result:$()}),P0=Y({pubkey:J(),gossip:rt(J()),tpu:rt(J()),rpc:rt(J()),version:rt(J())}),Aa=Y({votePubkey:J(),nodePubkey:J(),activatedStake:$(),epochVoteAccount:Ge(),epochCredits:nt(fo([$(),$(),$()])),commission:$(),lastVote:$(),rootSlot:rt($())}),D0=pt(Y({current:nt(Aa),delinquent:nt(Aa)})),z0=xe([Ct("processed"),Ct("confirmed"),Ct("finalized")]),K0=Y({slot:$(),confirmations:rt($()),err:Hn,confirmationStatus:ct(z0)}),$0=Dt(nt(rt(K0))),H0=pt($()),gu=Y({accountKey:Lt,writableIndexes:nt($()),readonlyIndexes:nt($())}),go=Y({signatures:nt(J()),message:Y({accountKeys:nt(J()),header:Y({numRequiredSignatures:$(),numReadonlySignedAccounts:$(),numReadonlyUnsignedAccounts:$()}),instructions:nt(Y({accounts:nt($()),data:J(),programIdIndex:$()})),recentBlockhash:J(),addressTableLookups:ct(nt(gu))})}),mu=Y({pubkey:Lt,signer:Ge(),writable:Ge(),source:ct(xe([Ct("transaction"),Ct("lookupTable")]))}),yu=Y({accountKeys:nt(mu),signatures:nt(J())}),wu=Y({parsed:mr(),program:J(),programId:Lt}),bu=Y({accounts:nt(Lt),data:J(),programId:Lt}),V0=xe([bu,wu]),j0=xe([Y({parsed:mr(),program:J(),programId:J()}),Y({accounts:nt(J()),data:J(),programId:J()})]),vu=Kr(V0,j0,n=>"accounts"in n?tt(n,bu):tt(n,wu)),_u=Y({signatures:nt(J()),message:Y({accountKeys:nt(mu),instructions:nt(vu),recentBlockhash:J(),addressTableLookups:ct(rt(nt(gu)))})}),vi=Y({accountIndex:$(),mint:J(),owner:ct(J()),programId:ct(J()),uiTokenAmount:Ds}),xu=Y({writable:nt(Lt),readonly:nt(Lt)}),Fi=Y({err:Hn,fee:$(),innerInstructions:ct(rt(nt(Y({index:$(),instructions:nt(Y({accounts:nt($()),data:J(),programIdIndex:$()}))})))),preBalances:nt($()),postBalances:nt($()),logMessages:ct(rt(nt(J()))),preTokenBalances:ct(rt(nt(vi))),postTokenBalances:ct(rt(nt(vi))),loadedAddresses:ct(xu),computeUnitsConsumed:ct($()),costUnits:ct($())}),mo=Y({err:Hn,fee:$(),innerInstructions:ct(rt(nt(Y({index:$(),instructions:nt(vu)})))),preBalances:nt($()),postBalances:nt($()),logMessages:ct(rt(nt(J()))),preTokenBalances:ct(rt(nt(vi))),postTokenBalances:ct(rt(nt(vi))),loadedAddresses:ct(xu),computeUnitsConsumed:ct($()),costUnits:ct($())}),yr=xe([Ct(0),Ct("legacy")]),Vn=Y({pubkey:J(),lamports:$(),postBalance:rt($()),rewardType:rt(J()),commission:ct(rt($()))}),W0=pt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:$(),transactions:nt(Y({transaction:go,meta:rt(Fi),version:ct(yr)})),rewards:ct(nt(Vn)),blockTime:rt($()),blockHeight:rt($())}))),G0=pt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:$(),rewards:ct(nt(Vn)),blockTime:rt($()),blockHeight:rt($())}))),Z0=pt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:$(),transactions:nt(Y({transaction:yu,meta:rt(Fi),version:ct(yr)})),rewards:ct(nt(Vn)),blockTime:rt($()),blockHeight:rt($())}))),Y0=pt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:$(),transactions:nt(Y({transaction:_u,meta:rt(mo),version:ct(yr)})),rewards:ct(nt(Vn)),blockTime:rt($()),blockHeight:rt($())}))),X0=pt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:$(),transactions:nt(Y({transaction:yu,meta:rt(mo),version:ct(yr)})),rewards:ct(nt(Vn)),blockTime:rt($()),blockHeight:rt($())}))),J0=pt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:$(),rewards:ct(nt(Vn)),blockTime:rt($()),blockHeight:rt($())}))),Q0=pt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:$(),transactions:nt(Y({transaction:go,meta:rt(Fi)})),rewards:ct(nt(Vn)),blockTime:rt($())}))),ka=pt(rt(Y({blockhash:J(),previousBlockhash:J(),parentSlot:$(),signatures:nt(J()),blockTime:rt($())}))),As=pt(rt(Y({slot:$(),meta:rt(Fi),blockTime:ct(rt($())),transaction:go,version:ct(yr)}))),ei=pt(rt(Y({slot:$(),transaction:_u,meta:rt(mo),blockTime:ct(rt($())),version:ct(yr)}))),tp=Dt(Y({blockhash:J(),lastValidBlockHeight:$()})),ep=Dt(Ge()),np=Y({slot:$(),numTransactions:$(),numSlots:$(),samplePeriodSecs:$()}),rp=pt(nt(np)),ip=Dt(rt(Y({feeCalculator:Y({lamportsPerSignature:$()})}))),sp=pt(J()),op=pt(J()),ap=Y({err:Hn,logs:nt(J()),signature:J()}),cp=Y({result:Ui(ap),subscription:$()}),up={"solana-client":"js/1.0.0-maintenance"};class fp{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const g={};return async E=>{const{commitment:A,config:B}=Bt(E),v=this._buildArgs([],A,void 0,B),S=_a(v);return g[S]=g[S]??(async()=>{try{const M=await this._rpcRequest("getBlockHeight",v),L=tt(M,pt($()));if("error"in L)throw new ot(L.error,"failed to get block height information");return L.result}finally{delete g[S]}})(),await g[S]}})();let r,s,i,o,c,f;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,c=e.disableRetryOnRateLimit,f=e.httpAgent),this._rpcEndpoint=Gd(t),this._rpcWsEndpoint=r||jd(t),this._rpcClient=u0(t,s,i,o,c,f),this._rpcRequest=f0(this._rpcClient),this._rpcBatchRequest=l0(this._rpcClient),this._rpcWebSocket=new Kd(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:s}=Bt(e),i=this._buildArgs([t.toBase58()],r,void 0,s),o=await this._rpcRequest("getBalance",i),c=tt(o,Dt($()));if("error"in c)throw new ot(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=tt(e,pt(rt($())));if("error"in r)throw new ot(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=tt(t,pt($()));if("error"in e)throw new ot(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=tt(t,w0);if("error"in e)throw new ot(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),s=tt(r,b0);if("error"in s)throw new ot(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",r),i=tt(s,Dt(Ds));if("error"in i)throw new ot(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",r),i=tt(s,Dt(Ds));if("error"in i)throw new ot(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:s,config:i}=Bt(r);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const c=this._buildArgs(o,s,"base64",i),f=await this._rpcRequest("getTokenAccountsByOwner",c),g=tt(f,_0);if("error"in g)throw new ot(g.error,`failed to get token accounts owned by account ${t.toBase58()}`);return g.result}async getParsedTokenAccountsByOwner(t,e,r){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,r,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),c=tt(o,x0);if("error"in c)throw new ot(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",r),i=tt(s,E0);if("error"in i)throw new ot(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",r),i=tt(s,v0);if("error"in i)throw new ot(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:s}=Bt(e),i=this._buildArgs([t.toBase58()],r,"base64",s),o=await this._rpcRequest("getAccountInfo",i),c=tt(o,Dt(rt(Tr)));if("error"in c)throw new ot(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:r,config:s}=Bt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),c=tt(o,Dt(rt(Ks)));if("error"in c)throw new ot(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:s}=Bt(e),i=t.map(g=>g.toBase58()),o=this._buildArgs([i],r,"jsonParsed",s),c=await this._rpcRequest("getMultipleAccounts",o),f=tt(c,Dt(nt(rt(Ks))));if("error"in f)throw new ot(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:s}=Bt(e),i=t.map(g=>g.toBase58()),o=this._buildArgs([i],r,"base64",s),c=await this._rpcRequest("getMultipleAccounts",o),f=tt(c,Dt(nt(rt(Tr))));if("error"in f)throw new ot(f.error,`failed to get info for accounts ${i}`);return f.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:s,config:i}=Bt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:r??i?.epoch}),c=await this._rpcRequest("getStakeActivation",o),f=tt(c,pt(k0));if("error"in f)throw new ot(f.error,`failed to get Stake Activation ${t.toBase58()}`);return f.result}async getProgramAccounts(t,e){const{commitment:r,config:s}=Bt(e),{encoding:i,...o}=s||{},c=this._buildArgs([t.toBase58()],r,i||"base64",{...o,...o.filters?{filters:Sa(o.filters)}:null}),f=await this._rpcRequest("getProgramAccounts",c),g=nt(S0),E=o.withContext===!0?tt(f,Dt(g)):tt(f,pt(g));if("error"in E)throw new ot(E.error,`failed to get accounts owned by program ${t.toBase58()}`);return E.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:s}=Bt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),c=tt(o,pt(nt(A0)));if("error"in c)throw new ot(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){let r;if(typeof t=="string")r=t;else{const i=t;if(i.abortSignal?.aborted)return Promise.reject(i.abortSignal.reason);r=i.signature}let s;try{s=le.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return ie(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,s,i=!1;const o=new Promise((f,g)=>{try{r=this.onSignature(e,(A,B)=>{r=void 0;const v={context:B,value:A};f({__type:wn.PROCESSED,response:v})},t);const E=new Promise(A=>{r==null?A():s=this._onSubscriptionStateChange(r,B=>{B==="subscribed"&&A()})});(async()=>{if(await E,i)return;const A=await this.getSignatureStatus(e);if(i||A==null)return;const{context:B,value:v}=A;if(v!=null)if(v?.err)g(v.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(v.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(v.confirmationStatus==="processed"||v.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,f({__type:wn.PROCESSED,response:{context:B,value:v}})}})()}catch(E){g(E)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:s}}){let i=!1;const o=new Promise(A=>{const B=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let v=await B();if(!i){for(;v<=r;)if(await Jn(1e3),i||(v=await B(),i))return;A({__type:wn.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:f}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),g=this.getCancellationPromise(e);let E;try{const A=await Promise.race([g,f,o]);if(A.__type===wn.PROCESSED)E=A.response;else throw new uu(s)}finally{i=!0,c()}return E}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let c=!1;const f=new Promise(v=>{let S=i,M=null;const L=async()=>{try{const{context:F,value:H}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:r});return M=F.slot,H?.nonce}catch{return S}};(async()=>{if(S=await L(),!c)for(;;){if(i!==S){v({__type:wn.NONCE_INVALID,slotInWhichNonceDidAdvance:M});return}if(await Jn(2e3),c||(S=await L(),c))return}})()}),{abortConfirmation:g,confirmationPromise:E}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),A=this.getCancellationPromise(e);let B;try{const v=await Promise.race([A,E,f]);if(v.__type===wn.PROCESSED)B=v.response;else{let S;for(;;){const M=await this.getSignatureStatus(o);if(M==null)break;if(M.context.slot<(v.slotInWhichNonceDidAdvance??r)){await Jn(400);continue}S=M;break}if(S?.value){const M=t||"finalized",{confirmationStatus:L}=S.value;switch(M){case"processed":case"recent":if(L!=="processed"&&L!=="confirmed"&&L!=="finalized")throw new Sr(o);break;case"confirmed":case"single":case"singleGossip":if(L!=="confirmed"&&L!=="finalized")throw new Sr(o);break;case"finalized":case"max":case"root":if(L!=="finalized")throw new Sr(o);break;default:}B={context:S.context,value:{err:S.value.err}}}else throw new Sr(o)}}finally{c=!0,g()}return B}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const s=new Promise(f=>{let g=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{g=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>f({__type:wn.TIMED_OUT,timeoutMs:g}),g)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const f=await Promise.race([o,s]);if(f.__type===wn.PROCESSED)c=f.response;else throw new fu(e,f.timeoutMs/1e3)}finally{clearTimeout(r),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=tt(t,pt(nt(P0)));if("error"in e)throw new ot(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),s=tt(r,D0);if("error"in s)throw new ot(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:r}=Bt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",s),o=tt(i,pt($()));if("error"in o)throw new ot(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:r}=Bt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",s),o=tt(i,pt(J()));if("error"in o)throw new ot(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const r=[t,e],s=await this._rpcRequest("getSlotLeaders",r),i=tt(s,pt(nt(Lt)));if("error"in i)throw new ot(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:s}=await this.getSignatureStatuses([t],e);ie(s.length===1);const i=s[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const s=await this._rpcRequest("getSignatureStatuses",r),i=tt(s,$0);if("error"in i)throw new ot(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Bt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",s),o=tt(i,pt($()));if("error"in o)throw new ot(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),s=tt(r,h0);if("error"in s)throw new ot(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,r){const{commitment:s,config:i}=Bt(r),o=this._buildArgs([t.map(g=>g.toBase58())],s,void 0,{...i,epoch:e??i?.epoch}),c=await this._rpcRequest("getInflationReward",o),f=tt(c,Xd);if("error"in f)throw new ot(f.error,"failed to get inflation reward");return f.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=tt(t,d0);if("error"in e)throw new ot(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Bt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",s),o=tt(i,g0);if("error"in o)throw new ot(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=tt(t,m0);if("error"in e)throw new ot(e.error,"failed to get epoch schedule");const r=e.result;return new Dd(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=tt(t,y0);if("error"in e)throw new ot(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=tt(s,H0);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=tt(e,rp);if("error"in r)throw new ot(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=tt(s,ip);if("error"in i)throw new ot(i.error,"failed to get fee calculator");const{context:o,value:c}=i.result;return{context:o,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const r=dr(t.serialize()).toString("base64"),s=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",s),o=tt(i,Dt(rt($())));if("error"in o)throw new ot(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){const e=t?.lockedWritableAccounts?.map(o=>o.toBase58()),r=e?.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",r),i=tt(s,p0);if("error"in i)throw new ot(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Bt(t),s=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",s),o=tt(i,tp);if("error"in o)throw new ot(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:r,config:s}=Bt(e),i=this._buildArgs([t],r,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),c=tt(o,ep);if("error"in c)throw new ot(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=tt(t,pt(s0));if("error"in e)throw new ot(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=tt(t,pt(J()));if("error"in e)throw new ot(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:s}=Bt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=tt(o,Z0);if("error"in c)throw c.error;return c.result}case"none":{const c=tt(o,G0);if("error"in c)throw c.error;return c.result}default:{const c=tt(o,W0);if("error"in c)throw c.error;const{result:f}=c;return f?{...f,transactions:f.transactions.map(({transaction:g,meta:E,version:A})=>({meta:E,transaction:{...g,message:Bs(A,g.message)},version:A}))}:null}}}catch(c){throw new ot(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:s}=Bt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s?.transactionDetails){case"accounts":{const c=tt(o,X0);if("error"in c)throw c.error;return c.result}case"none":{const c=tt(o,J0);if("error"in c)throw c.error;return c.result}default:{const c=tt(o,Y0);if("error"in c)throw c.error;return c.result}}}catch(c){throw new ot(c,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:c,...f}=t;r=c,e=f}const s=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=tt(i,c0);if("error"in o)throw new ot(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:r,config:s}=Bt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,s),o=await this._rpcRequest("getTransaction",i),c=tt(o,As);if("error"in c)throw new ot(c.error,"failed to get transaction");const f=c.result;return f&&{...f,transaction:{...f.transaction,message:Bs(f.version,f.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:s}=Bt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),c=tt(o,ei);if("error"in c)throw new ot(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:r,config:s}=Bt(e),i=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(f=>{const g=tt(f,ei);if("error"in g)throw new ot(g.error,"failed to get transactions");return g.result})}async getTransactions(t,e){const{commitment:r,config:s}=Bt(e),i=t.map(f=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([f],r,void 0,s)}));return(await this._rpcBatchRequest(i)).map(f=>{const g=tt(f,As);if("error"in g)throw new ot(g.error,"failed to get transactions");const E=g.result;return E&&{...E,transaction:{...E.transaction,message:Bs(E.version,E.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",r),i=tt(s,Q0);if("error"in i)throw new ot(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const c={...o,transactions:o.transactions.map(({transaction:f,meta:g})=>{const E=new An(f.message);return{meta:g,transaction:{...f,message:E}}})};return{...c,transactions:c.transactions.map(({transaction:f,meta:g})=>({meta:g,transaction:bn.populate(f.message,f.signatures)}))}}async getBlocks(t,e,r){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",s),o=tt(i,pt(nt($())));if("error"in o)throw new ot(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=tt(s,ka);if("error"in i)throw new ot(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",r),i=tt(s,ka);if("error"in i)throw new ot(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",r),i=tt(s,As);if("error"in i)throw new ot(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const c=new An(o.transaction.message),f=o.transaction.signatures;return{...o,transaction:bn.populate(c,f)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",r),i=tt(s,ei);if("error"in i)throw new ot(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(o=>{const c=tt(o,ei);if("error"in c)throw new ot(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,r){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const f=await this.getConfirmedBlockSignatures(e,"finalized");f.signatures.length>0&&(s.until=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}let o=await this.getSlot("finalized");for(;!("before"in s)&&(r++,!(r>o));)try{const f=await this.getConfirmedBlockSignatures(r);f.signatures.length>0&&(s.before=f.signatures[f.signatures.length-1].toString())}catch(f){if(f instanceof Error&&f.message.includes("skipped"))continue;throw f}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(f=>f.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=tt(i,I0);if("error"in o)throw new ot(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,r){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=tt(i,R0);if("error"in o)throw new ot(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Ea({key:t,state:Ea.deserialize(s.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=ho.fromAccountData(s.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=tt(r,sp);if("error"in s)throw new ot(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Jn(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Wd;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Jn(Ud/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Bt(t),s=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=tt(i,Dt($()));if("error"in o)throw new ot(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,r){if("message"in t){const M=t.serialize(),L=gt.Buffer.from(M).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const F=e||{};F.encoding="base64","commitment"in F||(F.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(F.innerInstructions=e.innerInstructions);const H=[L,F],D=await this._rpcRequest("simulateTransaction",H),X=tt(D,Ba);if("error"in X)throw new Error("failed to simulate transaction: "+X.error.message);return X.result}let s;if(t instanceof bn){let S=t;s=new bn,s.feePayer=S.feePayer,s.instructions=t.instructions,s.nonceInfo=S.nonceInfo,s.signatures=S.signatures}else s=bn.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let S=this._disableBlockhashCaching;for(;;){const M=await this._blockhashWithExpiryBlockHeight(S);if(s.lastValidBlockHeight=M.lastValidBlockHeight,s.recentBlockhash=M.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const L=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(L)&&!this._blockhashInfo.transactionSignatures.includes(L)){this._blockhashInfo.simulatedSignatures.push(L);break}else S=!0}}const o=s._compile(),c=o.serialize(),g=s._serialize(c).toString("base64"),E={encoding:"base64",commitment:this.commitment};if(r){const S=(Array.isArray(r)?r:o.nonProgramIds()).map(M=>M.toBase58());E.accounts={encoding:"base64",addresses:S}}i&&(E.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(E.innerInstructions=e.innerInstructions);const A=[g,E],B=await this._rpcRequest("simulateTransaction",A),v=tt(B,Ba);if("error"in v){let S;if("data"in v.error&&(S=v.error.data.logs,S&&Array.isArray(S))){const M=`
    `,L=M+S.join(M);console.error(v.error.message,L)}throw new ba({action:"simulate",signature:"",transactionMessage:v.error.message,logs:S})}return v.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const f=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(f))o=!0;else{this._blockhashInfo.transactionSignatures.push(f);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=dr(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),s&&(r.skipPreflight=s),i&&(r.preflightCommitment=i);const o=[t,r],c=await this._rpcRequest("sendTransaction",o),f=tt(c,op);if("error"in f){let g;throw"data"in f.error&&(g=f.error.data.logs),new ba({action:s?"send":"simulate",signature:"",transactionMessage:f.error.message,logs:g})}return f.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){const r=this._subscriptionsByHash[t]?.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const s=this._subscriptionStateChangeCallbacksByHash[t];s&&s.forEach(i=>{try{i(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const s=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const s=this._subscriptionsByHash[r];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[r],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(r,{...s,state:"subscribing"});const c=await this._rpcWebSocket.call(o,i);this._setSubscription(r,{...s,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=s.callbacks,await this._updateSubscriptions()}catch(c){if(console.error(`Received ${c instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:c}),!e())return;this._setSubscription(r,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...s,state:"unsubscribing"}),this._setSubscription(r,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(c){if(c instanceof Error&&console.error(`${o} error:`,c.message),!e())return;this._setSubscription(r,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=tt(t,M0);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,s=_a([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const o=this._subscriptionsByHash[s];ie(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const{commitment:s,config:i}=Bt(r),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=tt(t,C0);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,s){const{commitment:i,config:o}=Bt(r),c=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Sa(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},c)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=tt(t,cp);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=tt(t,U0);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=tt(t,O0);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,s){const i=e||this._commitment;if(i||r||s){let o={};r&&(o.encoding=r),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,r,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,s)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=tt(t,N0);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const s=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,c)=>{if(o.type==="status"){e(o.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,r){const{commitment:s,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),c=this._makeSubscription({callback:(f,g)=>{e(f,g);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=tt(t,q0);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:C.struct([C.u32("instruction"),pr("recentSlot"),C.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:C.struct([C.u32("instruction")])},ExtendLookupTable:{index:2,layout:C.struct([C.u32("instruction"),pr(),C.seq(mt(),C.offset(C.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:C.struct([C.u32("instruction")])},CloseLookupTable:{index:4,layout:C.struct([C.u32("instruction")])}});new ut("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:C.struct([C.u8("instruction"),C.u32("units"),C.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:C.struct([C.u8("instruction"),C.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:C.struct([C.u8("instruction"),C.u32("units")])},SetComputeUnitPrice:{index:3,layout:C.struct([C.u8("instruction"),pr("microLamports")])}});new ut("ComputeBudget111111111111111111111111111111");C.struct([C.u8("numSignatures"),C.u8("padding"),C.u16("signatureOffset"),C.u16("signatureInstructionIndex"),C.u16("publicKeyOffset"),C.u16("publicKeyInstructionIndex"),C.u16("messageDataOffset"),C.u16("messageDataSize"),C.u16("messageInstructionIndex")]);new ut("Ed25519SigVerify111111111111111111111111111");vd.utils.isValidPrivateKey;C.struct([C.u8("numSignatures"),C.u16("signatureOffset"),C.u8("signatureInstructionIndex"),C.u16("ethAddressOffset"),C.u8("ethAddressInstructionIndex"),C.u16("messageDataOffset"),C.u16("messageDataSize"),C.u8("messageInstructionIndex"),C.blob(20,"ethAddress"),C.blob(64,"signature"),C.u8("recoveryId")]);new ut("KeccakSecp256k11111111111111111111111111111");var Eu;new ut("StakeConfig11111111111111111111111111111111");class Su{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Eu=Su;Su.default=new Eu(0,0,ut.default);Object.freeze({Initialize:{index:0,layout:C.struct([C.u32("instruction"),Ad(),kd()])},Authorize:{index:1,layout:C.struct([C.u32("instruction"),mt("newAuthorized"),C.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:C.struct([C.u32("instruction")])},Split:{index:3,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},Withdraw:{index:4,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},Deactivate:{index:5,layout:C.struct([C.u32("instruction")])},Merge:{index:7,layout:C.struct([C.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:C.struct([C.u32("instruction"),mt("newAuthorized"),C.u32("stakeAuthorizationType"),er("authoritySeed"),mt("authorityOwner")])}});new ut("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:C.struct([C.u32("instruction"),Id()])},Authorize:{index:1,layout:C.struct([C.u32("instruction"),mt("newAuthorized"),C.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:C.struct([C.u32("instruction"),C.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:C.struct([C.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:C.struct([C.u32("instruction"),Rd()])}});new ut("Vote111111111111111111111111111111111111111");new ut("Va1idator1nfo111111111111111111111111111111");Y({name:J(),website:ct(J()),details:ct(J()),iconUrl:ct(J()),keybaseUsername:ct(J())});new ut("Vote111111111111111111111111111111111111111");C.struct([mt("nodePubkey"),mt("authorizedWithdrawer"),C.u8("commission"),C.nu64(),C.seq(C.struct([C.nu64("slot"),C.u32("confirmationCount")]),C.offset(C.u32(),-8),"votes"),C.u8("rootSlotValid"),C.nu64("rootSlot"),C.nu64(),C.seq(C.struct([C.nu64("epoch"),mt("authorizedVoter")]),C.offset(C.u32(),-8),"authorizedVoters"),C.struct([C.seq(C.struct([mt("authorizedPubkey"),C.nu64("epochOfLastAuthorizedSwitch"),C.nu64("targetEpoch")]),32,"buf"),C.nu64("idx"),C.u8("isEmpty")],"priorVoters"),C.nu64(),C.seq(C.struct([C.nu64("epoch"),C.nu64("credits"),C.nu64("prevCredits")]),C.offset(C.u32(),-8),"epochCredits"),C.struct([C.nu64("slot"),C.nu64("timestamp")],"lastTimestamp")]);const lp={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function hp(n,t){return lp["https"][n]}const dp=1e9;var pp=Ai('<p style="text-align:center; margin-top: 1rem;">Fetching transactions</p>'),gp=Ai('<p style="color:red; text-align:center; margin-top:1rem"> </p>'),mp=Ai('<div class="transaction svelte-1n46o8q"><div> </div> <div> </div> <div> </div> <div>Signature: <div> </div></div> <div> </div></div>'),yp=Ai('<h1 class="svelte-1n46o8q">Solana Devnet Ledger</h1> <div class="controls svelte-1n46o8q"><input placeholder="Enter Solana public key" class="svelte-1n46o8q"/> <button class="svelte-1n46o8q">Submit</button></div> <!> <!> <!> <div class="footer svelte-1n46o8q"><a href="https://github.com/mourningdove007/token-dove" target="_blank" class="svelte-1n46o8q">Token Dove</a>  Devnet Edition  Printed from the Solana blockchain</div>',1);function wp(n,t){Oa(t,!1);let e=vr(""),r=vr([]),s=vr(!1),i=vr("");const o=new fp(hp("devnet"),"confirmed");async function c(){if(be(i,""),be(r,[]),!!Mt(e)){be(s,!0);try{const F=new ut(Mt(e)),H=await o.getSignaturesForAddress(F,{limit:5});if(!H.length){be(i,"No recent transactions found for this address."),be(s,!1);return}for(const D of H){const X=await o.getTransaction(D.signature,{commitment:"confirmed"});if(!X)continue;const Z=X.blockTime?new Date(X.blockTime*1e3).toLocaleString():"Unknown",Q=X.transaction.signatures[0],at=X.meta.preBalances,it=X.meta.postBalances,O=X.transaction.message.accountKeys,N=X.transaction.message.instructions[0],K=N.accounts[0],V=N.accounts[1]!==void 0?N.accounts[1]:N.accounts[0],y=O[K],a=O[V],d=((at[K]-it[K])/dp).toFixed(6);be(r,[...Mt(r),{from:y,to:a,amount:d,signature:Q,blockTime:Z}])}}catch(F){be(i,F.message)}finally{be(s,!1)}}}Df();var f=yp(),g=$e(ff(f),2),E=Ye(g),A=$e(E,2),B=$e(g,2);{var v=F=>{var H=pp();jr(F,H)};No(B,F=>{Mt(s)&&F(v)})}var S=$e(B,2);{var M=F=>{var H=gp(),D=Ye(H);To(()=>jn(D,Mt(i))),jr(F,H)};No(S,F=>{Mt(i)&&F(M)})}var L=$e(S,2);Of(L,1,()=>Mt(r),F=>F.signature,(F,H)=>{var D=mp(),X=Ye(D),Z=Ye(X),Q=$e(X,2),at=Ye(Q),it=$e(Q,2),O=Ye(it),N=$e(it,2),K=$e(Ye(N)),V=Ye(K),y=$e(N,2),a=Ye(y);To(()=>{jn(Z,`From: ${Mt(H).from??""}`),jn(at,`To: ${Mt(H).to??""}`),jn(O,`Amount (SOL): ${Mt(H).amount??""}`),jn(V,Mt(H).signature),jn(a,`Time: ${Mt(H).blockTime??""}`)}),jr(F,D)}),Pf(E,()=>Mt(e),F=>be(e,F)),Rf("click",A,c),jr(n,f),Na()}Tf(wp,{target:document.getElementById("app")});
